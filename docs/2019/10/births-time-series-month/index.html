

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script data-ad-client="ca-pub-6540088627087882" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.54.0">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Modeling Birth Rates Part 2: By Month</title>
    <meta name="author" content="Bryan Whiting">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="In Part 1, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.
Predicting Seasonality I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.">
    <meta property="og:description" content="In Part 1, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.
Predicting Seasonality I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Modeling Birth Rates Part 2: By Month">
    <meta property="og:url" content="/2019/10/births-time-series-month/">
    <meta property="og:site_name" content="My take on data">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="My take on data">
    <meta name="twitter:description" content="In Part 1, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.
Predicting Seasonality I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.">
    
      <meta name="twitter:creator" content="@bryanwhiting">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-85616639-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">My take on data</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Bryan Whiting</h4>
        
          <h5 class="sidebar-profile-bio">father, innovator, data scientist</h5>
        
      </div>
    
    
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/index.html">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/projects/index.html">
    
      <i class="sidebar-button-icon fa fa-lg fa-briefcase"></i>
      
      <span class="sidebar-button-desc">Projects</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/2138773/bryan">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/bryanwhiting">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/bryanwhiting">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/bryan-whiting-b524a44b/">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
  
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Modeling Birth Rates Part 2: By Month
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2019-10-26T00:00:00Z">
      
  October 26, 2019

    </time>
  
  
  
  
    <span>in</span>
    
      <a class="category-link" href="/categories/analysis">analysis</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/dygraphs/dygraph.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dygraphs/dygraph-combined.js"></script>
<script src="/rmarkdown-libs/dygraphs/shapes.js"></script>
<script src="/rmarkdown-libs/moment/moment.js"></script>
<script src="/rmarkdown-libs/moment-timezone/moment-timezone-with-data.js"></script>
<script src="/rmarkdown-libs/moment-fquarter/moment-fquarter.min.js"></script>
<script src="/rmarkdown-libs/dygraphs-binding/dygraphs.js"></script>
<script src="/rmarkdown-libs/Dygraph.Plugins.Unzoom/unzoom.js"></script>


<p>In <a href="/post/births-time-series-year">Part 1</a>, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.</p>
<div id="predicting-seasonality" class="section level1">
<h1>Predicting Seasonality</h1>
<p>I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.</p>
<p>Data is found here: <a href="http://data.un.org/Data.aspx?d=POP&amp;f=tableCode%3A55">http://data.un.org/Data.aspx?d=POP&amp;f=tableCode%3A55</a>. I filtered to just US data.</p>
<pre class="r"><code>df_month &lt;- readr::read_csv(&#39;~/github/blog/static/img/20191023-births/UNdata_Export_20191024_033233459.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   `Country or Area` = col_character(),
##   Year = col_integer(),
##   Area = col_character(),
##   Month = col_character(),
##   `Record Type` = col_character(),
##   Reliability = col_character(),
##   `Source Year` = col_integer(),
##   Value = col_integer(),
##   `Value Footnotes` = col_character()
## )</code></pre>
<pre class="r"><code>colnames(df_month) %&lt;&gt;% tolower() %&gt;% str_replace_all(&#39; &#39;, &#39;_&#39;)
df_mon &lt;- df_month %&gt;%
  filter(month != &#39;Total&#39;) %&gt;%
  select(year, month, value) %&gt;%
  mutate(births = value/1e3,
         # Convert month into date object
         month = substr(tolower(month), 1, 3),
         ym = paste(year, month, &#39;01&#39;, sep=&#39;-&#39;),
         ym = as.Date(strptime(ym, &#39;%Y-%b-%d&#39;)),
         mon = lubridate::month(ym)) %&gt;%
  arrange(ym) %&gt;%
  select(-value, -month)
head(df_mon)</code></pre>
<pre><code>## # A tibble: 6 x 4
##    year births ym           mon
##   &lt;int&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt;
## 1  2013   324. 2013-01-01     1
## 2  2013   292. 2013-02-01     2
## 3  2013   321. 2013-03-01     3
## 4  2013   312. 2013-04-01     4
## 5  2013   330. 2013-05-01     5
## 6  2013   320. 2013-06-01     6</code></pre>
<p>Let’s plot the data:</p>
<pre class="r"><code>cutoff = as.Date(&#39;2015-06-01&#39;)

plot_mon &lt;- function(df){
  
  # minimu prediction:
  y_lab_date = df %&gt;% select(starts_with(&#39;p_&#39;), births) %&gt;% min()
  df %&gt;% 
    select(starts_with(&#39;p_&#39;), births, ym) %&gt;%
    gather(key=line, value=value, -ym) %&gt;%
    ggplot(aes(x = ym, y = value)) +
    geom_vline(xintercept = cutoff + 30) +
    annotate(&#39;text&#39;, x=cutoff + 15, y = y_lab_date, label=format(cutoff, &quot;&#39;%y-%m&quot;), hjust=0) +
    annotate(&#39;rect&#39;, xmin=cutoff + 30, 
             xmax=as.Date(&#39;2016-01-01&#39;), ymin=-Inf, ymax=Inf,
    fill=&#39;pink&#39;, alpha=0.1) + 
    geom_line(aes(color=line)) +
    scale_x_date(date_breaks= &quot;6 months&quot;, 
                 date_labels = &quot;&#39;%y-%m&quot;, 
                 limits = c(as.Date(&#39;2013-01-01&#39;), as.Date(&#39;2016-01-01&#39;)),
                 expand = c(0, 0)) +
    ggthemes::scale_color_pander() +
    labs(title = &#39;Number of US Births by Month&#39;,
         y = &#39;Number Births (Thousands)&#39;,
         x = &quot;&#39;Year-Month&quot;) 
}
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-2-1.png" width="672" /> ## Linear Model Let’s fit a linear model with month:</p>
<pre class="r"><code>mod &lt;- lm(births ~ mon, data = df_mon %&gt;% filter(ym &lt;=cutoff))
df_mon$p_line &lt;- predict(mod, df_mon)
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-3-1.png" width="672" /> This fit a linear trend by month because I treated month as numeric (rather than categorical). That being said, the predictions were fairly accurate in the out-of-time period. Treating it as a categorical will yield a better fit:</p>
<div id="linear-model-with-factors-for-features" class="section level2">
<h2>Linear Model with Factors for Features</h2>
<pre class="r"><code>mod_fact &lt;- lm(births ~ as.factor(mon), data = df_mon %&gt;% filter(ym &lt;=cutoff))
df_mon$p_line_fact &lt;- predict(mod_fact, df_mon)
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-4-1.png" width="672" /> Treating the month as a factor lead to a drastically better prediction. This let me obtain an individual slope for each month.</p>
<pre class="r"><code>summary(mod_fact)</code></pre>
<pre><code>## 
## Call:
## lm(formula = births ~ as.factor(mon), data = df_mon %&gt;% filter(ym &lt;= 
##     cutoff))
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -5.655 -2.293  0.314  2.248  5.208 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      325.33733    2.31667 140.433  &lt; 2e-16 ***
## as.factor(mon)2  -29.26733    3.27626  -8.933 4.92e-08 ***
## as.factor(mon)3   -0.99600    3.27626  -0.304 0.764611    
## as.factor(mon)4   -8.18167    3.27626  -2.497 0.022436 *  
## as.factor(mon)5    5.34600    3.27626   1.632 0.120106    
## as.factor(mon)6    0.09633    3.27626   0.029 0.976866    
## as.factor(mon)7   27.00367    3.66297   7.372 7.69e-07 ***
## as.factor(mon)8   28.53367    3.66297   7.790 3.57e-07 ***
## as.factor(mon)9   17.87867    3.66297   4.881 0.000120 ***
## as.factor(mon)10  16.62167    3.66297   4.538 0.000255 ***
## as.factor(mon)11  -7.09733    3.66297  -1.938 0.068525 .  
## as.factor(mon)12  12.74517    3.66297   3.479 0.002676 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4.013 on 18 degrees of freedom
## Multiple R-squared:  0.9617, Adjusted R-squared:  0.9383 
## F-statistic:  41.1 on 11 and 18 DF,  p-value: 1.837e-10</code></pre>
<p>How could we improve: * Use other lagged variables (which, in this case, wouldn’t require dynamic prediction if you do 12 months).</p>
<pre class="r"><code>mod_fact_y &lt;- lm(births ~ as.factor(mon) + year, data = df_mon %&gt;% filter(ym &lt;=cutoff))
df_mon$p_line_fact_y &lt;- predict(mod_fact_y, df_mon)
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-6-1.png" width="672" /> Adding a year for the first six months ads the average trend for the first six months, which is causing the predictions to be overblown. So it’s probably not good to have year in as a predictor.</p>
</div>
<div id="poisson-regression" class="section level2">
<h2>Poisson Regression</h2>
<p>Perhaps we could get a better fit if we try a different modeling technique. This blog post gives a great overview of Poisson regression: <a href="https://www.dataquest.io/blog/tutorial-poisson-regression-in-r/" class="uri">https://www.dataquest.io/blog/tutorial-poisson-regression-in-r/</a>.</p>
<pre class="r"><code># force births to be integer
df_mon$births_int = as.integer(df_mon$births)
mod_pois &lt;- glm(births_int ~ as.factor(mon), 
                family=poisson,
                data = df_mon %&gt;% filter(ym &lt;= cutoff))
# need to wrap in exp() becasue prediction is in terms of log
df_mon$p_pois &lt;- exp(predict(mod_pois, df_mon))
summary(mod_pois)</code></pre>
<pre><code>## 
## Call:
## glm(formula = births_int ~ as.factor(mon), family = poisson, 
##     data = df_mon %&gt;% filter(ym &lt;= cutoff))
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -0.3154  -0.1253   0.0185   0.1355   0.2952  
## 
## Coefficients:
##                    Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)       5.783e+00  3.204e-02 180.475   &lt;2e-16 ***
## as.factor(mon)2  -9.357e-02  4.641e-02  -2.016   0.0438 *  
## as.factor(mon)3  -3.085e-03  4.535e-02  -0.068   0.9458    
## as.factor(mon)4  -2.600e-02  4.561e-02  -0.570   0.5686    
## as.factor(mon)5   1.629e-02  4.513e-02   0.361   0.7181    
## as.factor(mon)6   2.000e-15  4.531e-02   0.000   1.0000    
## as.factor(mon)7   8.083e-02  4.947e-02   1.634   0.1023    
## as.factor(mon)8   8.508e-02  4.941e-02   1.722   0.0851 .  
## as.factor(mon)9   5.493e-02  4.984e-02   1.102   0.2704    
## as.factor(mon)10  5.055e-02  4.991e-02   1.013   0.3111    
## as.factor(mon)11 -2.232e-02  5.100e-02  -0.438   0.6617    
## as.factor(mon)12  3.877e-02  5.008e-02   0.774   0.4389    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## (Dispersion parameter for poisson family taken to be 1)
## 
##     Null deviance: 23.41431  on 29  degrees of freedom
## Residual deviance:  0.88328  on 18  degrees of freedom
## AIC: 253.77
## 
## Number of Fisher Scoring iterations: 3</code></pre>
<pre class="r"><code>plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="arima-models" class="section level2">
<h2>ARIMA models</h2>
<p>ARIMA models will model univariate time series data - so we can’t take into account month. Skip ahead to the ARIMAX section below to cover how to include covariates in your model.</p>
<p>If you really want to understand the math behind ARIMA modeling, check out this book: * <a href="https://otexts.com/fpp2/arima.html" class="uri">https://otexts.com/fpp2/arima.html</a> * Or this Duke text: <a href="https://people.duke.edu/~rnau/411searw.htm" class="uri">https://people.duke.edu/~rnau/411searw.htm</a></p>
<p>ARIMA models: <a href="https://datascienceplus.com/time-series-analysis-using-arima-model-in-r/" class="uri">https://datascienceplus.com/time-series-analysis-using-arima-model-in-r/</a></p>
<p>Following the tutorial above, this plot shows four different trends in our univariate time series data.</p>
<pre class="r"><code>y &lt;- df_mon %&gt;% filter(ym &lt;= cutoff) %&gt;% pull(births)
ts_births &lt;- ts(y, start=c(2013,1), frequency = 12)
plot(decompose(ts_births))</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Looking at this plot, we can definitely see stationarity in the first difference.</p>
<pre class="r"><code>library(&quot;fUnitRoots&quot;)</code></pre>
<pre><code>## Loading required package: timeDate</code></pre>
<pre><code>## Loading required package: timeSeries</code></pre>
<pre><code>## Loading required package: fBasics</code></pre>
<pre class="r"><code>urkpssTest(ts_births, type = c(&quot;tau&quot;), lags = c(&quot;short&quot;),use.lag = NULL, doplot = TRUE)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre><code>## 
## Title:
##  KPSS Unit Root Test
## 
## Test Results:
##   NA
## 
## Description:
##  Sat Oct 26 14:17:25 2019 by user:</code></pre>
<pre class="r"><code>tsstationary = diff(ts_births, differences=1)
plot(tsstationary)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-9-2.png" width="672" /> Let’s check for autocorrelation:</p>
<pre class="r"><code>acf(ts_births, lag.max = 24)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-10-1.png" width="672" /> We see a huge autocorrelation at lag = 1. So if we had more than 2 years of data, we could more easily model this. Clearly there’s an effect here on time.</p>
<p>Let’s subtract the seasonal components and see what the data look like:</p>
<pre class="r"><code>ts_components = decompose(ts_births)
# Subtract the yearly seasonal effect
ts_nonseasonal = ts_births - ts_components$seasonal
# non-seasonal trend
plot(ts_nonseasonal)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-11-1.png" width="672" /> Now let’s see what the differenced data look like:</p>
<pre class="r"><code># Subtract from the prior year
tsstationary &lt;- diff(ts_nonseasonal, differences=1)
plot(tsstationary)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Here’s another cool blog post on ARIMA modeling: <a href="https://ademos.people.uic.edu/Chapter23.html#622_decomposing_data_once_we_know_the_frequency" class="uri">https://ademos.people.uic.edu/Chapter23.html#622_decomposing_data_once_we_know_the_frequency</a></p>
<pre class="r"><code>plot(stl(ts_births, s.window = &#39;periodic&#39;))</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Let’s finally build a model:</p>
<pre class="r"><code>library(&#39;forecast&#39;)
library(&#39;lmtest&#39;)</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:timeSeries&#39;:
## 
##     time&lt;-</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre class="r"><code>auto.arima(ts_births)</code></pre>
<pre><code>## Series: ts_births 
## ARIMA(0,0,0)(0,1,0)[12] with drift 
## 
## Coefficients:
##        drift
##       0.2787
## s.e.  0.0744
## 
## sigma^2 estimated as 15.28:  log likelihood=-49.52
## AIC=103.05   AICc=103.85   BIC=104.83</code></pre>
<p>Looks like <code>auto.arima()</code> identified a <a href="https://people.duke.edu/~rnau/411searw.htm">Seasonal Random Walk model</a>. Meaning, it has an annual seasonal trend, but really not much else. (No moving average trend or anything.)</p>
<p>Let’s fit the model:</p>
<pre class="r"><code>mod_arima = stats::arima(ts_births, 
                         order=c(0,0,0), 
                         seasonal=list(order=c(0, 1, 0),
                                       period=12),
                         method=&#39;ML&#39;
                         )
summary(mod_arima)</code></pre>
<pre><code>## 
## Call:
## stats::arima(x = ts_births, order = c(0, 0, 0), seasonal = list(order = c(0, 
##     1, 0), period = 12), method = &quot;ML&quot;)
## 
## 
## sigma^2 estimated as 25.55:  log likelihood = -54.71,  aic = 111.41
## 
## Training set error measures:
##                    ME     RMSE      MAE     MPE      MAPE     MASE
## Training set 2.137573 3.920599 2.666706 0.64489 0.8073139 0.168057
##                   ACF1
## Training set 0.1273043</code></pre>
<p>There are two ways to get predictions, using the <code>predict()</code> method, or the <code>forecast()</code> method. The <code>forecast()</code> method lets you see a little more data. They both yield the same point estimate predictions:</p>
<pre class="r"><code>predict(mod_arima, n.ahead = 6)</code></pre>
<pre><code>## $pred
##          Jul     Aug     Sep     Oct     Nov     Dec
## 2015 355.524 354.257 348.424 343.356 317.998 340.591
## 
## $se
##           Jul      Aug      Sep      Oct      Nov      Dec
## 2015 5.054377 5.054377 5.054377 5.054377 5.054377 5.054377</code></pre>
<pre class="r"><code>forecast::forecast(mod_arima, h=6)</code></pre>
<pre><code>##          Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## Jul 2015        355.524 349.0466 362.0014 345.6176 365.4304
## Aug 2015        354.257 347.7796 360.7344 344.3506 364.1634
## Sep 2015        348.424 341.9466 354.9014 338.5176 358.3304
## Oct 2015        343.356 336.8786 349.8334 333.4496 353.2624
## Nov 2015        317.998 311.5206 324.4754 308.0916 327.9044
## Dec 2015        340.591 334.1136 347.0684 330.6846 350.4974</code></pre>
<p>Let’s visualize the predictions. We’re seeing two confidence bands: the 80% CI and 95% CI.</p>
<pre class="r"><code>plot(forecast::forecast(mod_arima, h=6))</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-17-1.png" width="672" /> Looks like it’s capturing the trend well! Let’s see how it compares to the other models.</p>
<pre class="r"><code>p_arima = predict(mod_arima, n.ahead = 6)$pred
# Note: Unlike with the linear models, I&#39;m not able to get an in-sample prediction (i don&#39;t know what that&#39;d really mean with an ARIMA mdoel). It&#39;s a little complex. But all we really care abotu is the out-of-time predictions. I&#39;m appending to y just so I can get a complete series.
# Note: i named it p_xarima so it could maintain alphabetical ordering with the other plot names. no other reason - I didn&#39;t want to screw up the plot colors by re-ordering the series.
df_mon[&#39;p_xarima&#39;] = c(y, p_arima)
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-18-1.png" width="672" /> Remember, in this plot the gray line <em>is</em> the births line up until the prediction period of 2015-07-01.</p>
</div>
<div id="arimax" class="section level2">
<h2>ARIMAX</h2>
<p>Maybe you want a better model than just the univariate ARIMA model. This is where the <code>ARIMAX</code> model comes in. Rob J. Hyndman covers the ARIMAX model pretty well: <a href="https://robjhyndman.com/hyndsight/arimax/" class="uri">https://robjhyndman.com/hyndsight/arimax/</a>.</p>
<pre class="r"><code>x_mon &lt;- df_mon %&gt;% dplyr::filter(ym &lt;= cutoff) %&gt;% select(mon) %&gt;% pull()
# The ARIMA model includes an &quot;xreg&quot; options. Rob Hyndman&#39;s article is from 2010, so it tells you to use teh `arimax()` function.

# Adding in x-reg, we see auto.arima suggests a Regression with ARIMA(0,0,0) errors.
auto.arima(ts_births, xreg=x_mon)</code></pre>
<pre><code>## Series: ts_births 
## Regression with ARIMA(0,0,0) errors 
## 
## Coefficients:
##       intercept    xreg
##        313.2225  2.5752
## s.e.     4.8469  0.7118
## 
## sigma^2 estimated as 188.2:  log likelihood=-120.1
## AIC=246.19   AICc=247.12   BIC=250.4</code></pre>
<pre class="r"><code># We can confrim this is just a linear model:
lm(y ~ x_mon)</code></pre>
<pre><code>## 
## Call:
## lm(formula = y ~ x_mon)
## 
## Coefficients:
## (Intercept)        x_mon  
##     313.223        2.575</code></pre>
<pre class="r"><code># Well, that&#39;s not useful - we already fit the non-factored linear model.
# So let&#39;s add as.factor(x_mon) to our prior model to see if it helps.
mod_arimax &lt;- stats::arima(ts_births, 
                         order=c(0,0,0), 
                         seasonal=list(order=c(0, 1, 0),
                                       period=12),
                         xreg = x_mon,
                         method = &#39;ML&#39;
                         )
#
newxreg = df_mon %&gt;% dplyr::filter(ym &gt; cutoff) %&gt;% select(mon) %&gt;% pull()
p_arimax = predict(mod_arimax, newxreg = newxreg,  n.ahead = 6)$pred
# Did I mess something up?
p_arima - p_arimax</code></pre>
<pre><code>##      Jul Aug Sep Oct Nov Dec
## 2015   0   0   0   0   0   0</code></pre>
<p>I think I definitely messed something up, because adding <code>xreg</code> didn’t change anything. I’m guessing that adding a linear term for x_mon doesn’t affect anything in the underlying model structure with the ARIMA model. I’d have to do a deeper dive here, but for <code>xreg</code> to be meanignful, it’d have to be…like real information. Hey, you pay for what you get with these online tutorials!</p>
</div>
<div id="prophet" class="section level2">
<h2>Prophet</h2>
<p>Facebook has a time series package called <a href="https://facebook.github.io/prophet/docs/quick_start.html#r-api"><code>prophet</code></a> which is written using Stan, a Bayesian probabilitic programming language. <code>prophet</code> will auto detect a lot of stuff for you, like yearly seasonality:</p>
<pre class="r"><code>library(prophet)</code></pre>
<pre><code>## Loading required package: Rcpp</code></pre>
<pre><code>## Loading required package: rlang</code></pre>
<pre><code>## 
## Attaching package: &#39;rlang&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:magrittr&#39;:
## 
##     set_names</code></pre>
<pre><code>## The following objects are masked from &#39;package:purrr&#39;:
## 
##     %@%, as_function, flatten, flatten_chr, flatten_dbl,
##     flatten_int, flatten_lgl, flatten_raw, invoke, list_along,
##     modify, prepend, splice</code></pre>
<pre class="r"><code>mod_proph &lt;- df_mon %&gt;% 
  dplyr::select(births, ym, mon) %&gt;% 
  dplyr::filter(ym &lt;= cutoff) %&gt;%
  # Got this error:  Dataframe must have columns &#39;ds&#39; and &#39;y&#39; with the dates and values respectively.
  # so I rename my target and date times
  mutate(ds = ym, y = births) %&gt;%
  prophet()</code></pre>
<pre><code>## Disabling weekly seasonality. Run prophet with weekly.seasonality=TRUE to override this.</code></pre>
<pre><code>## Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.</code></pre>
<pre><code>## n.changepoints greater than number of observations. Using 23</code></pre>
<pre class="r"><code># 
summary(mod_proph)</code></pre>
<pre><code>##                         Length Class      Mode     
## growth                   1     -none-     character
## changepoints            23     POSIXct    numeric  
## n.changepoints           1     -none-     numeric  
## changepoint.range        1     -none-     numeric  
## yearly.seasonality       1     -none-     character
## weekly.seasonality       1     -none-     character
## daily.seasonality        1     -none-     character
## holidays                 0     -none-     NULL     
## seasonality.mode         1     -none-     character
## seasonality.prior.scale  1     -none-     numeric  
## changepoint.prior.scale  1     -none-     numeric  
## holidays.prior.scale     1     -none-     numeric  
## mcmc.samples             1     -none-     numeric  
## interval.width           1     -none-     numeric  
## uncertainty.samples      1     -none-     numeric  
## specified.changepoints   1     -none-     logical  
## start                    1     POSIXct    numeric  
## y.scale                  1     -none-     numeric  
## logistic.floor           1     -none-     logical  
## t.scale                  1     -none-     numeric  
## changepoints.t          23     -none-     numeric  
## seasonalities            1     -none-     list     
## extra_regressors         0     -none-     list     
## country_holidays         0     -none-     NULL     
## stan.fit                 0     -none-     NULL     
## params                   5     -none-     list     
## history                  8     tbl_df     list     
## history.dates           30     POSIXct    numeric  
## train.holiday.names      0     -none-     NULL     
## train.component.cols     3     data.frame list     
## component.modes          2     -none-     list</code></pre>
<p>Now we need to make a future dataframe for predictions:</p>
<pre class="r"><code>#Use  &quot;include_history = F&quot; to only get a time series for the future values, by default, all history is shown
future &lt;- make_future_dataframe(mod_proph, 6, freq=&#39;month&#39;)
cbind(head(future), tail(future))</code></pre>
<pre><code>##           ds         ds
## 1 2013-01-01 2015-07-01
## 2 2013-02-01 2015-08-01
## 3 2013-03-01 2015-09-01
## 4 2013-04-01 2015-10-01
## 5 2013-05-01 2015-11-01
## 6 2013-06-01 2015-12-01</code></pre>
<p>Now predict:</p>
<pre class="r"><code>p_proph &lt;- predict(mod_proph, future)
plot(mod_proph, p_proph)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-22-1.png" width="672" /> Looking at this plot, I’m slightly worried about overfitting! It looks like our model is going straight through the training points. But dang, that was wicked easy to fit. I’m liking how they designed the prophet!</p>
<p>Let’s dive in to how the predictions were made:</p>
<pre class="r"><code>prophet_plot_components(mod_proph, p_proph)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-23-1.png" width="672" /> We see there’s an overall trend, and a yearly seasonal trend.</p>
<p>And for funsies, an interactive graph:</p>
<pre class="r"><code>dyplot.prophet(mod_proph, p_proph)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"attrs":{"labels":["month","Actual","Predicted"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"colors":["black","blue"],"series":{"Actual":{"axis":"y","drawPoints":true,"strokeWidth":0},"Predicted":{"axis":"y"}},"customBars":true,"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel"},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2013-01-01T00:00:00.000Z","2013-02-01T00:00:00.000Z","2013-03-01T00:00:00.000Z","2013-04-01T00:00:00.000Z","2013-05-01T00:00:00.000Z","2013-06-01T00:00:00.000Z","2013-07-01T00:00:00.000Z","2013-08-01T00:00:00.000Z","2013-09-01T00:00:00.000Z","2013-10-01T00:00:00.000Z","2013-11-01T00:00:00.000Z","2013-12-01T00:00:00.000Z","2014-01-01T00:00:00.000Z","2014-02-01T00:00:00.000Z","2014-03-01T00:00:00.000Z","2014-04-01T00:00:00.000Z","2014-05-01T00:00:00.000Z","2014-06-01T00:00:00.000Z","2014-07-01T00:00:00.000Z","2014-08-01T00:00:00.000Z","2014-09-01T00:00:00.000Z","2014-10-01T00:00:00.000Z","2014-11-01T00:00:00.000Z","2014-12-01T00:00:00.000Z","2015-01-01T00:00:00.000Z","2015-02-01T00:00:00.000Z","2015-03-01T00:00:00.000Z","2015-04-01T00:00:00.000Z","2015-05-01T00:00:00.000Z","2015-06-01T00:00:00.000Z","2015-07-01T00:00:00.000Z","2015-08-01T00:00:00.000Z","2015-09-01T00:00:00.000Z","2015-10-01T00:00:00.000Z","2015-11-01T00:00:00.000Z","2015-12-01T00:00:00.000Z"],[[323.691,323.691,323.691],[291.748,291.748,291.748],[320.529,320.529,320.529],[311.645,311.645,311.645],[329.52,329.52,329.52],[319.779,319.779,319.779],[349.158,349.158,349.158],[353.485,353.485,353.485],[338.008,338.008,338.008],[340.562,340.562,340.562],[318.482,318.482,318.482],[335.574,335.574,335.574],[326.366,326.366,326.366],[298.404,298.404,298.404],[323.572,323.572,323.572],[318.99,318.99,318.99],[334.613,334.613,334.613],[325.981,325.981,325.981],[355.524,355.524,355.524],[354.257,354.257,354.257],[348.424,348.424,348.424],[343.356,343.356,343.356],[317.998,317.998,317.998],[340.591,340.591,340.591],[325.955,325.955,325.955],[298.058,298.058,298.058],[328.923,328.923,328.923],[320.832,320.832,320.832],[327.917,327.917,327.917],[330.541,330.541,330.541],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null]],[[322.686467137402,323.685990345807,324.571061824139],[291.210150224587,292.236483231684,293.139585692167],[318.385885525354,319.341036873793,320.321331433513],[310.731203666884,311.643038047142,312.636761624884],[329.480918481732,330.498385830713,331.481317996314],[318.280425436729,319.234512499063,320.204546142946],[348.38542626533,349.383784615892,350.329781728406],[352.671036163271,353.700036120019,354.698068223061],[337.091841020992,338.172980065002,339.153666701062],[339.731853989956,340.628982284809,341.541528853473],[317.417136831349,318.423112440853,319.494078652536],[334.463211383965,335.409513304407,336.408486685797],[325.156426336368,326.146932640329,327.101512421799],[296.212317834544,297.181055335572,298.263542208074],[324.821964096061,325.764005582318,326.725057312014],[317.958818198877,318.922384318373,319.834596003132],[331.763844624366,332.742490593879,333.752134808588],[326.339972968267,327.267004769023,328.274148329692],[354.296388138618,355.298641000499,356.304203980476],[353.030202467413,354.041965073493,354.99103681579],[347.265838615623,348.25848698901,349.21775890396],[342.322296106816,343.288119957682,344.302510761367],[317.016306983701,318.055668090477,318.987311663248],[339.765449113726,340.755172332297,341.68636073758],[325.228729719401,326.178845832872,327.172146696088],[297.803563430229,298.791728545463,299.833490593596],[326.953964779249,327.919893545423,328.901390686041],[319.864599688044,320.902463084362,321.881224433188],[327.809997688241,328.81070803801,329.758586360108],[328.808410638435,329.799658820178,330.782767747078],[355.245734564331,356.211186311567,357.21034725216],[349.317540914841,350.255241397904,351.216345924622],[353.944899207381,354.946923474304,355.976408450615],[342.047993139986,343.141988583559,344.262577418606],[314.663249782515,315.778149653223,316.958213668498],[343.724242065527,344.895728073777,346.222216282902]]],"plugins":{"Unzoom":"{}"}},"evals":["attrs.interactionModel","plugins.Unzoom"],"jsHooks":[]}</script>
<p>Now let’s add the predictions to the list and see how it performs:</p>
<pre class="r"><code># adding a z for alphabetical ordering...I should have picked a better naming convention by now.
df_mon$p_zprophet &lt;- p_proph$yhat
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>You can add regressors in <code>prophet</code> too, but it doesn’t make sense in our case because our only regressor is the <code>month</code> variable, which gets included in the model with the seasonal trend. The <a href="https://facebook.github.io/prophet/docs/seasonality,_holiday_effects,_and_regressors.html">prophet docs</a> talk about how to add regressors and other custom trends.</p>
<p>And that’s a wrap. I’m not building any more time series models.</p>
</div>
<div id="gbm" class="section level2">
<h2>GBM!</h2>
<p>Oh, how could we forget the GBM? In my prior post, I demonstrated that on the MPG data set that the <code>caret</code> GBM outperformed XGBoost and H2O’s GBM. (Do not take that as an endorsement or final statement - every model needs fine tuning and I certain didn’t do that.) In this case, let’s see how the out-of-the-box GBM does.</p>
<pre class="r"><code>df_train &lt;- df_mon %&gt;% 
  dplyr::filter(ym &lt;= cutoff) %&gt;% 
  select(year, births, mon)
mod_rf &lt;- caret::train(births ~ mon, 
                       data=df_train,
                       distribution=&#39;gaussian&#39;)

# This was giving me errors without bag.fraction specified manually - presumably
# there aren&#39;t enough data to do proper bootstrapping
mod_gbm &lt;- caret::train(births ~ mon, data=df_train, 
                    distribution=&#39;gaussian&#39;, 
                    method=&#39;gbm&#39;, 
                    bag.fraction=.8) # I needed</code></pre>
<pre><code>## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      213.3169             nan     0.1000   11.7408
##      2      194.4407             nan     0.1000   19.7189
##      3      180.1687             nan     0.1000   20.3029
##      4      168.2838             nan     0.1000   16.4528
##      5      161.9989             nan     0.1000    3.9332
##      6      153.5493             nan     0.1000   12.2194
##      7      145.1529             nan     0.1000    6.7237
##      8      142.4818             nan     0.1000    4.7555
##      9      136.4656             nan     0.1000    5.7279
##     10      132.5571             nan     0.1000    4.6846
##     20      113.0232             nan     0.1000   -1.6490
##     40      107.9665             nan     0.1000   -0.7930
##     60      105.7100             nan     0.1000   -0.3434
##     80      104.3852             nan     0.1000   -0.0237
##    100      101.0925             nan     0.1000   -1.0581
##    120      100.6023             nan     0.1000   -2.4912
##    140       99.0704             nan     0.1000   -1.6884
##    150       98.8068             nan     0.1000   -0.9041
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      211.2449             nan     0.1000   10.5823
##      2      190.2843             nan     0.1000    9.8338
##      3      174.8343             nan     0.1000   11.7218
##      4      162.2958             nan     0.1000   10.4608
##      5      154.2114             nan     0.1000   13.2485
##      6      146.5050             nan     0.1000    7.3096
##      7      139.8543             nan     0.1000    4.7793
##      8      134.1351             nan     0.1000    3.9051
##      9      128.6024             nan     0.1000   -1.8066
##     10      126.2324             nan     0.1000    3.0489
##     20      113.0443             nan     0.1000    0.0676
##     40      105.8303             nan     0.1000    0.4348
##     60      103.4681             nan     0.1000   -2.4643
##     80      101.4989             nan     0.1000   -0.1755
##    100      100.7963             nan     0.1000    0.0319
##    120       99.5905             nan     0.1000   -0.9063
##    140       98.4627             nan     0.1000   -0.7518
##    150       97.6526             nan     0.1000   -4.1265
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.5108             nan     0.1000   22.0826
##      2      191.3803             nan     0.1000   25.0806
##      3      174.8621             nan     0.1000    9.7288
##      4      165.8529             nan     0.1000   18.4108
##      5      155.8744             nan     0.1000   10.6712
##      6      146.5201             nan     0.1000    3.5344
##      7      139.9941             nan     0.1000    4.6509
##      8      133.2046             nan     0.1000   -5.5763
##      9      128.9241             nan     0.1000    0.2056
##     10      126.3177             nan     0.1000    4.5259
##     20      112.8446             nan     0.1000    0.0278
##     40      106.0214             nan     0.1000   -0.8695
##     60      104.0236             nan     0.1000   -0.9187
##     80      101.6619             nan     0.1000   -0.3109
##    100       99.1744             nan     0.1000   -0.4899
##    120       97.9727             nan     0.1000    0.1543
##    140       97.6876             nan     0.1000   -3.8144
##    150       97.7183             nan     0.1000   -1.9251
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      285.7846             nan     0.1000   22.1822
##      2      261.0233             nan     0.1000   10.3135
##      3      243.4753             nan     0.1000   13.7457
##      4      227.2075             nan     0.1000   10.8099
##      5      215.0072             nan     0.1000   11.7791
##      6      204.4917             nan     0.1000   12.6624
##      7      195.1984             nan     0.1000    8.6330
##      8      185.9158             nan     0.1000   -1.8271
##      9      181.8537             nan     0.1000    9.1979
##     10      176.1479             nan     0.1000    0.0169
##     20      157.3825             nan     0.1000   -9.0029
##     40      152.1881             nan     0.1000   -4.4828
##     60      149.7158             nan     0.1000   -1.3520
##     80      148.1284             nan     0.1000   -0.1208
##    100      148.2766             nan     0.1000   -7.5142
##    120      147.6597             nan     0.1000   -0.5930
##    140      145.7184             nan     0.1000   -4.6153
##    150      144.5532             nan     0.1000   -4.2462
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      288.1056             nan     0.1000   34.2097
##      2      266.4636             nan     0.1000   26.7123
##      3      248.0976             nan     0.1000   21.1889
##      4      234.0039             nan     0.1000   17.0829
##      5      223.0906             nan     0.1000   17.1419
##      6      213.9088             nan     0.1000    7.1457
##      7      206.7203             nan     0.1000   14.5591
##      8      197.6152             nan     0.1000    4.3626
##      9      191.5831             nan     0.1000    8.2332
##     10      187.5215             nan     0.1000    7.6914
##     20      165.7376             nan     0.1000    1.9901
##     40      154.7334             nan     0.1000   -1.2991
##     60      153.5479             nan     0.1000   -0.2215
##     80      151.8960             nan     0.1000   -4.5264
##    100      148.9985             nan     0.1000   -1.8619
##    120      149.1092             nan     0.1000   -4.8604
##    140      148.6847             nan     0.1000   -0.5884
##    150      147.9141             nan     0.1000   -4.7087
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      287.6341             nan     0.1000   33.2048
##      2      267.2810             nan     0.1000   25.2185
##      3      246.6757             nan     0.1000   12.2104
##      4      228.9396             nan     0.1000    1.3327
##      5      217.6823             nan     0.1000    6.1911
##      6      205.6759             nan     0.1000    0.7563
##      7      197.0414             nan     0.1000    2.1090
##      8      188.3827             nan     0.1000   -0.0440
##      9      182.3472             nan     0.1000    3.0319
##     10      179.1888             nan     0.1000    5.4560
##     20      159.1817             nan     0.1000    0.8819
##     40      151.7215             nan     0.1000   -0.5932
##     60      149.6856             nan     0.1000   -1.6383
##     80      147.2781             nan     0.1000   -1.4529
##    100      147.2825             nan     0.1000   -0.3833
##    120      144.9974             nan     0.1000   -3.4269
##    140      143.2739             nan     0.1000   -1.1355
##    150      142.6973             nan     0.1000   -0.4372
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      218.0213             nan     0.1000    9.2202
##      2      209.3972             nan     0.1000    7.7682
##      3      201.8335             nan     0.1000    5.8243
##      4      197.6759             nan     0.1000    9.7566
##      5      190.8912             nan     0.1000   16.4318
##      6      185.6951             nan     0.1000   -2.9414
##      7      178.5161             nan     0.1000    6.7138
##      8      175.4718             nan     0.1000    1.6723
##      9      170.6287             nan     0.1000    8.9568
##     10      168.7166             nan     0.1000    0.5992
##     20      149.0459             nan     0.1000   -3.1578
##     40      145.3336             nan     0.1000   -1.4034
##     60      142.9496             nan     0.1000   -0.9554
##     80      142.6502             nan     0.1000   -0.3221
##    100      142.8379             nan     0.1000   -0.5074
##    120      142.1642             nan     0.1000   -0.6437
##    140      142.2662             nan     0.1000   -1.5085
##    150      142.1601             nan     0.1000   -3.1486
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      214.7436             nan     0.1000   18.6889
##      2      201.0318             nan     0.1000    3.2295
##      3      190.8287             nan     0.1000    9.9686
##      4      182.8440             nan     0.1000    8.0228
##      5      177.9159             nan     0.1000   11.0222
##      6      169.8693             nan     0.1000   -5.8361
##      7      164.7150             nan     0.1000    0.7166
##      8      160.6143             nan     0.1000    0.1308
##      9      157.0139             nan     0.1000   -0.8524
##     10      154.2205             nan     0.1000   -0.7168
##     20      144.4425             nan     0.1000   -5.1483
##     40      142.7641             nan     0.1000   -0.5604
##     60      142.2671             nan     0.1000   -5.2046
##     80      140.6742             nan     0.1000   -2.7095
##    100      140.6089             nan     0.1000   -1.0842
##    120      140.4458             nan     0.1000   -1.0998
##    140      139.3793             nan     0.1000   -2.2965
##    150      139.2861             nan     0.1000   -1.9265
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      213.3045             nan     0.1000   14.2319
##      2      198.5970             nan     0.1000    3.8161
##      3      186.3247             nan     0.1000   -1.2399
##      4      179.1263             nan     0.1000    1.9251
##      5      172.5306             nan     0.1000    5.4846
##      6      169.5212             nan     0.1000    8.4164
##      7      164.2423             nan     0.1000    0.9621
##      8      162.0025             nan     0.1000    4.1926
##      9      158.7623             nan     0.1000    2.7454
##     10      155.5142             nan     0.1000   -0.0654
##     20      144.9856             nan     0.1000   -0.2187
##     40      140.8321             nan     0.1000   -2.7756
##     60      139.6234             nan     0.1000   -0.2746
##     80      138.7714             nan     0.1000   -8.4091
##    100      137.8841             nan     0.1000   -0.8890
##    120      137.5152             nan     0.1000   -3.1129
##    140      136.5870             nan     0.1000   -1.5292
##    150      136.5767             nan     0.1000   -0.7763
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      205.5291             nan     0.1000   23.9889
##      2      184.3051             nan     0.1000   13.2070
##      3      168.1819             nan     0.1000   12.7852
##      4      156.7016             nan     0.1000   21.9019
##      5      140.3254             nan     0.1000   -2.8557
##      6      129.8690             nan     0.1000    7.1278
##      7      121.8120             nan     0.1000    4.2193
##      8      113.6911             nan     0.1000   -0.3501
##      9      109.9721             nan     0.1000    7.8290
##     10      104.9797             nan     0.1000    5.6522
##     20       83.9201             nan     0.1000    1.3256
##     40       78.7074             nan     0.1000   -0.4920
##     60       78.3611             nan     0.1000   -3.7346
##     80       78.2436             nan     0.1000   -2.3409
##    100       77.7391             nan     0.1000   -1.9605
##    120       77.3268             nan     0.1000   -0.3281
##    140       77.1447             nan     0.1000   -0.2699
##    150       77.1163             nan     0.1000   -1.1896
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.2442             nan     0.1000   19.3445
##      2      190.4127             nan     0.1000   23.6205
##      3      176.8301             nan     0.1000   20.8690
##      4      163.0865             nan     0.1000    8.5962
##      5      152.4498             nan     0.1000    8.1949
##      6      143.6855             nan     0.1000    9.1649
##      7      137.4261             nan     0.1000    9.8096
##      8      132.1782             nan     0.1000    7.8439
##      9      123.6280             nan     0.1000   12.7939
##     10      121.6435             nan     0.1000    5.5726
##     20       88.7412             nan     0.1000   -0.3957
##     40       81.6507             nan     0.1000   -0.4401
##     60       80.5804             nan     0.1000   -2.5271
##     80       79.8447             nan     0.1000   -0.4719
##    100       78.5940             nan     0.1000   -0.1489
##    120       78.2102             nan     0.1000   -0.1484
##    140       77.8138             nan     0.1000   -0.4785
##    150       77.8104             nan     0.1000   -2.4800
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      210.5114             nan     0.1000   30.2165
##      2      188.7977             nan     0.1000    7.2387
##      3      171.0808             nan     0.1000   21.7003
##      4      158.3873             nan     0.1000   13.1817
##      5      146.9794             nan     0.1000    7.0575
##      6      134.7131             nan     0.1000   10.3757
##      7      125.3261             nan     0.1000   10.5186
##      8      118.1640             nan     0.1000    9.0122
##      9      111.5489             nan     0.1000   -1.0441
##     10      106.5506             nan     0.1000    6.2340
##     20       84.8821             nan     0.1000    0.8883
##     40       79.7105             nan     0.1000   -0.9224
##     60       79.2296             nan     0.1000   -0.5061
##     80       77.9797             nan     0.1000   -0.0887
##    100       77.6495             nan     0.1000   -1.0599
##    120       77.6102             nan     0.1000   -0.5782
##    140       77.5031             nan     0.1000   -0.0283
##    150       77.5043             nan     0.1000   -1.0162
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      159.5337             nan     0.1000    5.7656
##      2      153.2967             nan     0.1000    9.7525
##      3      144.2118             nan     0.1000   -1.1418
##      4      137.7741             nan     0.1000    1.6755
##      5      131.9217             nan     0.1000   -2.0354
##      6      128.5896             nan     0.1000    2.6399
##      7      126.7435             nan     0.1000    2.1580
##      8      125.8585             nan     0.1000    1.7164
##      9      123.0691             nan     0.1000    1.5725
##     10      121.4059             nan     0.1000    1.3540
##     20      110.5149             nan     0.1000    0.6665
##     40      108.8568             nan     0.1000   -2.0391
##     60      108.2092             nan     0.1000   -1.1527
##     80      107.5957             nan     0.1000   -2.2266
##    100      107.0141             nan     0.1000   -1.7943
##    120      106.9357             nan     0.1000    0.1079
##    140      106.6138             nan     0.1000   -0.4316
##    150      106.4438             nan     0.1000   -0.6053
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      162.6502             nan     0.1000   15.7873
##      2      154.5505             nan     0.1000   12.0885
##      3      148.0174             nan     0.1000    7.2627
##      4      144.2955             nan     0.1000    7.7395
##      5      136.8632             nan     0.1000   -0.1193
##      6      131.5914             nan     0.1000    2.1564
##      7      128.4019             nan     0.1000   -0.8899
##      8      124.9239             nan     0.1000    1.7519
##      9      121.7608             nan     0.1000   -1.4029
##     10      120.1290             nan     0.1000    0.9342
##     20      111.6527             nan     0.1000   -1.0005
##     40      110.3239             nan     0.1000   -0.5296
##     60      108.3765             nan     0.1000   -0.4604
##     80      108.3929             nan     0.1000   -0.5125
##    100      108.2657             nan     0.1000   -1.2954
##    120      107.8591             nan     0.1000   -1.7898
##    140      107.5612             nan     0.1000   -0.4549
##    150      107.2811             nan     0.1000   -0.9939
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      160.4837             nan     0.1000    9.7039
##      2      151.4277             nan     0.1000    7.2171
##      3      145.5963             nan     0.1000    3.2874
##      4      139.8072             nan     0.1000    6.4472
##      5      135.6754             nan     0.1000    6.2995
##      6      131.1197             nan     0.1000    2.4030
##      7      127.6011             nan     0.1000    1.8137
##      8      124.7844             nan     0.1000    1.4045
##      9      122.5363             nan     0.1000    1.0734
##     10      121.6823             nan     0.1000   -2.7048
##     20      111.4466             nan     0.1000    0.3555
##     40      109.6852             nan     0.1000   -1.0720
##     60      108.9621             nan     0.1000   -0.3354
##     80      108.6172             nan     0.1000   -0.7822
##    100      108.9979             nan     0.1000   -0.5503
##    120      107.9484             nan     0.1000   -2.8541
##    140      107.5743             nan     0.1000   -1.1745
##    150      107.5461             nan     0.1000   -3.0138
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      127.4344             nan     0.1000   16.5776
##      2      115.9713             nan     0.1000    7.5411
##      3      114.1066             nan     0.1000    1.2436
##      4      107.2470             nan     0.1000   11.0860
##      5      106.0935             nan     0.1000    1.4377
##      6       98.1916             nan     0.1000   -2.2864
##      7       97.2775             nan     0.1000    1.4091
##      8       92.0190             nan     0.1000    1.0515
##      9       88.5239             nan     0.1000    3.4923
##     10       86.5475             nan     0.1000    1.6719
##     20       72.8759             nan     0.1000   -2.2866
##     40       58.0985             nan     0.1000   -0.2223
##     60       48.5611             nan     0.1000   -1.3470
##     80       42.3119             nan     0.1000   -0.0796
##    100       39.4692             nan     0.1000    0.0378
##    120       37.5855             nan     0.1000   -0.0781
##    140       36.3378             nan     0.1000   -0.3849
##    150       35.9804             nan     0.1000   -0.0700
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      125.4652             nan     0.1000   10.1920
##      2      116.0635             nan     0.1000   11.4362
##      3      108.4460             nan     0.1000   11.4400
##      4      107.2710             nan     0.1000    3.4243
##      5      100.2848             nan     0.1000    5.9244
##      6       95.3170             nan     0.1000    6.1535
##      7       90.0330             nan     0.1000   -0.4986
##      8       87.3140             nan     0.1000    4.1689
##      9       84.9359             nan     0.1000    3.7577
##     10       82.0187             nan     0.1000    1.2179
##     20       70.5952             nan     0.1000    1.6663
##     40       55.4970             nan     0.1000   -0.0544
##     60       47.7865             nan     0.1000    0.4507
##     80       41.8709             nan     0.1000   -1.2649
##    100       38.6927             nan     0.1000   -0.6734
##    120       36.9634             nan     0.1000   -0.7502
##    140       35.8653             nan     0.1000   -0.2250
##    150       35.6059             nan     0.1000   -0.0958
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      128.2184             nan     0.1000   10.7058
##      2      115.4825             nan     0.1000    2.8956
##      3      110.4821             nan     0.1000    5.0867
##      4      105.1705             nan     0.1000   -3.2838
##      5       99.6644             nan     0.1000    5.0391
##      6       99.0117             nan     0.1000    1.9998
##      7       95.5518             nan     0.1000    6.3816
##      8       91.1066             nan     0.1000    2.9794
##      9       88.3039             nan     0.1000    5.2971
##     10       84.9536             nan     0.1000    1.2114
##     20       72.2945             nan     0.1000   -6.3458
##     40       57.4579             nan     0.1000    0.7918
##     60       47.7900             nan     0.1000   -0.7989
##     80       43.1148             nan     0.1000   -0.2063
##    100       40.1254             nan     0.1000   -0.1569
##    120       38.3029             nan     0.1000   -0.0494
##    140       37.5142             nan     0.1000   -0.1295
##    150       37.1110             nan     0.1000   -0.5413
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      112.4535             nan     0.1000   18.2195
##      2       99.6073             nan     0.1000    5.9751
##      3       89.4068             nan     0.1000    5.1604
##      4       89.4729             nan     0.1000   -1.1079
##      5       82.1713             nan     0.1000    7.4505
##      6       76.9878             nan     0.1000    7.9438
##      7       71.2511             nan     0.1000    2.2162
##      8       67.6051             nan     0.1000    3.5949
##      9       64.9050             nan     0.1000    3.0321
##     10       61.9900             nan     0.1000    1.0694
##     20       49.9993             nan     0.1000   -2.0463
##     40       41.2113             nan     0.1000   -0.2663
##     60       34.9485             nan     0.1000   -0.1012
##     80       31.5088             nan     0.1000    0.2786
##    100       29.9013             nan     0.1000   -0.1988
##    120       28.9720             nan     0.1000   -0.3996
##    140       28.7059             nan     0.1000   -0.8760
##    150       28.6522             nan     0.1000   -2.2855
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      111.7334             nan     0.1000   16.1160
##      2       99.6130             nan     0.1000    9.2878
##      3       90.4859             nan     0.1000    9.5913
##      4       84.7461             nan     0.1000    7.0844
##      5       79.2416             nan     0.1000    8.2969
##      6       74.1915             nan     0.1000    5.7855
##      7       70.6908             nan     0.1000    6.4736
##      8       67.6917             nan     0.1000    5.3630
##      9       64.3677             nan     0.1000    2.4670
##     10       61.8183             nan     0.1000    2.5007
##     20       50.8989             nan     0.1000    0.4789
##     40       43.1818             nan     0.1000   -0.2044
##     60       37.5199             nan     0.1000   -1.8480
##     80       33.5450             nan     0.1000   -0.0679
##    100       31.7402             nan     0.1000   -0.3625
##    120       30.2188             nan     0.1000   -0.2828
##    140       29.7041             nan     0.1000   -0.1296
##    150       29.5994             nan     0.1000   -0.0459
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      110.9209             nan     0.1000   11.3533
##      2       99.9220             nan     0.1000   12.1524
##      3       90.7880             nan     0.1000    9.8791
##      4       83.1009             nan     0.1000    6.8689
##      5       78.5346             nan     0.1000    4.1793
##      6       73.0253             nan     0.1000    3.9135
##      7       73.0268             nan     0.1000   -1.3980
##      8       69.4615             nan     0.1000    3.9182
##      9       65.5792             nan     0.1000    2.7504
##     10       65.4666             nan     0.1000   -0.8107
##     20       50.8468             nan     0.1000   -0.5488
##     40       43.8678             nan     0.1000   -1.6811
##     60       37.3319             nan     0.1000   -0.1514
##     80       35.0192             nan     0.1000   -0.0096
##    100       32.6028             nan     0.1000   -0.5578
##    120       30.6706             nan     0.1000   -0.5699
##    140       29.7202             nan     0.1000   -0.1217
##    150       29.4555             nan     0.1000    0.0133
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      139.5426             nan     0.1000    7.3176
##      2      134.1202             nan     0.1000    8.3797
##      3      130.1912             nan     0.1000    7.6045
##      4      125.3150             nan     0.1000    3.3465
##      5      122.2778             nan     0.1000    5.1019
##      6      119.1428             nan     0.1000    2.6505
##      7      116.1423             nan     0.1000   -1.7841
##      8      114.1063             nan     0.1000    1.4708
##      9      112.1419             nan     0.1000   -1.9245
##     10      110.4583             nan     0.1000   -2.0245
##     20      106.0410             nan     0.1000   -0.0199
##     40      102.6726             nan     0.1000   -0.7336
##     60      102.5011             nan     0.1000   -4.7822
##     80      100.2131             nan     0.1000   -0.5178
##    100      100.0157             nan     0.1000   -0.0746
##    120       97.1714             nan     0.1000   -0.0866
##    140       94.9528             nan     0.1000   -2.8695
##    150       93.9492             nan     0.1000   -1.9967
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      138.8017             nan     0.1000    8.1916
##      2      132.9507             nan     0.1000    7.8990
##      3      129.4796             nan     0.1000    6.7958
##      4      124.2451             nan     0.1000   -0.7083
##      5      121.5572             nan     0.1000    5.3750
##      6      118.4228             nan     0.1000    2.4534
##      7      115.6250             nan     0.1000    0.6975
##      8      114.9324             nan     0.1000   -0.2252
##      9      113.4917             nan     0.1000    2.4976
##     10      112.4667             nan     0.1000    0.6081
##     20      107.8380             nan     0.1000   -0.2478
##     40      105.6777             nan     0.1000   -1.4118
##     60      104.4296             nan     0.1000   -1.2685
##     80      103.3139             nan     0.1000   -4.4288
##    100      102.1431             nan     0.1000   -4.4093
##    120       99.4391             nan     0.1000   -0.3067
##    140       98.2340             nan     0.1000   -1.6386
##    150       97.2788             nan     0.1000   -1.0450
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      137.7571             nan     0.1000    4.3114
##      2      133.5453             nan     0.1000   -1.0829
##      3      126.3251             nan     0.1000   -7.1561
##      4      124.6022             nan     0.1000    1.4869
##      5      121.2214             nan     0.1000    4.4175
##      6      116.9308             nan     0.1000   -7.5184
##      7      114.8475             nan     0.1000    2.4252
##      8      114.3737             nan     0.1000   -0.5552
##      9      113.1001             nan     0.1000    0.8445
##     10      110.6227             nan     0.1000   -7.2928
##     20      105.9837             nan     0.1000    0.0199
##     40      103.8007             nan     0.1000    0.5249
##     60      103.8245             nan     0.1000   -6.4028
##     80      103.5709             nan     0.1000   -3.2129
##    100      102.0083             nan     0.1000   -0.2293
##    120      100.9608             nan     0.1000   -0.5588
##    140       99.7515             nan     0.1000   -2.1329
##    150       98.6590             nan     0.1000    0.2940
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      200.2312             nan     0.1000   13.0153
##      2      187.9823             nan     0.1000   11.5773
##      3      176.0359             nan     0.1000   -0.0241
##      4      164.8503             nan     0.1000   11.7746
##      5      155.0869             nan     0.1000    8.8748
##      6      147.4796             nan     0.1000    6.7821
##      7      140.4119             nan     0.1000   -2.0887
##      8      134.6115             nan     0.1000    0.9248
##      9      129.8080             nan     0.1000   -0.3980
##     10      127.2311             nan     0.1000    3.6405
##     20      115.6702             nan     0.1000   -0.8020
##     40      111.2386             nan     0.1000  -12.3571
##     60      110.9599             nan     0.1000   -2.4673
##     80      109.7530             nan     0.1000    0.3755
##    100      108.0523             nan     0.1000   -0.6016
##    120      107.1257             nan     0.1000   -0.7280
##    140      106.8106             nan     0.1000   -0.7954
##    150      106.6616             nan     0.1000   -1.1692
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.6744             nan     0.1000   14.9843
##      2      189.0150             nan     0.1000   14.3639
##      3      178.4732             nan     0.1000    7.8884
##      4      165.7217             nan     0.1000   10.0570
##      5      153.3375             nan     0.1000   -0.8160
##      6      146.6552             nan     0.1000    9.7795
##      7      142.0285             nan     0.1000    3.5372
##      8      138.5123             nan     0.1000    2.0295
##      9      132.2910             nan     0.1000   -0.4329
##     10      127.8642             nan     0.1000    2.1451
##     20      111.6786             nan     0.1000   -2.5819
##     40      107.4667             nan     0.1000   -1.0899
##     60      105.9038             nan     0.1000   -1.3594
##     80      104.7044             nan     0.1000   -0.0302
##    100      103.9080             nan     0.1000   -0.7189
##    120      103.1502             nan     0.1000   -1.6229
##    140      102.8887             nan     0.1000   -1.0289
##    150      102.7515             nan     0.1000   -1.9517
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      199.7655             nan     0.1000    7.3796
##      2      187.9747             nan     0.1000   11.1248
##      3      180.4789             nan     0.1000   14.7360
##      4      168.5291             nan     0.1000   12.4811
##      5      158.2488             nan     0.1000    8.8713
##      6      148.3161             nan     0.1000   -0.7859
##      7      141.6430             nan     0.1000    3.8546
##      8      137.4216             nan     0.1000    3.0220
##      9      134.3124             nan     0.1000    5.5971
##     10      131.8598             nan     0.1000    6.1925
##     20      115.9968             nan     0.1000   -0.4007
##     40      110.6704             nan     0.1000   -0.1973
##     60      109.5827             nan     0.1000   -2.0437
##     80      108.1030             nan     0.1000   -1.0940
##    100      106.4846             nan     0.1000   -1.4650
##    120      105.0835             nan     0.1000   -1.3709
##    140      104.6657             nan     0.1000   -1.1466
##    150      104.3116             nan     0.1000   -0.8919
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      248.1067             nan     0.1000   13.2743
##      2      230.1842             nan     0.1000   15.4556
##      3      214.1244             nan     0.1000   11.1822
##      4      202.2375             nan     0.1000   11.5919
##      5      190.7369             nan     0.1000    5.4619
##      6      183.3287             nan     0.1000    8.9864
##      7      177.4020             nan     0.1000    9.4728
##      8      168.4131             nan     0.1000   -8.6079
##      9      163.4881             nan     0.1000    2.8583
##     10      149.1763             nan     0.1000   10.2551
##     20      127.2453             nan     0.1000    5.1807
##     40      106.5576             nan     0.1000   -0.1393
##     60      103.9480             nan     0.1000   -0.3319
##     80      103.2186             nan     0.1000   -0.1060
##    100      103.1658             nan     0.1000   -4.6439
##    120       99.2952             nan     0.1000   -0.1174
##    140       90.7490             nan     0.1000   -0.3515
##    150       90.8709             nan     0.1000   -0.2346
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      251.6249             nan     0.1000   24.4115
##      2      220.2217             nan     0.1000   14.4219
##      3      206.1049             nan     0.1000   14.0363
##      4      193.0682             nan     0.1000    5.4038
##      5      186.2016             nan     0.1000   14.0668
##      6      174.5696             nan     0.1000    8.5626
##      7      168.1353             nan     0.1000    3.9691
##      8      163.4643             nan     0.1000    5.8797
##      9      159.4183             nan     0.1000    4.0125
##     10      155.9456             nan     0.1000    1.0192
##     20      134.8369             nan     0.1000   -0.4733
##     40      124.1104             nan     0.1000   -0.7995
##     60      122.2296             nan     0.1000   -0.6521
##     80      115.7284             nan     0.1000   -0.1570
##    100      108.4180             nan     0.1000   -0.4633
##    120       95.5702             nan     0.1000   -0.3161
##    140       92.8169             nan     0.1000   -0.1494
##    150       92.6441             nan     0.1000   -2.5171
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      253.9531             nan     0.1000   26.7360
##      2      229.2853             nan     0.1000   -2.0112
##      3      216.6773             nan     0.1000   15.0850
##      4      201.2513             nan     0.1000    3.7513
##      5      192.6705             nan     0.1000   11.8582
##      6      183.6865             nan     0.1000    4.2902
##      7      178.0934             nan     0.1000    8.3188
##      8      170.5014             nan     0.1000   -8.4124
##      9      165.5895             nan     0.1000   -2.1488
##     10      151.6336             nan     0.1000    8.3898
##     20      135.9047             nan     0.1000   -0.8942
##     40      127.3372             nan     0.1000   -0.2081
##     60      127.0526             nan     0.1000   -0.9596
##     80      115.8816             nan     0.1000   -0.6050
##    100      107.2409             nan     0.1000   -0.3740
##    120       97.0471             nan     0.1000   -1.4458
##    140       90.2893             nan     0.1000    0.6018
##    150       88.3422             nan     0.1000   -0.1620
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      157.0613             nan     0.1000    2.4551
##      2      148.0572             nan     0.1000   12.5257
##      3      138.3643             nan     0.1000    3.3730
##      4      132.7685             nan     0.1000    6.6207
##      5      126.6375             nan     0.1000    2.1223
##      6      124.2396             nan     0.1000    4.1319
##      7      121.6238             nan     0.1000    4.7673
##      8      118.3672             nan     0.1000    1.3212
##      9      114.6229             nan     0.1000   -3.6552
##     10      113.0308             nan     0.1000    2.5605
##     20      106.6325             nan     0.1000   -1.8252
##     40      105.0503             nan     0.1000   -4.2753
##     60      104.4198             nan     0.1000   -0.9500
##     80      104.2067             nan     0.1000   -0.7889
##    100      104.0871             nan     0.1000   -0.1222
##    120      104.1127             nan     0.1000   -2.8820
##    140      104.0944             nan     0.1000   -0.5851
##    150      104.0343             nan     0.1000   -1.6830
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      154.3061             nan     0.1000   15.3968
##      2      147.3685             nan     0.1000   12.2717
##      3      140.3842             nan     0.1000    9.4162
##      4      133.4221             nan     0.1000    4.6642
##      5      129.2280             nan     0.1000   -2.1715
##      6      124.3956             nan     0.1000    3.8708
##      7      119.2584             nan     0.1000   -3.4190
##      8      115.7603             nan     0.1000   -0.0389
##      9      113.0666             nan     0.1000   -0.7077
##     10      111.4448             nan     0.1000   -2.4997
##     20      105.6283             nan     0.1000   -2.0030
##     40      104.8516             nan     0.1000   -0.9521
##     60      104.4558             nan     0.1000   -2.3991
##     80      104.3851             nan     0.1000   -2.7162
##    100      104.1580             nan     0.1000   -1.5050
##    120      104.0482             nan     0.1000   -0.9951
##    140      104.0622             nan     0.1000   -1.8039
##    150      104.1649             nan     0.1000   -2.0452
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      150.6710             nan     0.1000    3.9601
##      2      142.8172             nan     0.1000   11.4071
##      3      135.8560             nan     0.1000    8.1455
##      4      129.6031             nan     0.1000    3.3292
##      5      125.2516             nan     0.1000    5.6959
##      6      120.7048             nan     0.1000   -0.0029
##      7      116.0050             nan     0.1000   -7.8752
##      8      114.5783             nan     0.1000    0.8821
##      9      112.0341             nan     0.1000   -0.8513
##     10      111.3028             nan     0.1000    1.2979
##     20      105.3574             nan     0.1000   -0.3869
##     40      104.4603             nan     0.1000   -0.4019
##     60      104.3580             nan     0.1000   -1.2231
##     80      104.2563             nan     0.1000   -2.1400
##    100      104.2077             nan     0.1000   -1.2199
##    120      104.2961             nan     0.1000   -0.8587
##    140      104.2144             nan     0.1000   -1.1622
##    150      104.0595             nan     0.1000   -3.2264
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      163.8785             nan     0.1000    6.4027
##      2      152.7172             nan     0.1000    6.0890
##      3      147.7552             nan     0.1000    6.3469
##      4      141.2166             nan     0.1000    4.0692
##      5      135.7155             nan     0.1000    5.4148
##      6      130.2382             nan     0.1000    4.6003
##      7      125.7294             nan     0.1000    0.3279
##      8      121.5559             nan     0.1000    1.3876
##      9      120.5580             nan     0.1000    1.7393
##     10      118.4930             nan     0.1000    0.9901
##     20      109.2659             nan     0.1000    0.7771
##     40      103.8702             nan     0.1000   -0.4481
##     60      101.0097             nan     0.1000   -5.7880
##     80       99.6879             nan     0.1000   -0.5615
##    100       99.0246             nan     0.1000   -0.6840
##    120       98.5309             nan     0.1000   -2.3916
##    140       97.5899             nan     0.1000   -3.4461
##    150       97.4401             nan     0.1000   -2.7366
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      166.0307             nan     0.1000   14.3963
##      2      158.4780             nan     0.1000    6.1189
##      3      153.6965             nan     0.1000   -1.1150
##      4      144.9127             nan     0.1000    5.9128
##      5      138.2932             nan     0.1000    6.8101
##      6      133.6532             nan     0.1000    3.7363
##      7      129.5811             nan     0.1000    6.6959
##      8      126.5899             nan     0.1000    3.9325
##      9      124.8665             nan     0.1000    0.8568
##     10      122.5643             nan     0.1000    5.0627
##     20      111.4546             nan     0.1000   -2.7171
##     40      105.7882             nan     0.1000   -1.1879
##     60      102.7246             nan     0.1000   -0.0025
##     80      100.4532             nan     0.1000   -3.3110
##    100       99.5528             nan     0.1000   -0.0898
##    120       98.1015             nan     0.1000   -1.2612
##    140       97.2963             nan     0.1000   -1.4471
##    150       97.2669             nan     0.1000   -2.4277
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      165.3902             nan     0.1000   16.5665
##      2      156.7736             nan     0.1000    9.8562
##      3      147.9559             nan     0.1000    7.4310
##      4      141.5881             nan     0.1000    7.4933
##      5      134.8303             nan     0.1000    3.6331
##      6      129.1053             nan     0.1000    2.0179
##      7      125.8894             nan     0.1000    4.0434
##      8      121.6277             nan     0.1000   -0.1665
##      9      118.3930             nan     0.1000   -0.6241
##     10      115.8731             nan     0.1000   -0.8520
##     20      106.8462             nan     0.1000   -0.1335
##     40      104.2978             nan     0.1000    0.2433
##     60      102.1073             nan     0.1000   -4.9007
##     80      100.9075             nan     0.1000   -1.2864
##    100       99.4233             nan     0.1000   -0.7963
##    120       98.0012             nan     0.1000   -1.3552
##    140       97.0353             nan     0.1000   -1.0073
##    150       96.9985             nan     0.1000   -1.0308
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      352.0503             nan     0.1000   20.0411
##      2      327.5390             nan     0.1000   20.4595
##      3      308.2707             nan     0.1000   20.3253
##      4      287.8732             nan     0.1000   11.6553
##      5      275.2462             nan     0.1000   17.1045
##      6      259.9740             nan     0.1000    2.2984
##      7      246.0392             nan     0.1000   -2.5993
##      8      240.4273             nan     0.1000   13.2925
##      9      230.3301             nan     0.1000   -7.5793
##     10      225.2751             nan     0.1000   -0.5029
##     20      195.3346             nan     0.1000    5.5814
##     40      163.3065             nan     0.1000   -1.0645
##     60      145.9634             nan     0.1000    1.4880
##     80      137.1002             nan     0.1000   -7.6508
##    100      132.2754             nan     0.1000   -2.0426
##    120      129.3207             nan     0.1000   -0.7001
##    140      128.2657             nan     0.1000   -0.8022
##    150      127.8018             nan     0.1000   -3.5022
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      355.9625             nan     0.1000   41.8646
##      2      325.4577             nan     0.1000   16.8767
##      3      306.4482             nan     0.1000   32.9044
##      4      288.0429             nan     0.1000   13.2015
##      5      273.1392             nan     0.1000   15.1358
##      6      260.2787             nan     0.1000   14.3363
##      7      247.6733             nan     0.1000    1.7388
##      8      240.1431             nan     0.1000   10.1067
##      9      232.8998             nan     0.1000    0.9208
##     10      227.1609             nan     0.1000    4.7568
##     20      196.3053             nan     0.1000    2.8141
##     40      163.8376             nan     0.1000    0.1324
##     60      149.1427             nan     0.1000   -0.9882
##     80      139.0191             nan     0.1000    0.5003
##    100      132.8458             nan     0.1000   -1.7526
##    120      130.8965             nan     0.1000   -4.3783
##    140      129.5199             nan     0.1000    0.0577
##    150      128.9027             nan     0.1000   -0.8158
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      355.5590             nan     0.1000   21.9125
##      2      327.7936             nan     0.1000   28.5638
##      3      299.3857             nan     0.1000    0.7489
##      4      281.1297             nan     0.1000   16.7627
##      5      268.6293             nan     0.1000   11.2103
##      6      256.1433             nan     0.1000   -3.1197
##      7      252.9298             nan     0.1000    1.0528
##      8      244.8085             nan     0.1000   -1.4869
##      9      243.3091             nan     0.1000   -4.7504
##     10      237.2246             nan     0.1000    3.9272
##     20      202.1786             nan     0.1000    2.5446
##     40      167.9503             nan     0.1000   -1.5429
##     60      146.7648             nan     0.1000    0.3277
##     80      138.6415             nan     0.1000   -3.2970
##    100      132.7053             nan     0.1000   -1.4741
##    120      129.5332             nan     0.1000   -1.2691
##    140      127.7751             nan     0.1000   -4.8774
##    150      127.8912             nan     0.1000   -1.6778
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      169.6266             nan     0.1000   13.2831
##      2      157.9511             nan     0.1000   18.6760
##      3      147.2579             nan     0.1000   12.5958
##      4      137.8307             nan     0.1000    4.0617
##      5      132.4359             nan     0.1000   12.1580
##      6      125.3654             nan     0.1000    6.4250
##      7      120.4265             nan     0.1000    6.8550
##      8      115.1176             nan     0.1000    2.7517
##      9      110.5951             nan     0.1000    0.9410
##     10      107.9514             nan     0.1000    2.9850
##     20       95.1649             nan     0.1000   -0.4266
##     40       92.2114             nan     0.1000   -1.6221
##     60       91.6526             nan     0.1000   -1.1510
##     80       91.2267             nan     0.1000   -0.1051
##    100       91.0751             nan     0.1000   -1.7077
##    120       90.9445             nan     0.1000   -1.7529
##    140       90.9140             nan     0.1000   -0.0311
##    150       90.9436             nan     0.1000   -2.5114
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      172.7930             nan     0.1000   21.8448
##      2      156.7104             nan     0.1000    7.4707
##      3      146.3980             nan     0.1000   11.8293
##      4      139.9567             nan     0.1000   11.8247
##      5      130.7630             nan     0.1000   -0.0513
##      6      124.5281             nan     0.1000    8.6768
##      7      119.8167             nan     0.1000    8.4282
##      8      115.2271             nan     0.1000    4.9421
##      9      112.1195             nan     0.1000    4.7218
##     10      109.5683             nan     0.1000    1.9160
##     20       93.6026             nan     0.1000    0.3523
##     40       90.8833             nan     0.1000   -4.7838
##     60       90.8603             nan     0.1000   -1.5453
##     80       90.7082             nan     0.1000   -2.5378
##    100       90.6980             nan     0.1000   -0.3541
##    120       90.6918             nan     0.1000   -0.8359
##    140       90.6633             nan     0.1000   -1.3506
##    150       90.6688             nan     0.1000   -3.7315
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      169.4729             nan     0.1000   14.7311
##      2      157.1028             nan     0.1000   17.7523
##      3      147.3381             nan     0.1000   14.9594
##      4      137.8935             nan     0.1000    4.5787
##      5      130.3411             nan     0.1000    6.3419
##      6      126.8933             nan     0.1000    9.7492
##      7      121.9826             nan     0.1000    3.3689
##      8      116.9685             nan     0.1000    1.6988
##      9      114.5566             nan     0.1000    3.6966
##     10      110.1098             nan     0.1000   -2.2737
##     20       96.9330             nan     0.1000   -1.3624
##     40       94.4023             nan     0.1000   -4.0397
##     60       92.5594             nan     0.1000   -4.9599
##     80       91.9571             nan     0.1000   -1.6058
##    100       91.1656             nan     0.1000   -1.9353
##    120       91.1951             nan     0.1000   -0.3694
##    140       91.0914             nan     0.1000   -3.6445
##    150       91.0496             nan     0.1000   -0.7978
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      148.1620             nan     0.1000    4.3996
##      2      141.0485             nan     0.1000    6.4057
##      3      134.3071             nan     0.1000    5.9171
##      4      128.8935             nan     0.1000    6.8378
##      5      123.6946             nan     0.1000    3.6112
##      6      120.6716             nan     0.1000    5.8011
##      7      116.5592             nan     0.1000   -0.4015
##      8      113.7865             nan     0.1000    1.4170
##      9      110.7445             nan     0.1000    1.8146
##     10      109.1644             nan     0.1000    1.3157
##     20      101.6664             nan     0.1000    0.3724
##     40       99.2260             nan     0.1000   -1.4967
##     60       98.4837             nan     0.1000   -1.2084
##     80       97.6874             nan     0.1000   -1.9349
##    100       96.7931             nan     0.1000   -0.0038
##    120       96.5739             nan     0.1000   -4.9252
##    140       96.0745             nan     0.1000   -0.0829
##    150       95.9687             nan     0.1000   -1.7877
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      149.2818             nan     0.1000    8.2754
##      2      142.3743             nan     0.1000   12.7412
##      3      136.8707             nan     0.1000    5.3149
##      4      129.8970             nan     0.1000    0.8913
##      5      126.7086             nan     0.1000    1.2845
##      6      123.9510             nan     0.1000    6.7240
##      7      121.1715             nan     0.1000    1.8480
##      8      117.8147             nan     0.1000    2.3609
##      9      114.5664             nan     0.1000    1.9646
##     10      110.4484             nan     0.1000  -10.1894
##     20      101.5561             nan     0.1000   -1.3334
##     40       99.4781             nan     0.1000   -1.1262
##     60       98.4419             nan     0.1000    0.1229
##     80       96.2054             nan     0.1000   -1.1058
##    100       95.3833             nan     0.1000   -0.4369
##    120       94.8901             nan     0.1000   -0.3578
##    140       94.0212             nan     0.1000   -0.3972
##    150       93.9535             nan     0.1000   -1.3172
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      150.6247             nan     0.1000   13.8050
##      2      141.6195             nan     0.1000    0.1784
##      3      134.5501             nan     0.1000    7.8409
##      4      128.3343             nan     0.1000    5.7516
##      5      126.6209             nan     0.1000    4.4576
##      6      123.7726             nan     0.1000    1.5784
##      7      122.2125             nan     0.1000    3.5367
##      8      120.5892             nan     0.1000    2.7780
##      9      117.2298             nan     0.1000    3.8959
##     10      116.3907             nan     0.1000    0.9699
##     20      104.1241             nan     0.1000    0.2496
##     40      100.5951             nan     0.1000   -0.9830
##     60       99.0755             nan     0.1000   -1.8135
##     80       97.4927             nan     0.1000   -0.5742
##    100       96.7120             nan     0.1000   -0.8144
##    120       95.8009             nan     0.1000   -0.3380
##    140       94.5233             nan     0.1000   -0.2417
##    150       94.3429             nan     0.1000   -3.1749
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.2339             nan     0.1000   29.2836
##      2      220.8963             nan     0.1000   26.6191
##      3      197.4446             nan     0.1000   12.8536
##      4      175.5708             nan     0.1000   14.2018
##      5      160.0958             nan     0.1000    6.7539
##      6      148.5000             nan     0.1000   17.6530
##      7      140.0643             nan     0.1000   12.1943
##      8      130.8896             nan     0.1000   11.9874
##      9      123.4710             nan     0.1000    2.6147
##     10      117.1032             nan     0.1000   -0.3811
##     20       93.7732             nan     0.1000    1.7279
##     40       87.8546             nan     0.1000   -0.1710
##     60       85.8966             nan     0.1000   -1.6493
##     80       84.8042             nan     0.1000   -0.8428
##    100       84.3084             nan     0.1000   -1.5223
##    120       83.7039             nan     0.1000   -1.4478
##    140       83.0711             nan     0.1000   -1.3670
##    150       82.7565             nan     0.1000   -0.8332
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      245.8571             nan     0.1000   35.1806
##      2      222.2654             nan     0.1000   31.4607
##      3      198.8319             nan     0.1000   15.4311
##      4      180.5091             nan     0.1000   12.0711
##      5      163.0145             nan     0.1000   14.7412
##      6      148.6030             nan     0.1000   11.5137
##      7      136.2709             nan     0.1000    7.3987
##      8      128.0853             nan     0.1000    6.7202
##      9      121.6097             nan     0.1000    4.4214
##     10      114.7808             nan     0.1000    4.5046
##     20       89.2023             nan     0.1000   -1.6145
##     40       85.0596             nan     0.1000   -1.0879
##     60       83.8699             nan     0.1000   -0.6974
##     80       83.0359             nan     0.1000   -1.4412
##    100       82.5719             nan     0.1000   -1.0908
##    120       82.6583             nan     0.1000   -0.1275
##    140       81.9406             nan     0.1000   -1.2928
##    150       81.6807             nan     0.1000   -2.2520
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      246.5834             nan     0.1000   14.0632
##      2      222.0331             nan     0.1000   40.5421
##      3      197.4349             nan     0.1000   20.5119
##      4      178.6578             nan     0.1000   21.5995
##      5      165.7350             nan     0.1000   21.2188
##      6      152.2970             nan     0.1000    8.9927
##      7      137.7960             nan     0.1000   -2.4839
##      8      129.9144             nan     0.1000    7.5949
##      9      123.2024             nan     0.1000   10.7242
##     10      117.9727             nan     0.1000    6.2293
##     20       89.1880             nan     0.1000   -0.3376
##     40       85.3534             nan     0.1000   -1.4598
##     60       84.3405             nan     0.1000   -2.1551
##     80       83.5037             nan     0.1000   -0.9455
##    100       82.7139             nan     0.1000   -0.0879
##    120       82.4223             nan     0.1000   -0.3746
##    140       82.0327             nan     0.1000   -1.4463
##    150       81.9296             nan     0.1000   -0.5902
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1       75.0424             nan     0.1000    3.2495
##      2       72.3587             nan     0.1000    3.4713
##      3       70.0377             nan     0.1000    3.3085
##      4       68.6520             nan     0.1000    1.8383
##      5       66.7300             nan     0.1000   -1.2837
##      6       64.4647             nan     0.1000   -3.8414
##      7       63.3320             nan     0.1000    0.8380
##      8       62.3751             nan     0.1000   -0.2830
##      9       61.7200             nan     0.1000   -0.2042
##     10       60.9708             nan     0.1000   -0.6936
##     20       59.0269             nan     0.1000   -0.7404
##     40       58.6909             nan     0.1000   -0.0218
##     60       58.2970             nan     0.1000   -0.4007
##     80       58.1257             nan     0.1000   -1.1146
##    100       58.0272             nan     0.1000   -1.5043
##    120       58.3089             nan     0.1000   -2.0047
##    140       57.9195             nan     0.1000   -1.4788
##    150       57.9717             nan     0.1000   -0.3748
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1       76.3147             nan     0.1000    5.0845
##      2       72.9933             nan     0.1000    3.5603
##      3       70.8929             nan     0.1000    3.8633
##      4       69.1659             nan     0.1000    1.1996
##      5       67.4963             nan     0.1000    2.3120
##      6       65.3824             nan     0.1000   -0.6538
##      7       64.1182             nan     0.1000   -1.0833
##      8       62.9997             nan     0.1000    0.6613
##      9       62.2011             nan     0.1000    0.6585
##     10       61.5967             nan     0.1000    0.7161
##     20       58.9452             nan     0.1000   -0.7125
##     40       58.3695             nan     0.1000   -0.0933
##     60       58.1992             nan     0.1000   -0.0819
##     80       58.0914             nan     0.1000   -1.4486
##    100       58.2152             nan     0.1000   -0.0481
##    120       58.0861             nan     0.1000   -0.4367
##    140       58.0402             nan     0.1000    0.0167
##    150       58.0428             nan     0.1000   -0.0301
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1       74.9146             nan     0.1000    3.0559
##      2       71.1983             nan     0.1000   -0.1722
##      3       68.7440             nan     0.1000    1.7885
##      4       66.9485             nan     0.1000    1.8126
##      5       65.7543             nan     0.1000    2.0675
##      6       64.3915             nan     0.1000    1.2426
##      7       64.1432             nan     0.1000   -2.3731
##      8       63.2205             nan     0.1000    0.4952
##      9       62.0250             nan     0.1000   -1.2275
##     10       61.6712             nan     0.1000    0.2543
##     20       59.2536             nan     0.1000   -2.8511
##     40       58.6318             nan     0.1000   -0.4281
##     60       58.3986             nan     0.1000   -0.1890
##     80       58.3285             nan     0.1000   -3.7026
##    100       58.3305             nan     0.1000   -1.9072
##    120       58.2460             nan     0.1000   -0.0084
##    140       58.2559             nan     0.1000   -0.0795
##    150       58.1247             nan     0.1000   -0.0140
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      191.1107             nan     0.1000    0.1692
##      2      186.0420             nan     0.1000   11.1863
##      3      180.8168             nan     0.1000    5.1814
##      4      177.1648             nan     0.1000    6.7190
##      5      169.5791             nan     0.1000    0.3446
##      6      167.0876             nan     0.1000    5.2273
##      7      162.6105             nan     0.1000    2.4070
##      8      159.8789             nan     0.1000    2.5153
##      9      152.5689             nan     0.1000   -1.9865
##     10      151.4325             nan     0.1000   -2.8819
##     20      134.6603             nan     0.1000   -2.4080
##     40      128.5657             nan     0.1000   -1.7047
##     60      126.0693             nan     0.1000   -2.8378
##     80      123.7167             nan     0.1000   -0.1830
##    100      123.4372             nan     0.1000   -3.0167
##    120      122.2803             nan     0.1000   -1.8477
##    140      122.1981             nan     0.1000   -0.0539
##    150      121.9607             nan     0.1000   -2.7215
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      189.7594             nan     0.1000   12.6232
##      2      182.0300             nan     0.1000   14.5650
##      3      172.3322             nan     0.1000    5.6167
##      4      166.8897             nan     0.1000    5.5955
##      5      161.7163             nan     0.1000    1.6538
##      6      156.3524             nan     0.1000    3.6631
##      7      151.9094             nan     0.1000    3.9257
##      8      147.7626             nan     0.1000    0.6344
##      9      144.3192             nan     0.1000    0.2021
##     10      142.4837             nan     0.1000    3.1800
##     20      135.0605             nan     0.1000   -2.5308
##     40      128.7893             nan     0.1000   -3.0411
##     60      126.7816             nan     0.1000   -4.9521
##     80      126.3742             nan     0.1000   -0.5154
##    100      126.7056             nan     0.1000   -0.9448
##    120      125.4178             nan     0.1000   -0.5456
##    140      124.3277             nan     0.1000   -0.7849
##    150      123.7588             nan     0.1000   -2.0898
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      186.8949             nan     0.1000   -0.3091
##      2      180.2591             nan     0.1000    8.7143
##      3      173.9850             nan     0.1000    6.0259
##      4      169.7771             nan     0.1000    7.0690
##      5      161.0015             nan     0.1000   -2.5669
##      6      155.8457             nan     0.1000    3.7365
##      7      153.8764             nan     0.1000    3.2720
##      8      150.3924             nan     0.1000   -5.1382
##      9      146.0719             nan     0.1000    0.9788
##     10      145.7136             nan     0.1000    1.1233
##     20      134.3103             nan     0.1000   -2.5827
##     40      129.7932             nan     0.1000   -2.1668
##     60      128.7672             nan     0.1000   -1.9576
##     80      128.1959             nan     0.1000   -3.1271
##    100      127.0165             nan     0.1000   -3.4460
##    120      126.9380             nan     0.1000   -3.6858
##    140      126.9316             nan     0.1000   -0.1073
##    150      126.9480             nan     0.1000   -2.5275
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      180.8334             nan     0.1000   22.9484
##      2      170.4786             nan     0.1000   18.8079
##      3      156.3771             nan     0.1000    6.5953
##      4      147.2990             nan     0.1000   11.2682
##      5      141.7099             nan     0.1000   10.4705
##      6      134.9040             nan     0.1000    9.6293
##      7      130.6698             nan     0.1000    8.2344
##      8      120.7971             nan     0.1000    7.2230
##      9      112.2000             nan     0.1000    2.1936
##     10      106.1349             nan     0.1000    3.8398
##     20       84.3968             nan     0.1000   -0.5226
##     40       80.1475             nan     0.1000   -2.6079
##     60       78.6877             nan     0.1000   -0.2321
##     80       78.0521             nan     0.1000   -0.0020
##    100       77.2906             nan     0.1000   -0.1336
##    120       76.8513             nan     0.1000   -0.8947
##    140       76.3652             nan     0.1000   -3.2872
##    150       76.0143             nan     0.1000   -0.2841
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      178.4761             nan     0.1000   11.8086
##      2      160.7915             nan     0.1000   10.6631
##      3      148.0170             nan     0.1000   13.2666
##      4      138.2981             nan     0.1000   11.4421
##      5      129.5331             nan     0.1000    3.8545
##      6      123.8371             nan     0.1000    6.9235
##      7      115.1349             nan     0.1000   -2.0134
##      8      109.5878             nan     0.1000    3.4239
##      9      104.8282             nan     0.1000    4.6839
##     10      100.4972             nan     0.1000    2.6277
##     20       84.1016             nan     0.1000   -1.6919
##     40       79.5135             nan     0.1000   -0.5563
##     60       78.0436             nan     0.1000   -0.1735
##     80       77.2618             nan     0.1000   -0.7500
##    100       76.5020             nan     0.1000   -0.1098
##    120       76.0413             nan     0.1000   -1.8972
##    140       75.6995             nan     0.1000   -0.4848
##    150       75.3246             nan     0.1000   -2.0684
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      180.7565             nan     0.1000   22.0102
##      2      164.5239             nan     0.1000    5.5981
##      3      152.6586             nan     0.1000   17.7045
##      4      141.4093             nan     0.1000    6.3803
##      5      135.0702             nan     0.1000   10.0407
##      6      123.8054             nan     0.1000    3.3125
##      7      116.4515             nan     0.1000    8.3648
##      8      109.6219             nan     0.1000   -2.2933
##      9      102.6282             nan     0.1000   -1.4490
##     10       99.5216             nan     0.1000    3.3504
##     20       81.0256             nan     0.1000    0.6883
##     40       77.8458             nan     0.1000   -4.4198
##     60       76.8023             nan     0.1000   -1.8626
##     80       76.2162             nan     0.1000   -1.1102
##    100       75.8571             nan     0.1000   -1.1474
##    120       75.6373             nan     0.1000   -0.1086
##    140       75.0558             nan     0.1000   -0.2645
##    150       75.0505             nan     0.1000   -1.2760
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      269.6422             nan     0.1000   38.5305
##      2      243.2316             nan     0.1000   29.6288
##      3      221.4293             nan     0.1000   23.3330
##      4      202.6813             nan     0.1000   15.1483
##      5      187.9809             nan     0.1000   10.8368
##      6      176.8175             nan     0.1000   16.1892
##      7      167.5317             nan     0.1000   12.1712
##      8      160.1282             nan     0.1000   10.8312
##      9      150.4274             nan     0.1000    5.8433
##     10      143.5178             nan     0.1000    2.3477
##     20      120.5971             nan     0.1000    0.9776
##     40      113.2605             nan     0.1000   -1.0834
##     60      110.7919             nan     0.1000   -0.2739
##     80      109.1789             nan     0.1000   -0.2814
##    100      108.6713             nan     0.1000   -1.7720
##    120      108.3764             nan     0.1000   -0.4197
##    140      108.4305             nan     0.1000   -3.1849
##    150      108.2030             nan     0.1000   -0.4434
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      265.2637             nan     0.1000   20.8494
##      2      241.0126             nan     0.1000   32.1912
##      3      217.0619             nan     0.1000   13.1250
##      4      198.3806             nan     0.1000   10.5227
##      5      185.7303             nan     0.1000   15.8632
##      6      173.2871             nan     0.1000    7.1123
##      7      164.2787             nan     0.1000    8.2186
##      8      153.6257             nan     0.1000    6.9819
##      9      149.2941             nan     0.1000    9.3975
##     10      145.3265             nan     0.1000    6.8242
##     20      120.3626             nan     0.1000    2.9620
##     40      111.7554             nan     0.1000   -1.2519
##     60      110.0630             nan     0.1000   -0.2070
##     80      108.7571             nan     0.1000   -3.8492
##    100      108.4629             nan     0.1000   -0.3722
##    120      108.6014             nan     0.1000   -2.0907
##    140      108.4282             nan     0.1000   -0.2596
##    150      108.2346             nan     0.1000   -0.2021
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      270.6235             nan     0.1000   42.0805
##      2      243.2925             nan     0.1000   27.8338
##      3      221.1429             nan     0.1000   22.8530
##      4      204.5080             nan     0.1000   22.4785
##      5      186.8617             nan     0.1000    7.7784
##      6      174.2338             nan     0.1000    9.3366
##      7      162.1517             nan     0.1000    4.5745
##      8      153.6201             nan     0.1000    6.9312
##      9      143.9518             nan     0.1000   -8.0569
##     10      137.2104             nan     0.1000   -3.1368
##     20      116.4331             nan     0.1000    0.7947
##     40      111.4463             nan     0.1000   -0.9487
##     60      110.9520             nan     0.1000   -1.1193
##     80      109.5676             nan     0.1000   -0.6511
##    100      109.0336             nan     0.1000   -0.1192
##    120      108.5185             nan     0.1000   -0.2689
##    140      108.2636             nan     0.1000   -1.2791
##    150      108.4720             nan     0.1000   -1.0835
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      184.9234             nan     0.1000   10.4232
##      2      172.9359             nan     0.1000   15.8829
##      3      163.3139             nan     0.1000   14.6698
##      4      155.6635             nan     0.1000   12.1873
##      5      150.3637             nan     0.1000   11.9627
##      6      143.4142             nan     0.1000    4.1165
##      7      137.6714             nan     0.1000    2.9637
##      8      134.6018             nan     0.1000    5.2640
##      9      131.5385             nan     0.1000    1.3602
##     10      127.8413             nan     0.1000   -0.2823
##     20      116.7145             nan     0.1000   -0.7299
##     40      115.5523             nan     0.1000   -0.4469
##     60      115.7478             nan     0.1000   -0.2308
##     80      115.6187             nan     0.1000   -0.1972
##    100      115.5487             nan     0.1000   -0.2609
##    120      115.5503             nan     0.1000   -0.1192
##    140      115.5488             nan     0.1000   -0.1705
##    150      115.5319             nan     0.1000   -0.7606
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      178.8248             nan     0.1000   -0.1490
##      2      166.8828             nan     0.1000    9.9432
##      3      158.3860             nan     0.1000   12.1272
##      4      150.4699             nan     0.1000    5.8359
##      5      146.5778             nan     0.1000    8.8027
##      6      141.5489             nan     0.1000    3.2244
##      7      136.9974             nan     0.1000    0.7835
##      8      134.1739             nan     0.1000    3.1108
##      9      129.1552             nan     0.1000   -4.3419
##     10      127.6281             nan     0.1000    2.8223
##     20      116.9526             nan     0.1000   -0.6289
##     40      116.0058             nan     0.1000   -2.2097
##     60      115.5834             nan     0.1000   -3.6711
##     80      115.7806             nan     0.1000   -4.0799
##    100      115.5586             nan     0.1000   -0.0200
##    120      115.7861             nan     0.1000    0.0445
##    140      115.5313             nan     0.1000   -3.1279
##    150      115.6062             nan     0.1000   -0.5590
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      180.0025             nan     0.1000    5.9736
##      2      166.7579             nan     0.1000    5.8438
##      3      159.1027             nan     0.1000    6.8163
##      4      153.6121             nan     0.1000    9.2896
##      5      146.7738             nan     0.1000    6.1017
##      6      142.1966             nan     0.1000    4.8591
##      7      136.7343             nan     0.1000    2.6509
##      8      133.0494             nan     0.1000    3.7134
##      9      130.1194             nan     0.1000    3.2454
##     10      127.3336             nan     0.1000    1.7864
##     20      117.8817             nan     0.1000   -0.2119
##     40      115.6670             nan     0.1000   -1.5900
##     60      115.6520             nan     0.1000   -1.7673
##     80      115.6363             nan     0.1000   -2.0070
##    100      115.7488             nan     0.1000   -0.1833
##    120      115.6003             nan     0.1000   -0.1254
##    140      115.6061             nan     0.1000   -0.7399
##    150      115.6115             nan     0.1000   -3.8177
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      288.4019             nan     0.1000    8.8050
##      2      265.1565             nan     0.1000   12.3560
##      3      248.0404             nan     0.1000   18.0412
##      4      233.6946             nan     0.1000   12.6523
##      5      220.9863             nan     0.1000    2.3637
##      6      211.2838             nan     0.1000    7.3024
##      7      206.7450             nan     0.1000    9.7471
##      8      199.6983             nan     0.1000    3.7743
##      9      194.9367             nan     0.1000    7.1248
##     10      190.8337             nan     0.1000    6.5685
##     20      171.8201             nan     0.1000    0.8806
##     40      163.6174             nan     0.1000   -0.8831
##     60      160.6739             nan     0.1000   -2.9129
##     80      159.1017             nan     0.1000   -3.8833
##    100      158.3945             nan     0.1000   -3.7017
##    120      157.9784             nan     0.1000   -3.3168
##    140      157.3965             nan     0.1000   -0.7171
##    150      157.2997             nan     0.1000   -0.2297
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      289.5347             nan     0.1000   13.3383
##      2      273.1210             nan     0.1000   32.6226
##      3      253.5619             nan     0.1000   14.2430
##      4      240.9896             nan     0.1000   20.5854
##      5      228.5277             nan     0.1000   11.8724
##      6      215.0812             nan     0.1000   -5.2017
##      7      206.5064             nan     0.1000    6.1269
##      8      197.9374             nan     0.1000   -4.1007
##      9      191.7823             nan     0.1000    1.4095
##     10      188.2228             nan     0.1000    5.2770
##     20      168.3424             nan     0.1000   -0.3953
##     40      165.3536             nan     0.1000   -0.1028
##     60      163.8933             nan     0.1000   -3.6652
##     80      162.8373             nan     0.1000   -0.2029
##    100      161.5716             nan     0.1000   -0.2688
##    120      161.5735             nan     0.1000   -8.1853
##    140      159.5256             nan     0.1000    0.0647
##    150      159.0324             nan     0.1000   -2.4071
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      295.3789             nan     0.1000   34.7040
##      2      278.9853             nan     0.1000   14.6930
##      3      258.6404             nan     0.1000   19.5834
##      4      242.7638             nan     0.1000   17.9691
##      5      228.1139             nan     0.1000    6.7641
##      6      215.3743             nan     0.1000   -0.3451
##      7      203.8446             nan     0.1000  -14.0398
##      8      199.0521             nan     0.1000    8.2077
##      9      194.4897             nan     0.1000    5.0066
##     10      189.6211             nan     0.1000    4.6287
##     20      173.0101             nan     0.1000    0.8586
##     40      163.4659             nan     0.1000    0.4196
##     60      163.3964             nan     0.1000   -0.2163
##     80      162.7716             nan     0.1000   -0.2700
##    100      163.0988             nan     0.1000   -0.5056
##    120      162.2895             nan     0.1000   -1.6794
##    140      161.5974             nan     0.1000   -5.7997
##    150      162.1248             nan     0.1000   -4.9717
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      212.9701             nan     0.1000   13.0526
##      2      194.7654             nan     0.1000   18.6379
##      3      178.4982             nan     0.1000    7.9882
##      4      167.2496             nan     0.1000   13.1449
##      5      157.8222             nan     0.1000    9.9537
##      6      150.6999             nan     0.1000    9.6131
##      7      143.1640             nan     0.1000    1.4174
##      8      140.7118             nan     0.1000    7.2803
##      9      135.4475             nan     0.1000   -1.3904
##     10      131.0893             nan     0.1000   -2.8973
##     20      118.9559             nan     0.1000    0.6646
##     40      116.5179             nan     0.1000   -1.5020
##     60      116.4373             nan     0.1000   -0.1081
##     80      116.0843             nan     0.1000   -0.2178
##    100      116.2253             nan     0.1000   -3.3839
##    120      116.2286             nan     0.1000   -0.0088
##    140      115.7741             nan     0.1000   -0.3756
##    150      115.5397             nan     0.1000   -0.5488
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      210.6569             nan     0.1000    1.7383
##      2      191.2677             nan     0.1000   11.6565
##      3      185.6416             nan     0.1000   10.1534
##      4      176.2891             nan     0.1000   19.8352
##      5      162.9458             nan     0.1000    1.5646
##      6      154.9813             nan     0.1000   11.4266
##      7      148.6598             nan     0.1000    9.2541
##      8      144.0506             nan     0.1000    4.0770
##      9      138.9246             nan     0.1000   -0.3542
##     10      133.9799             nan     0.1000    1.4328
##     20      117.8913             nan     0.1000   -0.4992
##     40      116.1977             nan     0.1000   -3.3711
##     60      116.1957             nan     0.1000   -0.8259
##     80      116.2651             nan     0.1000   -1.8247
##    100      116.4952             nan     0.1000   -1.8460
##    120      116.1929             nan     0.1000    0.0060
##    140      116.1349             nan     0.1000   -3.0602
##    150      116.1846             nan     0.1000   -0.2104
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      214.5314             nan     0.1000   21.3671
##      2      195.9094             nan     0.1000   17.3909
##      3      180.6198             nan     0.1000   11.2153
##      4      169.2105             nan     0.1000    8.5246
##      5      160.7986             nan     0.1000   13.9846
##      6      153.3177             nan     0.1000    9.0381
##      7      146.1681             nan     0.1000    4.7765
##      8      142.5115             nan     0.1000    1.6713
##      9      135.5857             nan     0.1000   -6.2382
##     10      133.4989             nan     0.1000   -0.1875
##     20      118.1588             nan     0.1000   -0.6794
##     40      116.1564             nan     0.1000   -1.8627
##     60      115.9572             nan     0.1000   -3.4127
##     80      115.6862             nan     0.1000   -0.5530
##    100      115.5729             nan     0.1000   -0.6723
##    120      115.2496             nan     0.1000    0.0072
##    140      115.0547             nan     0.1000   -0.4356
##    150      115.1586             nan     0.1000   -0.8845
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      185.3396             nan     0.1000   21.8872
##      2      170.9919             nan     0.1000   17.8372
##      3      160.9266             nan     0.1000   17.6094
##      4      151.2957             nan     0.1000   14.3428
##      5      143.6134             nan     0.1000    8.1799
##      6      136.3346             nan     0.1000    6.7882
##      7      130.1949             nan     0.1000    5.0058
##      8      126.6988             nan     0.1000    7.3367
##      9      122.2869             nan     0.1000    3.1587
##     10      117.9538             nan     0.1000   -1.8531
##     20      103.2902             nan     0.1000    0.2796
##     40      100.5950             nan     0.1000   -0.9224
##     60       99.2917             nan     0.1000   -0.1683
##     80       98.2454             nan     0.1000   -3.8505
##    100       97.0026             nan     0.1000   -1.7051
##    120       96.2803             nan     0.1000   -0.4088
##    140       95.0519             nan     0.1000   -0.2274
##    150       95.2546             nan     0.1000   -0.8217
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      182.3257             nan     0.1000   11.0698
##      2      169.4566             nan     0.1000   19.0978
##      3      155.6907             nan     0.1000    5.8991
##      4      143.8953             nan     0.1000    3.1397
##      5      136.5855             nan     0.1000    9.6139
##      6      128.3508             nan     0.1000   -0.3119
##      7      124.7886             nan     0.1000    5.6746
##      8      122.4220             nan     0.1000    6.9928
##      9      118.5925             nan     0.1000    4.2285
##     10      114.6356             nan     0.1000   -0.2108
##     20      102.9068             nan     0.1000   -1.4577
##     40       98.8171             nan     0.1000   -6.3021
##     60       97.4047             nan     0.1000   -0.9913
##     80       97.1125             nan     0.1000   -0.4225
##    100       97.1294             nan     0.1000   -0.9474
##    120       96.3699             nan     0.1000   -1.8682
##    140       95.3684             nan     0.1000   -5.2983
##    150       95.3291             nan     0.1000   -0.1012
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      183.7889             nan     0.1000   17.3680
##      2      168.2858             nan     0.1000   14.0076
##      3      158.4533             nan     0.1000   17.5551
##      4      146.2548             nan     0.1000    2.7036
##      5      138.5954             nan     0.1000    6.1347
##      6      131.8249             nan     0.1000    3.8050
##      7      126.2516             nan     0.1000    2.8760
##      8      123.0249             nan     0.1000    5.6748
##      9      119.3051             nan     0.1000    2.5045
##     10      116.8874             nan     0.1000    3.6165
##     20      104.1053             nan     0.1000   -0.5540
##     40      101.3548             nan     0.1000   -4.3402
##     60       98.6751             nan     0.1000   -1.3022
##     80       97.3122             nan     0.1000   -1.0074
##    100       96.7556             nan     0.1000    0.0211
##    120       96.9464             nan     0.1000   -3.2467
##    140       96.0708             nan     0.1000    0.0314
##    150       96.0851             nan     0.1000   -0.5356
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      254.8113             nan     0.1000   30.4890
##      2      229.2919             nan     0.1000   11.6433
##      3      211.9220             nan     0.1000   20.4689
##      4      195.7043             nan     0.1000   13.2830
##      5      181.0769             nan     0.1000    5.4538
##      6      172.4777             nan     0.1000   14.4622
##      7      162.2135             nan     0.1000   -4.3087
##      8      154.2375             nan     0.1000    7.4338
##      9      148.3839             nan     0.1000    1.7008
##     10      140.9943             nan     0.1000    5.1447
##     20      118.2166             nan     0.1000    0.9363
##     40      111.1910             nan     0.1000    0.4875
##     60      108.7055             nan     0.1000   -0.0254
##     80      107.4072             nan     0.1000   -0.5119
##    100      106.6387             nan     0.1000   -0.0559
##    120      106.0537             nan     0.1000   -2.2015
##    140      106.1105             nan     0.1000    0.0257
##    150      105.7583             nan     0.1000   -3.5316
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.8444             nan     0.1000   17.8470
##      2      230.9142             nan     0.1000   27.3246
##      3      213.1688             nan     0.1000   27.0263
##      4      193.2571             nan     0.1000    5.0847
##      5      178.7376             nan     0.1000    7.2987
##      6      171.3400             nan     0.1000   15.7675
##      7      160.6059             nan     0.1000    6.2926
##      8      153.0813             nan     0.1000    9.0349
##      9      146.6448             nan     0.1000    4.3931
##     10      142.0867             nan     0.1000    3.3061
##     20      114.3820             nan     0.1000    1.3874
##     40      109.0986             nan     0.1000   -0.1251
##     60      107.8581             nan     0.1000   -0.7574
##     80      107.2862             nan     0.1000   -1.1732
##    100      106.7422             nan     0.1000   -0.6849
##    120      106.1238             nan     0.1000   -4.2459
##    140      105.9391             nan     0.1000   -0.9384
##    150      105.6253             nan     0.1000   -0.1584
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.6022             nan     0.1000   30.7657
##      2      230.8509             nan     0.1000   27.0301
##      3      210.5989             nan     0.1000   16.0171
##      4      195.9760             nan     0.1000   19.2315
##      5      184.4796             nan     0.1000   17.4095
##      6      171.3932             nan     0.1000   10.0287
##      7      162.2357             nan     0.1000   14.1109
##      8      154.4726             nan     0.1000   11.7077
##      9      146.8908             nan     0.1000    5.6339
##     10      140.9276             nan     0.1000    7.1895
##     20      112.3810             nan     0.1000    0.2433
##     40      107.8533             nan     0.1000   -0.9662
##     60      106.8789             nan     0.1000   -1.2895
##     80      106.5954             nan     0.1000   -0.5643
##    100      106.3192             nan     0.1000   -4.1133
##    120      105.8063             nan     0.1000   -0.4718
##    140      105.2063             nan     0.1000   -1.4173
##    150      105.0402             nan     0.1000   -3.6611
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      234.5138             nan     0.1000   17.8301
##      2      215.1972             nan     0.1000   14.4085
##      3      200.1131             nan     0.1000   11.9417
##      4      187.6065             nan     0.1000   12.4437
##      5      176.7066             nan     0.1000    7.4271
##      6      169.8041             nan     0.1000   11.2846
##      7      161.5290             nan     0.1000    0.4888
##      8      156.0779             nan     0.1000    9.1008
##      9      150.0629             nan     0.1000    4.5903
##     10      144.6246             nan     0.1000    1.4219
##     20      125.7028             nan     0.1000   -0.1502
##     40      122.1502             nan     0.1000   -2.0699
##     50      121.4608             nan     0.1000   -1.9860</code></pre>
<pre class="r"><code># See: https://stats.stackexchange.com/questions/229356/gbm-package-vs-caret-using-gbm
# gbm::gbm(births ~ mon, data=df_train, distribution=&#39;gaussian&#39;, bag.fraction = .8)

# I learned that if you force mon to be a factor, it yields a better fit
X = cbind(df_mon$births, df_mon$ym, model.matrix(~0 + as.factor(df_mon$mon)))
X = data.frame(X)
mod_gbm_fact &lt;- caret::train(V1 ~ ., data=X %&gt;% dplyr::filter(V2 &lt;= cutoff) %&gt;% dplyr::select(-V2), 
                    distribution=&#39;gaussian&#39;, 
                    method=&#39;gbm&#39;, 
                    bag.fraction=1)</code></pre>
<pre><code>## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      179.8947             nan     0.1000       nan
##      2      179.8947             nan     0.1000       nan
##      3      179.8947             nan     0.1000       nan
##      4      179.8947             nan     0.1000       nan
##      5      179.8947             nan     0.1000       nan
##      6      179.8947             nan     0.1000       nan
##      7      179.8947             nan     0.1000       nan
##      8      179.8947             nan     0.1000       nan
##      9      179.8947             nan     0.1000       nan
##     10      179.8947             nan     0.1000       nan
##     20      179.8947             nan     0.1000       nan
##     40      179.8947             nan     0.1000       nan
##     60      179.8947             nan     0.1000       nan
##     80      179.8947             nan     0.1000       nan
##    100      179.8947             nan     0.1000       nan
##    120      179.8947             nan     0.1000       nan
##    140      179.8947             nan     0.1000       nan
##    150      179.8947             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      179.8947             nan     0.1000       nan
##      2      179.8947             nan     0.1000       nan
##      3      179.8947             nan     0.1000       nan
##      4      179.8947             nan     0.1000       nan
##      5      179.8947             nan     0.1000       nan
##      6      179.8947             nan     0.1000       nan
##      7      179.8947             nan     0.1000       nan
##      8      179.8947             nan     0.1000       nan
##      9      179.8947             nan     0.1000       nan
##     10      179.8947             nan     0.1000       nan
##     20      179.8947             nan     0.1000       nan
##     40      179.8947             nan     0.1000       nan
##     60      179.8947             nan     0.1000       nan
##     80      179.8947             nan     0.1000       nan
##    100      179.8947             nan     0.1000       nan
##    120      179.8947             nan     0.1000       nan
##    140      179.8947             nan     0.1000       nan
##    150      179.8947             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      179.8947             nan     0.1000       nan
##      2      179.8947             nan     0.1000       nan
##      3      179.8947             nan     0.1000       nan
##      4      179.8947             nan     0.1000       nan
##      5      179.8947             nan     0.1000       nan
##      6      179.8947             nan     0.1000       nan
##      7      179.8947             nan     0.1000       nan
##      8      179.8947             nan     0.1000       nan
##      9      179.8947             nan     0.1000       nan
##     10      179.8947             nan     0.1000       nan
##     20      179.8947             nan     0.1000       nan
##     40      179.8947             nan     0.1000       nan
##     60      179.8947             nan     0.1000       nan
##     80      179.8947             nan     0.1000       nan
##    100      179.8947             nan     0.1000       nan
##    120      179.8947             nan     0.1000       nan
##    140      179.8947             nan     0.1000       nan
##    150      179.8947             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      193.4954             nan     0.1000       nan
##      2      193.4954             nan     0.1000       nan
##      3      193.4954             nan     0.1000       nan
##      4      193.4954             nan     0.1000       nan
##      5      193.4954             nan     0.1000       nan
##      6      193.4954             nan     0.1000       nan
##      7      193.4954             nan     0.1000       nan
##      8      193.4954             nan     0.1000       nan
##      9      193.4954             nan     0.1000       nan
##     10      193.4954             nan     0.1000       nan
##     20      193.4954             nan     0.1000       nan
##     40      193.4954             nan     0.1000       nan
##     60      193.4954             nan     0.1000       nan
##     80      193.4954             nan     0.1000       nan
##    100      193.4954             nan     0.1000       nan
##    120      193.4954             nan     0.1000       nan
##    140      193.4954             nan     0.1000       nan
##    150      193.4954             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      193.4954             nan     0.1000       nan
##      2      193.4954             nan     0.1000       nan
##      3      193.4954             nan     0.1000       nan
##      4      193.4954             nan     0.1000       nan
##      5      193.4954             nan     0.1000       nan
##      6      193.4954             nan     0.1000       nan
##      7      193.4954             nan     0.1000       nan
##      8      193.4954             nan     0.1000       nan
##      9      193.4954             nan     0.1000       nan
##     10      193.4954             nan     0.1000       nan
##     20      193.4954             nan     0.1000       nan
##     40      193.4954             nan     0.1000       nan
##     60      193.4954             nan     0.1000       nan
##     80      193.4954             nan     0.1000       nan
##    100      193.4954             nan     0.1000       nan
##    120      193.4954             nan     0.1000       nan
##    140      193.4954             nan     0.1000       nan
##    150      193.4954             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      193.4954             nan     0.1000       nan
##      2      193.4954             nan     0.1000       nan
##      3      193.4954             nan     0.1000       nan
##      4      193.4954             nan     0.1000       nan
##      5      193.4954             nan     0.1000       nan
##      6      193.4954             nan     0.1000       nan
##      7      193.4954             nan     0.1000       nan
##      8      193.4954             nan     0.1000       nan
##      9      193.4954             nan     0.1000       nan
##     10      193.4954             nan     0.1000       nan
##     20      193.4954             nan     0.1000       nan
##     40      193.4954             nan     0.1000       nan
##     60      193.4954             nan     0.1000       nan
##     80      193.4954             nan     0.1000       nan
##    100      193.4954             nan     0.1000       nan
##    120      193.4954             nan     0.1000       nan
##    140      193.4954             nan     0.1000       nan
##    150      193.4954             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.7994             nan     0.1000       nan
##      2      249.7994             nan     0.1000       nan
##      3      249.7994             nan     0.1000       nan
##      4      249.7994             nan     0.1000       nan
##      5      249.7994             nan     0.1000       nan
##      6      249.7994             nan     0.1000       nan
##      7      249.7994             nan     0.1000       nan
##      8      249.7994             nan     0.1000       nan
##      9      249.7994             nan     0.1000       nan
##     10      249.7994             nan     0.1000       nan
##     20      249.7994             nan     0.1000       nan
##     40      249.7994             nan     0.1000       nan
##     60      249.7994             nan     0.1000       nan
##     80      249.7994             nan     0.1000       nan
##    100      249.7994             nan     0.1000       nan
##    120      249.7994             nan     0.1000       nan
##    140      249.7994             nan     0.1000       nan
##    150      249.7994             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.7994             nan     0.1000       nan
##      2      249.7994             nan     0.1000       nan
##      3      249.7994             nan     0.1000       nan
##      4      249.7994             nan     0.1000       nan
##      5      249.7994             nan     0.1000       nan
##      6      249.7994             nan     0.1000       nan
##      7      249.7994             nan     0.1000       nan
##      8      249.7994             nan     0.1000       nan
##      9      249.7994             nan     0.1000       nan
##     10      249.7994             nan     0.1000       nan
##     20      249.7994             nan     0.1000       nan
##     40      249.7994             nan     0.1000       nan
##     60      249.7994             nan     0.1000       nan
##     80      249.7994             nan     0.1000       nan
##    100      249.7994             nan     0.1000       nan
##    120      249.7994             nan     0.1000       nan
##    140      249.7994             nan     0.1000       nan
##    150      249.7994             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.7994             nan     0.1000       nan
##      2      249.7994             nan     0.1000       nan
##      3      249.7994             nan     0.1000       nan
##      4      249.7994             nan     0.1000       nan
##      5      249.7994             nan     0.1000       nan
##      6      249.7994             nan     0.1000       nan
##      7      249.7994             nan     0.1000       nan
##      8      249.7994             nan     0.1000       nan
##      9      249.7994             nan     0.1000       nan
##     10      249.7994             nan     0.1000       nan
##     20      249.7994             nan     0.1000       nan
##     40      249.7994             nan     0.1000       nan
##     60      249.7994             nan     0.1000       nan
##     80      249.7994             nan     0.1000       nan
##    100      249.7994             nan     0.1000       nan
##    120      249.7994             nan     0.1000       nan
##    140      249.7994             nan     0.1000       nan
##    150      249.7994             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.0525             nan     0.1000       nan
##      2      252.0525             nan     0.1000       nan
##      3      252.0525             nan     0.1000       nan
##      4      252.0525             nan     0.1000       nan
##      5      252.0525             nan     0.1000       nan
##      6      252.0525             nan     0.1000       nan
##      7      252.0525             nan     0.1000       nan
##      8      252.0525             nan     0.1000       nan
##      9      252.0525             nan     0.1000       nan
##     10      252.0525             nan     0.1000       nan
##     20      252.0525             nan     0.1000       nan
##     40      252.0525             nan     0.1000       nan
##     60      252.0525             nan     0.1000       nan
##     80      252.0525             nan     0.1000       nan
##    100      252.0525             nan     0.1000       nan
##    120      252.0525             nan     0.1000       nan
##    140      252.0525             nan     0.1000       nan
##    150      252.0525             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.0525             nan     0.1000       nan
##      2      252.0525             nan     0.1000       nan
##      3      252.0525             nan     0.1000       nan
##      4      252.0525             nan     0.1000       nan
##      5      252.0525             nan     0.1000       nan
##      6      252.0525             nan     0.1000       nan
##      7      252.0525             nan     0.1000       nan
##      8      252.0525             nan     0.1000       nan
##      9      252.0525             nan     0.1000       nan
##     10      252.0525             nan     0.1000       nan
##     20      252.0525             nan     0.1000       nan
##     40      252.0525             nan     0.1000       nan
##     60      252.0525             nan     0.1000       nan
##     80      252.0525             nan     0.1000       nan
##    100      252.0525             nan     0.1000       nan
##    120      252.0525             nan     0.1000       nan
##    140      252.0525             nan     0.1000       nan
##    150      252.0525             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.0525             nan     0.1000       nan
##      2      252.0525             nan     0.1000       nan
##      3      252.0525             nan     0.1000       nan
##      4      252.0525             nan     0.1000       nan
##      5      252.0525             nan     0.1000       nan
##      6      252.0525             nan     0.1000       nan
##      7      252.0525             nan     0.1000       nan
##      8      252.0525             nan     0.1000       nan
##      9      252.0525             nan     0.1000       nan
##     10      252.0525             nan     0.1000       nan
##     20      252.0525             nan     0.1000       nan
##     40      252.0525             nan     0.1000       nan
##     60      252.0525             nan     0.1000       nan
##     80      252.0525             nan     0.1000       nan
##    100      252.0525             nan     0.1000       nan
##    120      252.0525             nan     0.1000       nan
##    140      252.0525             nan     0.1000       nan
##    150      252.0525             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      176.6702             nan     0.1000       nan
##      2      176.6702             nan     0.1000       nan
##      3      176.6702             nan     0.1000       nan
##      4      176.6702             nan     0.1000       nan
##      5      176.6702             nan     0.1000       nan
##      6      176.6702             nan     0.1000       nan
##      7      176.6702             nan     0.1000       nan
##      8      176.6702             nan     0.1000       nan
##      9      176.6702             nan     0.1000       nan
##     10      176.6702             nan     0.1000       nan
##     20      176.6702             nan     0.1000       nan
##     40      176.6702             nan     0.1000       nan
##     60      176.6702             nan     0.1000       nan
##     80      176.6702             nan     0.1000       nan
##    100      176.6702             nan     0.1000       nan
##    120      176.6702             nan     0.1000       nan
##    140      176.6702             nan     0.1000       nan
##    150      176.6702             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      176.6702             nan     0.1000       nan
##      2      176.6702             nan     0.1000       nan
##      3      176.6702             nan     0.1000       nan
##      4      176.6702             nan     0.1000       nan
##      5      176.6702             nan     0.1000       nan
##      6      176.6702             nan     0.1000       nan
##      7      176.6702             nan     0.1000       nan
##      8      176.6702             nan     0.1000       nan
##      9      176.6702             nan     0.1000       nan
##     10      176.6702             nan     0.1000       nan
##     20      176.6702             nan     0.1000       nan
##     40      176.6702             nan     0.1000       nan
##     60      176.6702             nan     0.1000       nan
##     80      176.6702             nan     0.1000       nan
##    100      176.6702             nan     0.1000       nan
##    120      176.6702             nan     0.1000       nan
##    140      176.6702             nan     0.1000       nan
##    150      176.6702             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      176.6702             nan     0.1000       nan
##      2      176.6702             nan     0.1000       nan
##      3      176.6702             nan     0.1000       nan
##      4      176.6702             nan     0.1000       nan
##      5      176.6702             nan     0.1000       nan
##      6      176.6702             nan     0.1000       nan
##      7      176.6702             nan     0.1000       nan
##      8      176.6702             nan     0.1000       nan
##      9      176.6702             nan     0.1000       nan
##     10      176.6702             nan     0.1000       nan
##     20      176.6702             nan     0.1000       nan
##     40      176.6702             nan     0.1000       nan
##     60      176.6702             nan     0.1000       nan
##     80      176.6702             nan     0.1000       nan
##    100      176.6702             nan     0.1000       nan
##    120      176.6702             nan     0.1000       nan
##    140      176.6702             nan     0.1000       nan
##    150      176.6702             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      283.0054             nan     0.1000       nan
##      2      283.0054             nan     0.1000       nan
##      3      283.0054             nan     0.1000       nan
##      4      283.0054             nan     0.1000       nan
##      5      283.0054             nan     0.1000       nan
##      6      283.0054             nan     0.1000       nan
##      7      283.0054             nan     0.1000       nan
##      8      283.0054             nan     0.1000       nan
##      9      283.0054             nan     0.1000       nan
##     10      283.0054             nan     0.1000       nan
##     20      283.0054             nan     0.1000       nan
##     40      283.0054             nan     0.1000       nan
##     60      283.0054             nan     0.1000       nan
##     80      283.0054             nan     0.1000       nan
##    100      283.0054             nan     0.1000       nan
##    120      283.0054             nan     0.1000       nan
##    140      283.0054             nan     0.1000       nan
##    150      283.0054             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      283.0054             nan     0.1000       nan
##      2      283.0054             nan     0.1000       nan
##      3      283.0054             nan     0.1000       nan
##      4      283.0054             nan     0.1000       nan
##      5      283.0054             nan     0.1000       nan
##      6      283.0054             nan     0.1000       nan
##      7      283.0054             nan     0.1000       nan
##      8      283.0054             nan     0.1000       nan
##      9      283.0054             nan     0.1000       nan
##     10      283.0054             nan     0.1000       nan
##     20      283.0054             nan     0.1000       nan
##     40      283.0054             nan     0.1000       nan
##     60      283.0054             nan     0.1000       nan
##     80      283.0054             nan     0.1000       nan
##    100      283.0054             nan     0.1000       nan
##    120      283.0054             nan     0.1000       nan
##    140      283.0054             nan     0.1000       nan
##    150      283.0054             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      283.0054             nan     0.1000       nan
##      2      283.0054             nan     0.1000       nan
##      3      283.0054             nan     0.1000       nan
##      4      283.0054             nan     0.1000       nan
##      5      283.0054             nan     0.1000       nan
##      6      283.0054             nan     0.1000       nan
##      7      283.0054             nan     0.1000       nan
##      8      283.0054             nan     0.1000       nan
##      9      283.0054             nan     0.1000       nan
##     10      283.0054             nan     0.1000       nan
##     20      283.0054             nan     0.1000       nan
##     40      283.0054             nan     0.1000       nan
##     60      283.0054             nan     0.1000       nan
##     80      283.0054             nan     0.1000       nan
##    100      283.0054             nan     0.1000       nan
##    120      283.0054             nan     0.1000       nan
##    140      283.0054             nan     0.1000       nan
##    150      283.0054             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      267.0190             nan     0.1000       nan
##      2      267.0190             nan     0.1000       nan
##      3      267.0190             nan     0.1000       nan
##      4      267.0190             nan     0.1000       nan
##      5      267.0190             nan     0.1000       nan
##      6      267.0190             nan     0.1000       nan
##      7      267.0190             nan     0.1000       nan
##      8      267.0190             nan     0.1000       nan
##      9      267.0190             nan     0.1000       nan
##     10      267.0190             nan     0.1000       nan
##     20      267.0190             nan     0.1000       nan
##     40      267.0190             nan     0.1000       nan
##     60      267.0190             nan     0.1000       nan
##     80      267.0190             nan     0.1000       nan
##    100      267.0190             nan     0.1000       nan
##    120      267.0190             nan     0.1000       nan
##    140      267.0190             nan     0.1000       nan
##    150      267.0190             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      267.0190             nan     0.1000       nan
##      2      267.0190             nan     0.1000       nan
##      3      267.0190             nan     0.1000       nan
##      4      267.0190             nan     0.1000       nan
##      5      267.0190             nan     0.1000       nan
##      6      267.0190             nan     0.1000       nan
##      7      267.0190             nan     0.1000       nan
##      8      267.0190             nan     0.1000       nan
##      9      267.0190             nan     0.1000       nan
##     10      267.0190             nan     0.1000       nan
##     20      267.0190             nan     0.1000       nan
##     40      267.0190             nan     0.1000       nan
##     60      267.0190             nan     0.1000       nan
##     80      267.0190             nan     0.1000       nan
##    100      267.0190             nan     0.1000       nan
##    120      267.0190             nan     0.1000       nan
##    140      267.0190             nan     0.1000       nan
##    150      267.0190             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      267.0190             nan     0.1000       nan
##      2      267.0190             nan     0.1000       nan
##      3      267.0190             nan     0.1000       nan
##      4      267.0190             nan     0.1000       nan
##      5      267.0190             nan     0.1000       nan
##      6      267.0190             nan     0.1000       nan
##      7      267.0190             nan     0.1000       nan
##      8      267.0190             nan     0.1000       nan
##      9      267.0190             nan     0.1000       nan
##     10      267.0190             nan     0.1000       nan
##     20      267.0190             nan     0.1000       nan
##     40      267.0190             nan     0.1000       nan
##     60      267.0190             nan     0.1000       nan
##     80      267.0190             nan     0.1000       nan
##    100      267.0190             nan     0.1000       nan
##    120      267.0190             nan     0.1000       nan
##    140      267.0190             nan     0.1000       nan
##    150      267.0190             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.2287             nan     0.1000       nan
##      2      236.2287             nan     0.1000       nan
##      3      236.2287             nan     0.1000       nan
##      4      236.2287             nan     0.1000       nan
##      5      236.2287             nan     0.1000       nan
##      6      236.2287             nan     0.1000       nan
##      7      236.2287             nan     0.1000       nan
##      8      236.2287             nan     0.1000       nan
##      9      236.2287             nan     0.1000       nan
##     10      236.2287             nan     0.1000       nan
##     20      236.2287             nan     0.1000       nan
##     40      236.2287             nan     0.1000       nan
##     60      236.2287             nan     0.1000       nan
##     80      236.2287             nan     0.1000       nan
##    100      236.2287             nan     0.1000       nan
##    120      236.2287             nan     0.1000       nan
##    140      236.2287             nan     0.1000       nan
##    150      236.2287             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.2287             nan     0.1000       nan
##      2      236.2287             nan     0.1000       nan
##      3      236.2287             nan     0.1000       nan
##      4      236.2287             nan     0.1000       nan
##      5      236.2287             nan     0.1000       nan
##      6      236.2287             nan     0.1000       nan
##      7      236.2287             nan     0.1000       nan
##      8      236.2287             nan     0.1000       nan
##      9      236.2287             nan     0.1000       nan
##     10      236.2287             nan     0.1000       nan
##     20      236.2287             nan     0.1000       nan
##     40      236.2287             nan     0.1000       nan
##     60      236.2287             nan     0.1000       nan
##     80      236.2287             nan     0.1000       nan
##    100      236.2287             nan     0.1000       nan
##    120      236.2287             nan     0.1000       nan
##    140      236.2287             nan     0.1000       nan
##    150      236.2287             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.2287             nan     0.1000       nan
##      2      236.2287             nan     0.1000       nan
##      3      236.2287             nan     0.1000       nan
##      4      236.2287             nan     0.1000       nan
##      5      236.2287             nan     0.1000       nan
##      6      236.2287             nan     0.1000       nan
##      7      236.2287             nan     0.1000       nan
##      8      236.2287             nan     0.1000       nan
##      9      236.2287             nan     0.1000       nan
##     10      236.2287             nan     0.1000       nan
##     20      236.2287             nan     0.1000       nan
##     40      236.2287             nan     0.1000       nan
##     60      236.2287             nan     0.1000       nan
##     80      236.2287             nan     0.1000       nan
##    100      236.2287             nan     0.1000       nan
##    120      236.2287             nan     0.1000       nan
##    140      236.2287             nan     0.1000       nan
##    150      236.2287             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      365.6509             nan     0.1000       nan
##      2      365.6509             nan     0.1000       nan
##      3      365.6509             nan     0.1000       nan
##      4      365.6509             nan     0.1000       nan
##      5      365.6509             nan     0.1000       nan
##      6      365.6509             nan     0.1000       nan
##      7      365.6509             nan     0.1000       nan
##      8      365.6509             nan     0.1000       nan
##      9      365.6509             nan     0.1000       nan
##     10      365.6509             nan     0.1000       nan
##     20      365.6509             nan     0.1000       nan
##     40      365.6509             nan     0.1000       nan
##     60      365.6509             nan     0.1000       nan
##     80      365.6509             nan     0.1000       nan
##    100      365.6509             nan     0.1000       nan
##    120      365.6509             nan     0.1000       nan
##    140      365.6509             nan     0.1000       nan
##    150      365.6509             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      365.6509             nan     0.1000       nan
##      2      365.6509             nan     0.1000       nan
##      3      365.6509             nan     0.1000       nan
##      4      365.6509             nan     0.1000       nan
##      5      365.6509             nan     0.1000       nan
##      6      365.6509             nan     0.1000       nan
##      7      365.6509             nan     0.1000       nan
##      8      365.6509             nan     0.1000       nan
##      9      365.6509             nan     0.1000       nan
##     10      365.6509             nan     0.1000       nan
##     20      365.6509             nan     0.1000       nan
##     40      365.6509             nan     0.1000       nan
##     60      365.6509             nan     0.1000       nan
##     80      365.6509             nan     0.1000       nan
##    100      365.6509             nan     0.1000       nan
##    120      365.6509             nan     0.1000       nan
##    140      365.6509             nan     0.1000       nan
##    150      365.6509             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      365.6509             nan     0.1000       nan
##      2      365.6509             nan     0.1000       nan
##      3      365.6509             nan     0.1000       nan
##      4      365.6509             nan     0.1000       nan
##      5      365.6509             nan     0.1000       nan
##      6      365.6509             nan     0.1000       nan
##      7      365.6509             nan     0.1000       nan
##      8      365.6509             nan     0.1000       nan
##      9      365.6509             nan     0.1000       nan
##     10      365.6509             nan     0.1000       nan
##     20      365.6509             nan     0.1000       nan
##     40      365.6509             nan     0.1000       nan
##     60      365.6509             nan     0.1000       nan
##     80      365.6509             nan     0.1000       nan
##    100      365.6509             nan     0.1000       nan
##    120      365.6509             nan     0.1000       nan
##    140      365.6509             nan     0.1000       nan
##    150      365.6509             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      148.8061             nan     0.1000       nan
##      2      148.8061             nan     0.1000       nan
##      3      148.8061             nan     0.1000       nan
##      4      148.8061             nan     0.1000       nan
##      5      148.8061             nan     0.1000       nan
##      6      148.8061             nan     0.1000       nan
##      7      148.8061             nan     0.1000       nan
##      8      148.8061             nan     0.1000       nan
##      9      148.8061             nan     0.1000       nan
##     10      148.8061             nan     0.1000       nan
##     20      148.8061             nan     0.1000       nan
##     40      148.8061             nan     0.1000       nan
##     60      148.8061             nan     0.1000       nan
##     80      148.8061             nan     0.1000       nan
##    100      148.8061             nan     0.1000       nan
##    120      148.8061             nan     0.1000       nan
##    140      148.8061             nan     0.1000       nan
##    150      148.8061             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      148.8061             nan     0.1000       nan
##      2      148.8061             nan     0.1000       nan
##      3      148.8061             nan     0.1000       nan
##      4      148.8061             nan     0.1000       nan
##      5      148.8061             nan     0.1000       nan
##      6      148.8061             nan     0.1000       nan
##      7      148.8061             nan     0.1000       nan
##      8      148.8061             nan     0.1000       nan
##      9      148.8061             nan     0.1000       nan
##     10      148.8061             nan     0.1000       nan
##     20      148.8061             nan     0.1000       nan
##     40      148.8061             nan     0.1000       nan
##     60      148.8061             nan     0.1000       nan
##     80      148.8061             nan     0.1000       nan
##    100      148.8061             nan     0.1000       nan
##    120      148.8061             nan     0.1000       nan
##    140      148.8061             nan     0.1000       nan
##    150      148.8061             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      148.8061             nan     0.1000       nan
##      2      148.8061             nan     0.1000       nan
##      3      148.8061             nan     0.1000       nan
##      4      148.8061             nan     0.1000       nan
##      5      148.8061             nan     0.1000       nan
##      6      148.8061             nan     0.1000       nan
##      7      148.8061             nan     0.1000       nan
##      8      148.8061             nan     0.1000       nan
##      9      148.8061             nan     0.1000       nan
##     10      148.8061             nan     0.1000       nan
##     20      148.8061             nan     0.1000       nan
##     40      148.8061             nan     0.1000       nan
##     60      148.8061             nan     0.1000       nan
##     80      148.8061             nan     0.1000       nan
##    100      148.8061             nan     0.1000       nan
##    120      148.8061             nan     0.1000       nan
##    140      148.8061             nan     0.1000       nan
##    150      148.8061             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      127.3458             nan     0.1000       nan
##      2      127.3458             nan     0.1000       nan
##      3      127.3458             nan     0.1000       nan
##      4      127.3458             nan     0.1000       nan
##      5      127.3458             nan     0.1000       nan
##      6      127.3458             nan     0.1000       nan
##      7      127.3458             nan     0.1000       nan
##      8      127.3458             nan     0.1000       nan
##      9      127.3458             nan     0.1000       nan
##     10      127.3458             nan     0.1000       nan
##     20      127.3458             nan     0.1000       nan
##     40      127.3458             nan     0.1000       nan
##     60      127.3458             nan     0.1000       nan
##     80      127.3458             nan     0.1000       nan
##    100      127.3458             nan     0.1000       nan
##    120      127.3458             nan     0.1000       nan
##    140      127.3458             nan     0.1000       nan
##    150      127.3458             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      127.3458             nan     0.1000       nan
##      2      127.3458             nan     0.1000       nan
##      3      127.3458             nan     0.1000       nan
##      4      127.3458             nan     0.1000       nan
##      5      127.3458             nan     0.1000       nan
##      6      127.3458             nan     0.1000       nan
##      7      127.3458             nan     0.1000       nan
##      8      127.3458             nan     0.1000       nan
##      9      127.3458             nan     0.1000       nan
##     10      127.3458             nan     0.1000       nan
##     20      127.3458             nan     0.1000       nan
##     40      127.3458             nan     0.1000       nan
##     60      127.3458             nan     0.1000       nan
##     80      127.3458             nan     0.1000       nan
##    100      127.3458             nan     0.1000       nan
##    120      127.3458             nan     0.1000       nan
##    140      127.3458             nan     0.1000       nan
##    150      127.3458             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      127.3458             nan     0.1000       nan
##      2      127.3458             nan     0.1000       nan
##      3      127.3458             nan     0.1000       nan
##      4      127.3458             nan     0.1000       nan
##      5      127.3458             nan     0.1000       nan
##      6      127.3458             nan     0.1000       nan
##      7      127.3458             nan     0.1000       nan
##      8      127.3458             nan     0.1000       nan
##      9      127.3458             nan     0.1000       nan
##     10      127.3458             nan     0.1000       nan
##     20      127.3458             nan     0.1000       nan
##     40      127.3458             nan     0.1000       nan
##     60      127.3458             nan     0.1000       nan
##     80      127.3458             nan     0.1000       nan
##    100      127.3458             nan     0.1000       nan
##    120      127.3458             nan     0.1000       nan
##    140      127.3458             nan     0.1000       nan
##    150      127.3458             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      299.1846             nan     0.1000       nan
##      2      299.1846             nan     0.1000       nan
##      3      299.1846             nan     0.1000       nan
##      4      299.1846             nan     0.1000       nan
##      5      299.1846             nan     0.1000       nan
##      6      299.1846             nan     0.1000       nan
##      7      299.1846             nan     0.1000       nan
##      8      299.1846             nan     0.1000       nan
##      9      299.1846             nan     0.1000       nan
##     10      299.1846             nan     0.1000       nan
##     20      299.1846             nan     0.1000       nan
##     40      299.1846             nan     0.1000       nan
##     60      299.1846             nan     0.1000       nan
##     80      299.1846             nan     0.1000       nan
##    100      299.1846             nan     0.1000       nan
##    120      299.1846             nan     0.1000       nan
##    140      299.1846             nan     0.1000       nan
##    150      299.1846             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      299.1846             nan     0.1000       nan
##      2      299.1846             nan     0.1000       nan
##      3      299.1846             nan     0.1000       nan
##      4      299.1846             nan     0.1000       nan
##      5      299.1846             nan     0.1000       nan
##      6      299.1846             nan     0.1000       nan
##      7      299.1846             nan     0.1000       nan
##      8      299.1846             nan     0.1000       nan
##      9      299.1846             nan     0.1000       nan
##     10      299.1846             nan     0.1000       nan
##     20      299.1846             nan     0.1000       nan
##     40      299.1846             nan     0.1000       nan
##     60      299.1846             nan     0.1000       nan
##     80      299.1846             nan     0.1000       nan
##    100      299.1846             nan     0.1000       nan
##    120      299.1846             nan     0.1000       nan
##    140      299.1846             nan     0.1000       nan
##    150      299.1846             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      299.1846             nan     0.1000       nan
##      2      299.1846             nan     0.1000       nan
##      3      299.1846             nan     0.1000       nan
##      4      299.1846             nan     0.1000       nan
##      5      299.1846             nan     0.1000       nan
##      6      299.1846             nan     0.1000       nan
##      7      299.1846             nan     0.1000       nan
##      8      299.1846             nan     0.1000       nan
##      9      299.1846             nan     0.1000       nan
##     10      299.1846             nan     0.1000       nan
##     20      299.1846             nan     0.1000       nan
##     40      299.1846             nan     0.1000       nan
##     60      299.1846             nan     0.1000       nan
##     80      299.1846             nan     0.1000       nan
##    100      299.1846             nan     0.1000       nan
##    120      299.1846             nan     0.1000       nan
##    140      299.1846             nan     0.1000       nan
##    150      299.1846             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      276.6520             nan     0.1000       nan
##      2      276.6520             nan     0.1000       nan
##      3      276.6520             nan     0.1000       nan
##      4      276.6520             nan     0.1000       nan
##      5      276.6520             nan     0.1000       nan
##      6      276.6520             nan     0.1000       nan
##      7      276.6520             nan     0.1000       nan
##      8      276.6520             nan     0.1000       nan
##      9      276.6520             nan     0.1000       nan
##     10      276.6520             nan     0.1000       nan
##     20      276.6520             nan     0.1000       nan
##     40      276.6520             nan     0.1000       nan
##     60      276.6520             nan     0.1000       nan
##     80      276.6520             nan     0.1000       nan
##    100      276.6520             nan     0.1000       nan
##    120      276.6520             nan     0.1000       nan
##    140      276.6520             nan     0.1000       nan
##    150      276.6520             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      276.6520             nan     0.1000       nan
##      2      276.6520             nan     0.1000       nan
##      3      276.6520             nan     0.1000       nan
##      4      276.6520             nan     0.1000       nan
##      5      276.6520             nan     0.1000       nan
##      6      276.6520             nan     0.1000       nan
##      7      276.6520             nan     0.1000       nan
##      8      276.6520             nan     0.1000       nan
##      9      276.6520             nan     0.1000       nan
##     10      276.6520             nan     0.1000       nan
##     20      276.6520             nan     0.1000       nan
##     40      276.6520             nan     0.1000       nan
##     60      276.6520             nan     0.1000       nan
##     80      276.6520             nan     0.1000       nan
##    100      276.6520             nan     0.1000       nan
##    120      276.6520             nan     0.1000       nan
##    140      276.6520             nan     0.1000       nan
##    150      276.6520             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      276.6520             nan     0.1000       nan
##      2      276.6520             nan     0.1000       nan
##      3      276.6520             nan     0.1000       nan
##      4      276.6520             nan     0.1000       nan
##      5      276.6520             nan     0.1000       nan
##      6      276.6520             nan     0.1000       nan
##      7      276.6520             nan     0.1000       nan
##      8      276.6520             nan     0.1000       nan
##      9      276.6520             nan     0.1000       nan
##     10      276.6520             nan     0.1000       nan
##     20      276.6520             nan     0.1000       nan
##     40      276.6520             nan     0.1000       nan
##     60      276.6520             nan     0.1000       nan
##     80      276.6520             nan     0.1000       nan
##    100      276.6520             nan     0.1000       nan
##    120      276.6520             nan     0.1000       nan
##    140      276.6520             nan     0.1000       nan
##    150      276.6520             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      330.2812             nan     0.1000       nan
##      2      330.2812             nan     0.1000       nan
##      3      330.2812             nan     0.1000       nan
##      4      330.2812             nan     0.1000       nan
##      5      330.2812             nan     0.1000       nan
##      6      330.2812             nan     0.1000       nan
##      7      330.2812             nan     0.1000       nan
##      8      330.2812             nan     0.1000       nan
##      9      330.2812             nan     0.1000       nan
##     10      330.2812             nan     0.1000       nan
##     20      330.2812             nan     0.1000       nan
##     40      330.2812             nan     0.1000       nan
##     60      330.2812             nan     0.1000       nan
##     80      330.2812             nan     0.1000       nan
##    100      330.2812             nan     0.1000       nan
##    120      330.2812             nan     0.1000       nan
##    140      330.2812             nan     0.1000       nan
##    150      330.2812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      330.2812             nan     0.1000       nan
##      2      330.2812             nan     0.1000       nan
##      3      330.2812             nan     0.1000       nan
##      4      330.2812             nan     0.1000       nan
##      5      330.2812             nan     0.1000       nan
##      6      330.2812             nan     0.1000       nan
##      7      330.2812             nan     0.1000       nan
##      8      330.2812             nan     0.1000       nan
##      9      330.2812             nan     0.1000       nan
##     10      330.2812             nan     0.1000       nan
##     20      330.2812             nan     0.1000       nan
##     40      330.2812             nan     0.1000       nan
##     60      330.2812             nan     0.1000       nan
##     80      330.2812             nan     0.1000       nan
##    100      330.2812             nan     0.1000       nan
##    120      330.2812             nan     0.1000       nan
##    140      330.2812             nan     0.1000       nan
##    150      330.2812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      330.2812             nan     0.1000       nan
##      2      330.2812             nan     0.1000       nan
##      3      330.2812             nan     0.1000       nan
##      4      330.2812             nan     0.1000       nan
##      5      330.2812             nan     0.1000       nan
##      6      330.2812             nan     0.1000       nan
##      7      330.2812             nan     0.1000       nan
##      8      330.2812             nan     0.1000       nan
##      9      330.2812             nan     0.1000       nan
##     10      330.2812             nan     0.1000       nan
##     20      330.2812             nan     0.1000       nan
##     40      330.2812             nan     0.1000       nan
##     60      330.2812             nan     0.1000       nan
##     80      330.2812             nan     0.1000       nan
##    100      330.2812             nan     0.1000       nan
##    120      330.2812             nan     0.1000       nan
##    140      330.2812             nan     0.1000       nan
##    150      330.2812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      196.9216             nan     0.1000       nan
##      2      196.9216             nan     0.1000       nan
##      3      196.9216             nan     0.1000       nan
##      4      196.9216             nan     0.1000       nan
##      5      196.9216             nan     0.1000       nan
##      6      196.9216             nan     0.1000       nan
##      7      196.9216             nan     0.1000       nan
##      8      196.9216             nan     0.1000       nan
##      9      196.9216             nan     0.1000       nan
##     10      196.9216             nan     0.1000       nan
##     20      196.9216             nan     0.1000       nan
##     40      196.9216             nan     0.1000       nan
##     60      196.9216             nan     0.1000       nan
##     80      196.9216             nan     0.1000       nan
##    100      196.9216             nan     0.1000       nan
##    120      196.9216             nan     0.1000       nan
##    140      196.9216             nan     0.1000       nan
##    150      196.9216             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      196.9216             nan     0.1000       nan
##      2      196.9216             nan     0.1000       nan
##      3      196.9216             nan     0.1000       nan
##      4      196.9216             nan     0.1000       nan
##      5      196.9216             nan     0.1000       nan
##      6      196.9216             nan     0.1000       nan
##      7      196.9216             nan     0.1000       nan
##      8      196.9216             nan     0.1000       nan
##      9      196.9216             nan     0.1000       nan
##     10      196.9216             nan     0.1000       nan
##     20      196.9216             nan     0.1000       nan
##     40      196.9216             nan     0.1000       nan
##     60      196.9216             nan     0.1000       nan
##     80      196.9216             nan     0.1000       nan
##    100      196.9216             nan     0.1000       nan
##    120      196.9216             nan     0.1000       nan
##    140      196.9216             nan     0.1000       nan
##    150      196.9216             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      196.9216             nan     0.1000       nan
##      2      196.9216             nan     0.1000       nan
##      3      196.9216             nan     0.1000       nan
##      4      196.9216             nan     0.1000       nan
##      5      196.9216             nan     0.1000       nan
##      6      196.9216             nan     0.1000       nan
##      7      196.9216             nan     0.1000       nan
##      8      196.9216             nan     0.1000       nan
##      9      196.9216             nan     0.1000       nan
##     10      196.9216             nan     0.1000       nan
##     20      196.9216             nan     0.1000       nan
##     40      196.9216             nan     0.1000       nan
##     60      196.9216             nan     0.1000       nan
##     80      196.9216             nan     0.1000       nan
##    100      196.9216             nan     0.1000       nan
##    120      196.9216             nan     0.1000       nan
##    140      196.9216             nan     0.1000       nan
##    150      196.9216             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      356.1394             nan     0.1000       nan
##      2      356.1394             nan     0.1000       nan
##      3      356.1394             nan     0.1000       nan
##      4      356.1394             nan     0.1000       nan
##      5      356.1394             nan     0.1000       nan
##      6      356.1394             nan     0.1000       nan
##      7      356.1394             nan     0.1000       nan
##      8      356.1394             nan     0.1000       nan
##      9      356.1394             nan     0.1000       nan
##     10      356.1394             nan     0.1000       nan
##     20      356.1394             nan     0.1000       nan
##     40      356.1394             nan     0.1000       nan
##     60      356.1394             nan     0.1000       nan
##     80      356.1394             nan     0.1000       nan
##    100      356.1394             nan     0.1000       nan
##    120      356.1394             nan     0.1000       nan
##    140      356.1394             nan     0.1000       nan
##    150      356.1394             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      356.1394             nan     0.1000       nan
##      2      356.1394             nan     0.1000       nan
##      3      356.1394             nan     0.1000       nan
##      4      356.1394             nan     0.1000       nan
##      5      356.1394             nan     0.1000       nan
##      6      356.1394             nan     0.1000       nan
##      7      356.1394             nan     0.1000       nan
##      8      356.1394             nan     0.1000       nan
##      9      356.1394             nan     0.1000       nan
##     10      356.1394             nan     0.1000       nan
##     20      356.1394             nan     0.1000       nan
##     40      356.1394             nan     0.1000       nan
##     60      356.1394             nan     0.1000       nan
##     80      356.1394             nan     0.1000       nan
##    100      356.1394             nan     0.1000       nan
##    120      356.1394             nan     0.1000       nan
##    140      356.1394             nan     0.1000       nan
##    150      356.1394             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      356.1394             nan     0.1000       nan
##      2      356.1394             nan     0.1000       nan
##      3      356.1394             nan     0.1000       nan
##      4      356.1394             nan     0.1000       nan
##      5      356.1394             nan     0.1000       nan
##      6      356.1394             nan     0.1000       nan
##      7      356.1394             nan     0.1000       nan
##      8      356.1394             nan     0.1000       nan
##      9      356.1394             nan     0.1000       nan
##     10      356.1394             nan     0.1000       nan
##     20      356.1394             nan     0.1000       nan
##     40      356.1394             nan     0.1000       nan
##     60      356.1394             nan     0.1000       nan
##     80      356.1394             nan     0.1000       nan
##    100      356.1394             nan     0.1000       nan
##    120      356.1394             nan     0.1000       nan
##    140      356.1394             nan     0.1000       nan
##    150      356.1394             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      300.7170             nan     0.1000       nan
##      2      300.7170             nan     0.1000       nan
##      3      300.7170             nan     0.1000       nan
##      4      300.7170             nan     0.1000       nan
##      5      300.7170             nan     0.1000       nan
##      6      300.7170             nan     0.1000       nan
##      7      300.7170             nan     0.1000       nan
##      8      300.7170             nan     0.1000       nan
##      9      300.7170             nan     0.1000       nan
##     10      300.7170             nan     0.1000       nan
##     20      300.7170             nan     0.1000       nan
##     40      300.7170             nan     0.1000       nan
##     60      300.7170             nan     0.1000       nan
##     80      300.7170             nan     0.1000       nan
##    100      300.7170             nan     0.1000       nan
##    120      300.7170             nan     0.1000       nan
##    140      300.7170             nan     0.1000       nan
##    150      300.7170             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      300.7170             nan     0.1000       nan
##      2      300.7170             nan     0.1000       nan
##      3      300.7170             nan     0.1000       nan
##      4      300.7170             nan     0.1000       nan
##      5      300.7170             nan     0.1000       nan
##      6      300.7170             nan     0.1000       nan
##      7      300.7170             nan     0.1000       nan
##      8      300.7170             nan     0.1000       nan
##      9      300.7170             nan     0.1000       nan
##     10      300.7170             nan     0.1000       nan
##     20      300.7170             nan     0.1000       nan
##     40      300.7170             nan     0.1000       nan
##     60      300.7170             nan     0.1000       nan
##     80      300.7170             nan     0.1000       nan
##    100      300.7170             nan     0.1000       nan
##    120      300.7170             nan     0.1000       nan
##    140      300.7170             nan     0.1000       nan
##    150      300.7170             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      300.7170             nan     0.1000       nan
##      2      300.7170             nan     0.1000       nan
##      3      300.7170             nan     0.1000       nan
##      4      300.7170             nan     0.1000       nan
##      5      300.7170             nan     0.1000       nan
##      6      300.7170             nan     0.1000       nan
##      7      300.7170             nan     0.1000       nan
##      8      300.7170             nan     0.1000       nan
##      9      300.7170             nan     0.1000       nan
##     10      300.7170             nan     0.1000       nan
##     20      300.7170             nan     0.1000       nan
##     40      300.7170             nan     0.1000       nan
##     60      300.7170             nan     0.1000       nan
##     80      300.7170             nan     0.1000       nan
##    100      300.7170             nan     0.1000       nan
##    120      300.7170             nan     0.1000       nan
##    140      300.7170             nan     0.1000       nan
##    150      300.7170             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      275.2096             nan     0.1000       nan
##      2      275.2096             nan     0.1000       nan
##      3      275.2096             nan     0.1000       nan
##      4      275.2096             nan     0.1000       nan
##      5      275.2096             nan     0.1000       nan
##      6      275.2096             nan     0.1000       nan
##      7      275.2096             nan     0.1000       nan
##      8      275.2096             nan     0.1000       nan
##      9      275.2096             nan     0.1000       nan
##     10      275.2096             nan     0.1000       nan
##     20      275.2096             nan     0.1000       nan
##     40      275.2096             nan     0.1000       nan
##     60      275.2096             nan     0.1000       nan
##     80      275.2096             nan     0.1000       nan
##    100      275.2096             nan     0.1000       nan
##    120      275.2096             nan     0.1000       nan
##    140      275.2096             nan     0.1000       nan
##    150      275.2096             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      275.2096             nan     0.1000       nan
##      2      275.2096             nan     0.1000       nan
##      3      275.2096             nan     0.1000       nan
##      4      275.2096             nan     0.1000       nan
##      5      275.2096             nan     0.1000       nan
##      6      275.2096             nan     0.1000       nan
##      7      275.2096             nan     0.1000       nan
##      8      275.2096             nan     0.1000       nan
##      9      275.2096             nan     0.1000       nan
##     10      275.2096             nan     0.1000       nan
##     20      275.2096             nan     0.1000       nan
##     40      275.2096             nan     0.1000       nan
##     60      275.2096             nan     0.1000       nan
##     80      275.2096             nan     0.1000       nan
##    100      275.2096             nan     0.1000       nan
##    120      275.2096             nan     0.1000       nan
##    140      275.2096             nan     0.1000       nan
##    150      275.2096             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      275.2096             nan     0.1000       nan
##      2      275.2096             nan     0.1000       nan
##      3      275.2096             nan     0.1000       nan
##      4      275.2096             nan     0.1000       nan
##      5      275.2096             nan     0.1000       nan
##      6      275.2096             nan     0.1000       nan
##      7      275.2096             nan     0.1000       nan
##      8      275.2096             nan     0.1000       nan
##      9      275.2096             nan     0.1000       nan
##     10      275.2096             nan     0.1000       nan
##     20      275.2096             nan     0.1000       nan
##     40      275.2096             nan     0.1000       nan
##     60      275.2096             nan     0.1000       nan
##     80      275.2096             nan     0.1000       nan
##    100      275.2096             nan     0.1000       nan
##    120      275.2096             nan     0.1000       nan
##    140      275.2096             nan     0.1000       nan
##    150      275.2096             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.2681             nan     0.1000       nan
##      2      206.2681             nan     0.1000       nan
##      3      206.2681             nan     0.1000       nan
##      4      206.2681             nan     0.1000       nan
##      5      206.2681             nan     0.1000       nan
##      6      206.2681             nan     0.1000       nan
##      7      206.2681             nan     0.1000       nan
##      8      206.2681             nan     0.1000       nan
##      9      206.2681             nan     0.1000       nan
##     10      206.2681             nan     0.1000       nan
##     20      206.2681             nan     0.1000       nan
##     40      206.2681             nan     0.1000       nan
##     60      206.2681             nan     0.1000       nan
##     80      206.2681             nan     0.1000       nan
##    100      206.2681             nan     0.1000       nan
##    120      206.2681             nan     0.1000       nan
##    140      206.2681             nan     0.1000       nan
##    150      206.2681             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.2681             nan     0.1000       nan
##      2      206.2681             nan     0.1000       nan
##      3      206.2681             nan     0.1000       nan
##      4      206.2681             nan     0.1000       nan
##      5      206.2681             nan     0.1000       nan
##      6      206.2681             nan     0.1000       nan
##      7      206.2681             nan     0.1000       nan
##      8      206.2681             nan     0.1000       nan
##      9      206.2681             nan     0.1000       nan
##     10      206.2681             nan     0.1000       nan
##     20      206.2681             nan     0.1000       nan
##     40      206.2681             nan     0.1000       nan
##     60      206.2681             nan     0.1000       nan
##     80      206.2681             nan     0.1000       nan
##    100      206.2681             nan     0.1000       nan
##    120      206.2681             nan     0.1000       nan
##    140      206.2681             nan     0.1000       nan
##    150      206.2681             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      206.2681             nan     0.1000       nan
##      2      206.2681             nan     0.1000       nan
##      3      206.2681             nan     0.1000       nan
##      4      206.2681             nan     0.1000       nan
##      5      206.2681             nan     0.1000       nan
##      6      206.2681             nan     0.1000       nan
##      7      206.2681             nan     0.1000       nan
##      8      206.2681             nan     0.1000       nan
##      9      206.2681             nan     0.1000       nan
##     10      206.2681             nan     0.1000       nan
##     20      206.2681             nan     0.1000       nan
##     40      206.2681             nan     0.1000       nan
##     60      206.2681             nan     0.1000       nan
##     80      206.2681             nan     0.1000       nan
##    100      206.2681             nan     0.1000       nan
##    120      206.2681             nan     0.1000       nan
##    140      206.2681             nan     0.1000       nan
##    150      206.2681             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      141.6660             nan     0.1000       nan
##      2      141.6660             nan     0.1000       nan
##      3      141.6660             nan     0.1000       nan
##      4      141.6660             nan     0.1000       nan
##      5      141.6660             nan     0.1000       nan
##      6      141.6660             nan     0.1000       nan
##      7      141.6660             nan     0.1000       nan
##      8      141.6660             nan     0.1000       nan
##      9      141.6660             nan     0.1000       nan
##     10      141.6660             nan     0.1000       nan
##     20      141.6660             nan     0.1000       nan
##     40      141.6660             nan     0.1000       nan
##     60      141.6660             nan     0.1000       nan
##     80      141.6660             nan     0.1000       nan
##    100      141.6660             nan     0.1000       nan
##    120      141.6660             nan     0.1000       nan
##    140      141.6660             nan     0.1000       nan
##    150      141.6660             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      141.6660             nan     0.1000       nan
##      2      141.6660             nan     0.1000       nan
##      3      141.6660             nan     0.1000       nan
##      4      141.6660             nan     0.1000       nan
##      5      141.6660             nan     0.1000       nan
##      6      141.6660             nan     0.1000       nan
##      7      141.6660             nan     0.1000       nan
##      8      141.6660             nan     0.1000       nan
##      9      141.6660             nan     0.1000       nan
##     10      141.6660             nan     0.1000       nan
##     20      141.6660             nan     0.1000       nan
##     40      141.6660             nan     0.1000       nan
##     60      141.6660             nan     0.1000       nan
##     80      141.6660             nan     0.1000       nan
##    100      141.6660             nan     0.1000       nan
##    120      141.6660             nan     0.1000       nan
##    140      141.6660             nan     0.1000       nan
##    150      141.6660             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      141.6660             nan     0.1000       nan
##      2      141.6660             nan     0.1000       nan
##      3      141.6660             nan     0.1000       nan
##      4      141.6660             nan     0.1000       nan
##      5      141.6660             nan     0.1000       nan
##      6      141.6660             nan     0.1000       nan
##      7      141.6660             nan     0.1000       nan
##      8      141.6660             nan     0.1000       nan
##      9      141.6660             nan     0.1000       nan
##     10      141.6660             nan     0.1000       nan
##     20      141.6660             nan     0.1000       nan
##     40      141.6660             nan     0.1000       nan
##     60      141.6660             nan     0.1000       nan
##     80      141.6660             nan     0.1000       nan
##    100      141.6660             nan     0.1000       nan
##    120      141.6660             nan     0.1000       nan
##    140      141.6660             nan     0.1000       nan
##    150      141.6660             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      305.1359             nan     0.1000       nan
##      2      305.1359             nan     0.1000       nan
##      3      305.1359             nan     0.1000       nan
##      4      305.1359             nan     0.1000       nan
##      5      305.1359             nan     0.1000       nan
##      6      305.1359             nan     0.1000       nan
##      7      305.1359             nan     0.1000       nan
##      8      305.1359             nan     0.1000       nan
##      9      305.1359             nan     0.1000       nan
##     10      305.1359             nan     0.1000       nan
##     20      305.1359             nan     0.1000       nan
##     40      305.1359             nan     0.1000       nan
##     60      305.1359             nan     0.1000       nan
##     80      305.1359             nan     0.1000       nan
##    100      305.1359             nan     0.1000       nan
##    120      305.1359             nan     0.1000       nan
##    140      305.1359             nan     0.1000       nan
##    150      305.1359             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      305.1359             nan     0.1000       nan
##      2      305.1359             nan     0.1000       nan
##      3      305.1359             nan     0.1000       nan
##      4      305.1359             nan     0.1000       nan
##      5      305.1359             nan     0.1000       nan
##      6      305.1359             nan     0.1000       nan
##      7      305.1359             nan     0.1000       nan
##      8      305.1359             nan     0.1000       nan
##      9      305.1359             nan     0.1000       nan
##     10      305.1359             nan     0.1000       nan
##     20      305.1359             nan     0.1000       nan
##     40      305.1359             nan     0.1000       nan
##     60      305.1359             nan     0.1000       nan
##     80      305.1359             nan     0.1000       nan
##    100      305.1359             nan     0.1000       nan
##    120      305.1359             nan     0.1000       nan
##    140      305.1359             nan     0.1000       nan
##    150      305.1359             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      305.1359             nan     0.1000       nan
##      2      305.1359             nan     0.1000       nan
##      3      305.1359             nan     0.1000       nan
##      4      305.1359             nan     0.1000       nan
##      5      305.1359             nan     0.1000       nan
##      6      305.1359             nan     0.1000       nan
##      7      305.1359             nan     0.1000       nan
##      8      305.1359             nan     0.1000       nan
##      9      305.1359             nan     0.1000       nan
##     10      305.1359             nan     0.1000       nan
##     20      305.1359             nan     0.1000       nan
##     40      305.1359             nan     0.1000       nan
##     60      305.1359             nan     0.1000       nan
##     80      305.1359             nan     0.1000       nan
##    100      305.1359             nan     0.1000       nan
##    120      305.1359             nan     0.1000       nan
##    140      305.1359             nan     0.1000       nan
##    150      305.1359             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.3424             nan     0.1000       nan
##      2      236.3424             nan     0.1000       nan
##      3      236.3424             nan     0.1000       nan
##      4      236.3424             nan     0.1000       nan
##      5      236.3424             nan     0.1000       nan
##      6      236.3424             nan     0.1000       nan
##      7      236.3424             nan     0.1000       nan
##      8      236.3424             nan     0.1000       nan
##      9      236.3424             nan     0.1000       nan
##     10      236.3424             nan     0.1000       nan
##     20      236.3424             nan     0.1000       nan
##     40      236.3424             nan     0.1000       nan
##     60      236.3424             nan     0.1000       nan
##     80      236.3424             nan     0.1000       nan
##    100      236.3424             nan     0.1000       nan
##    120      236.3424             nan     0.1000       nan
##    140      236.3424             nan     0.1000       nan
##    150      236.3424             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.3424             nan     0.1000       nan
##      2      236.3424             nan     0.1000       nan
##      3      236.3424             nan     0.1000       nan
##      4      236.3424             nan     0.1000       nan
##      5      236.3424             nan     0.1000       nan
##      6      236.3424             nan     0.1000       nan
##      7      236.3424             nan     0.1000       nan
##      8      236.3424             nan     0.1000       nan
##      9      236.3424             nan     0.1000       nan
##     10      236.3424             nan     0.1000       nan
##     20      236.3424             nan     0.1000       nan
##     40      236.3424             nan     0.1000       nan
##     60      236.3424             nan     0.1000       nan
##     80      236.3424             nan     0.1000       nan
##    100      236.3424             nan     0.1000       nan
##    120      236.3424             nan     0.1000       nan
##    140      236.3424             nan     0.1000       nan
##    150      236.3424             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      236.3424             nan     0.1000       nan
##      2      236.3424             nan     0.1000       nan
##      3      236.3424             nan     0.1000       nan
##      4      236.3424             nan     0.1000       nan
##      5      236.3424             nan     0.1000       nan
##      6      236.3424             nan     0.1000       nan
##      7      236.3424             nan     0.1000       nan
##      8      236.3424             nan     0.1000       nan
##      9      236.3424             nan     0.1000       nan
##     10      236.3424             nan     0.1000       nan
##     20      236.3424             nan     0.1000       nan
##     40      236.3424             nan     0.1000       nan
##     60      236.3424             nan     0.1000       nan
##     80      236.3424             nan     0.1000       nan
##    100      236.3424             nan     0.1000       nan
##    120      236.3424             nan     0.1000       nan
##    140      236.3424             nan     0.1000       nan
##    150      236.3424             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.8897             nan     0.1000       nan
##      2      249.8897             nan     0.1000       nan
##      3      249.8897             nan     0.1000       nan
##      4      249.8897             nan     0.1000       nan
##      5      249.8897             nan     0.1000       nan
##      6      249.8897             nan     0.1000       nan
##      7      249.8897             nan     0.1000       nan
##      8      249.8897             nan     0.1000       nan
##      9      249.8897             nan     0.1000       nan
##     10      249.8897             nan     0.1000       nan
##     20      249.8897             nan     0.1000       nan
##     40      249.8897             nan     0.1000       nan
##     60      249.8897             nan     0.1000       nan
##     80      249.8897             nan     0.1000       nan
##    100      249.8897             nan     0.1000       nan
##    120      249.8897             nan     0.1000       nan
##    140      249.8897             nan     0.1000       nan
##    150      249.8897             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.8897             nan     0.1000       nan
##      2      249.8897             nan     0.1000       nan
##      3      249.8897             nan     0.1000       nan
##      4      249.8897             nan     0.1000       nan
##      5      249.8897             nan     0.1000       nan
##      6      249.8897             nan     0.1000       nan
##      7      249.8897             nan     0.1000       nan
##      8      249.8897             nan     0.1000       nan
##      9      249.8897             nan     0.1000       nan
##     10      249.8897             nan     0.1000       nan
##     20      249.8897             nan     0.1000       nan
##     40      249.8897             nan     0.1000       nan
##     60      249.8897             nan     0.1000       nan
##     80      249.8897             nan     0.1000       nan
##    100      249.8897             nan     0.1000       nan
##    120      249.8897             nan     0.1000       nan
##    140      249.8897             nan     0.1000       nan
##    150      249.8897             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      249.8897             nan     0.1000       nan
##      2      249.8897             nan     0.1000       nan
##      3      249.8897             nan     0.1000       nan
##      4      249.8897             nan     0.1000       nan
##      5      249.8897             nan     0.1000       nan
##      6      249.8897             nan     0.1000       nan
##      7      249.8897             nan     0.1000       nan
##      8      249.8897             nan     0.1000       nan
##      9      249.8897             nan     0.1000       nan
##     10      249.8897             nan     0.1000       nan
##     20      249.8897             nan     0.1000       nan
##     40      249.8897             nan     0.1000       nan
##     60      249.8897             nan     0.1000       nan
##     80      249.8897             nan     0.1000       nan
##    100      249.8897             nan     0.1000       nan
##    120      249.8897             nan     0.1000       nan
##    140      249.8897             nan     0.1000       nan
##    150      249.8897             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      265.3017             nan     0.1000       nan
##      2      265.3017             nan     0.1000       nan
##      3      265.3017             nan     0.1000       nan
##      4      265.3017             nan     0.1000       nan
##      5      265.3017             nan     0.1000       nan
##      6      265.3017             nan     0.1000       nan
##      7      265.3017             nan     0.1000       nan
##      8      265.3017             nan     0.1000       nan
##      9      265.3017             nan     0.1000       nan
##     10      265.3017             nan     0.1000       nan
##     20      265.3017             nan     0.1000       nan
##     40      265.3017             nan     0.1000       nan
##     60      265.3017             nan     0.1000       nan
##     80      265.3017             nan     0.1000       nan
##    100      265.3017             nan     0.1000       nan
##    120      265.3017             nan     0.1000       nan
##    140      265.3017             nan     0.1000       nan
##    150      265.3017             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      265.3017             nan     0.1000       nan
##      2      265.3017             nan     0.1000       nan
##      3      265.3017             nan     0.1000       nan
##      4      265.3017             nan     0.1000       nan
##      5      265.3017             nan     0.1000       nan
##      6      265.3017             nan     0.1000       nan
##      7      265.3017             nan     0.1000       nan
##      8      265.3017             nan     0.1000       nan
##      9      265.3017             nan     0.1000       nan
##     10      265.3017             nan     0.1000       nan
##     20      265.3017             nan     0.1000       nan
##     40      265.3017             nan     0.1000       nan
##     60      265.3017             nan     0.1000       nan
##     80      265.3017             nan     0.1000       nan
##    100      265.3017             nan     0.1000       nan
##    120      265.3017             nan     0.1000       nan
##    140      265.3017             nan     0.1000       nan
##    150      265.3017             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      265.3017             nan     0.1000       nan
##      2      265.3017             nan     0.1000       nan
##      3      265.3017             nan     0.1000       nan
##      4      265.3017             nan     0.1000       nan
##      5      265.3017             nan     0.1000       nan
##      6      265.3017             nan     0.1000       nan
##      7      265.3017             nan     0.1000       nan
##      8      265.3017             nan     0.1000       nan
##      9      265.3017             nan     0.1000       nan
##     10      265.3017             nan     0.1000       nan
##     20      265.3017             nan     0.1000       nan
##     40      265.3017             nan     0.1000       nan
##     60      265.3017             nan     0.1000       nan
##     80      265.3017             nan     0.1000       nan
##    100      265.3017             nan     0.1000       nan
##    120      265.3017             nan     0.1000       nan
##    140      265.3017             nan     0.1000       nan
##    150      265.3017             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      240.5812             nan     0.1000       nan
##      2      240.5812             nan     0.1000       nan
##      3      240.5812             nan     0.1000       nan
##      4      240.5812             nan     0.1000       nan
##      5      240.5812             nan     0.1000       nan
##      6      240.5812             nan     0.1000       nan
##      7      240.5812             nan     0.1000       nan
##      8      240.5812             nan     0.1000       nan
##      9      240.5812             nan     0.1000       nan
##     10      240.5812             nan     0.1000       nan
##     20      240.5812             nan     0.1000       nan
##     40      240.5812             nan     0.1000       nan
##     60      240.5812             nan     0.1000       nan
##     80      240.5812             nan     0.1000       nan
##    100      240.5812             nan     0.1000       nan
##    120      240.5812             nan     0.1000       nan
##    140      240.5812             nan     0.1000       nan
##    150      240.5812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      240.5812             nan     0.1000       nan
##      2      240.5812             nan     0.1000       nan
##      3      240.5812             nan     0.1000       nan
##      4      240.5812             nan     0.1000       nan
##      5      240.5812             nan     0.1000       nan
##      6      240.5812             nan     0.1000       nan
##      7      240.5812             nan     0.1000       nan
##      8      240.5812             nan     0.1000       nan
##      9      240.5812             nan     0.1000       nan
##     10      240.5812             nan     0.1000       nan
##     20      240.5812             nan     0.1000       nan
##     40      240.5812             nan     0.1000       nan
##     60      240.5812             nan     0.1000       nan
##     80      240.5812             nan     0.1000       nan
##    100      240.5812             nan     0.1000       nan
##    120      240.5812             nan     0.1000       nan
##    140      240.5812             nan     0.1000       nan
##    150      240.5812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      240.5812             nan     0.1000       nan
##      2      240.5812             nan     0.1000       nan
##      3      240.5812             nan     0.1000       nan
##      4      240.5812             nan     0.1000       nan
##      5      240.5812             nan     0.1000       nan
##      6      240.5812             nan     0.1000       nan
##      7      240.5812             nan     0.1000       nan
##      8      240.5812             nan     0.1000       nan
##      9      240.5812             nan     0.1000       nan
##     10      240.5812             nan     0.1000       nan
##     20      240.5812             nan     0.1000       nan
##     40      240.5812             nan     0.1000       nan
##     60      240.5812             nan     0.1000       nan
##     80      240.5812             nan     0.1000       nan
##    100      240.5812             nan     0.1000       nan
##    120      240.5812             nan     0.1000       nan
##    140      240.5812             nan     0.1000       nan
##    150      240.5812             nan     0.1000       nan
## 
## Iter   TrainDeviance   ValidDeviance   StepSize   Improve
##      1      252.2985             nan     0.1000       nan
##      2      252.2985             nan     0.1000       nan
##      3      252.2985             nan     0.1000       nan
##      4      252.2985             nan     0.1000       nan
##      5      252.2985             nan     0.1000       nan
##      6      252.2985             nan     0.1000       nan
##      7      252.2985             nan     0.1000       nan
##      8      252.2985             nan     0.1000       nan
##      9      252.2985             nan     0.1000       nan
##     10      252.2985             nan     0.1000       nan
##     20      252.2985             nan     0.1000       nan
##     40      252.2985             nan     0.1000       nan
##     50      252.2985             nan     0.1000       nan</code></pre>
<pre class="r"><code># You get the same results above as if you just did as.factor(mon)

# really regreting my _z_ convention here...
df_mon$p_zz_rf &lt;- predict(mod_rf, df_mon)
df_mon$p_zz_gbm &lt;- predict(mod_gbm, df_mon)
df_mon$p_zz_gbm_fact &lt;- predict(mod_gbm_fact, X)
plot_mon(df_mon)</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-26-1.png" width="672" /> I ran out of colors, but the horrible green line is the linear trend. I’m getting a warning on the <code>gbm_fact</code> saying that I don’t have enough varaition on the data. I assume if I had more than 2 data points for each year, we’d get better predicitons</p>
</div>
<div id="residuals" class="section level2">
<h2>Residuals</h2>
<p>Now that we’ve finished all our modeling, let’s dive into the model selection.</p>
<p>Let’s look at a plot of the residuals. We see there’s cyclicality in them. The goal is that each line “hugs” y = 0 (which would imply zero error).</p>
<pre class="r"><code># plot residuals
preds &lt;- df_mon %&gt;% select(starts_with(&#39;p_&#39;)) %&gt;% colnames()
df_err &lt;- df_mon %&gt;% select(births, starts_with(&#39;p_&#39;), ym)
for (p in c(&#39;births&#39;, preds)){
  df_err[p] = df_err[p] - df_mon$births
}

plot_mon(df_err[df_err$ym &gt;= cutoff,]) + 
  ylab(&#39;Residuals During Prediction Period&#39;) + 
  scale_x_date(date_breaks= &quot;6 months&quot;, 
                 date_labels = &quot;&#39;%y-%m&quot;, 
                 limits = c(as.Date(&#39;2015-05-01&#39;), as.Date(&#39;2016-01-01&#39;)),
                 expand = c(0, 0))</code></pre>
<pre><code>## Scale for &#39;x&#39; is already present. Adding another scale for &#39;x&#39;, which
## will replace the existing scale.</code></pre>
<p><img src="/post/2019-10-26-births-times-series-month_files/figure-html/unnamed-chunk-27-1.png" width="672" /> All in al, we se that <code>p_line_fact</code> seems to do well on average, whi <code>p_arima</code> seems to be be over predicting.</p>
</div>
<div id="compare-all-modeling-techniques" class="section level2">
<h2>Compare All modeling Techniques</h2>
<pre class="r"><code>results &lt;- list()
df_oot &lt;- df_mon %&gt;% dplyr::filter(ym &gt; cutoff)
for (p in preds) {
  phat &lt;- df_oot[p] %&gt;% pull()
  obs &lt;- df_oot$births 
  results[[p]] &lt;- caret::postResample(phat, obs)
}
res2 &lt;- data.frame(results) %&gt;% t() %&gt;% data.frame()
res2$model &lt;- rownames(res2)
res2 %&gt;% arrange(RMSE)</code></pre>
<pre><code>##        RMSE  Rsquared       MAE         model
## 1  2.464275 0.9575015  2.205167        p_pois
## 2  2.536157 0.9545686  2.224417   p_line_fact
## 3  3.018006 0.9783273  2.587167      p_xarima
## 4  4.587501 0.8729016  3.965337       p_zz_rf
## 5  5.414550 0.9014269  4.685573    p_zprophet
## 6  5.614877 0.9545686  5.015200 p_line_fact_y
## 7 11.761993 0.2194241  9.784447      p_zz_gbm
## 8 15.942483 0.6550713 13.735825        p_line
## 9 17.290487        NA 15.827767 p_zz_gbm_fact</code></pre>
<p>We see that the Poisson model actually did better on the out of time data (according to RMSE and MAE)! That’s pretty exciting.</p>
<p>To recap: * Changing feature types can drastically improve our modeling fit * Have to be careful about adding features where there’s incomplete data (for example, adding an effect for year when we only have half of 2015). * Changing modeling techniques can improve modeling fit. * A Poisson model beat out all othe rmodeling techniques * A simple linear regression with a month effect beat out the dynamic time series ARIMA model (which, admittedly, is just a linear regression with a one-year lag on the target variable). * The GBM with factor doesn’t work here (presumably because I don’t have enough data in the minimum tree node). It’ll just fit a flat line (the overall average). * Prophet doesn’t work as well on this particular data set, but I like how easy it is to get predictive bands and intervals. * Just because a GBM works well on one model (MPG) doesn’t mean it’s best for all models. In this case, the default random forest did significantly better than the default GBM. This just goes to show that you need to tune every model! Don’t rely on default values. Don’t rely on one technique just because it worked in the past. * In 5 minutes I fit <code>p_line_fact</code>. It took several hours to research and explore these various models, only to be disappointed! in this case, the default</p>
</div>
<div id="final-notes" class="section level2">
<h2>Final notes</h2>
<p>We covered some core time series concepts: * Overall trend (yearly) * Seasonal trend * Differencing * Fitting an effect for month and year * Trying out linear vs. Bayesian vs. GLM (poisson) * Posterior predictive intervals: the Bayesian technique yields posterior predictives. * It’d be cool to try out <a href="https://youtu.be/68ABAU_V8qI?t=354">Radial Basis Functions</a> with the linear regression to see if that improves fit over <code>as.factor()</code>, but we probably don’t have enough data in our particular data set.</p>
</div>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="//tags/r/">r</a>

  <a class="tag tag--primary tag--small" href="//tags/time-series/">time series</a>

  <a class="tag tag--primary tag--small" href="//tags/modeling/">modeling</a>

  <a class="tag tag--primary tag--small" href="//tags/forecasting/">forecasting</a>

  <a class="tag tag--primary tag--small" href="//tags/seasonality/">seasonality</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2019/10/sample-size/" data-tooltip="Sample Size">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2019/10/births-time-series-year/" data-tooltip="Modeling Birth Rates Part 1: By Year">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
   
   
  <script>
  $(document).ready(function () {
    window.initializeCodeFolding("show" === "hide");
  });
  </script>
  <script src="/js/codefolding.js"></script>


    
  <span class="copyrights">
    &copy; 2019 Bryan Whiting. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2019/10/sample-size/" data-tooltip="Sample Size">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2019/10/births-time-series-year/" data-tooltip="Modeling Birth Rates Part 1: By Year">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2019%2f10%2fbirths-time-series-month%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2f2019%2f10%2fbirths-time-series-month%2f">
        <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2019%2f10%2fbirths-time-series-month%2f">
        <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2f2019%2f10%2fbirths-time-series-month%2f">
        <i class="fa fa-twitter"></i><span>Share on Twitter</span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Bryan Whiting</h4>
    
      <div id="about-card-bio">father, innovator, data scientist</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Data Scientist
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Washington, D.C.
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/sample-size/">
                <h3 class="media-heading">Sample Size</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">So your boss likes asking questions. Let’s find answers to a few she might ask.
# Go and collect some car data df = read.table(&#39;ftp://ftp.ics.uci.edu/pub/machine-learning-databases/auto-mpg/auto-mpg.data-original&#39;, col.names = c(&#39;mpg&#39;, &#39;cyl&#39;, &#39;disp&#39;, &#39;hp&#39;, &#39;wt&#39;, &#39;acc&#39;, &#39;year&#39;, &#39;origin&#39;, &#39;name&#39;)) # Let&#39;s randomly shuffle the rows set.seed(1) df &lt;- df[sample(nrow(df)),] # Extract make df$make &lt;- word(df$name) df %&lt;&gt;% filter(!is.na(mpg)) %&gt;% select(name, make, everything()) One Sample T-Test  Question 1: I think Ford cars have pretty bad miles-per-gallon (MPG).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/births-time-series-month/">
                <h3 class="media-heading">Modeling Birth Rates Part 2: By Month</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In Part 1, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.
Predicting Seasonality I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/births-time-series-year/">
                <h3 class="media-heading">Modeling Birth Rates Part 1: By Year</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’m still excited to be a dad, so I’m going to try to model birth rates in the US. This will be a time series modeling exercise, and I’ll use this time to explore some modeling techniques. In Part 2 I’ll model the monthly birth rates.
I downloaded CDC birth data from here: * https://www.cdc.gov/nchs/data-visualization/natality-trends/ * “Births and General Fertility Rates” &gt; Download CSV * Other data sets can be found here: https://www.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/baby-names/">
                <h3 class="media-heading">Why does everyone I work with have the same name? A guide on how to not pick a unique baby name in America.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’ve taken a particular interest in names since I’m thinking of a name for my to-be-born son. I did a little digging through the Social Security Administration names database, which lists all names given to baby boys and girls in America1. I began this exercise to just get a quality list of ideas, but my curiosity got the better of me.
Name Trends Since 1950 What was the most popular boy name since 1950?</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/09/baby-boy-names/">
                <h3 class="media-heading">Scraping Baby Boy Name Trends</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’m going to be a dad (again) soon. I don’t want my boy to have a common name, so I gotta do my research. I’m curious: how do names trend over time? If I pick a name today, will it be popular tomorrow?
Step 1: The Social Security Administration reports all baby names each year in the United States, given the name occurs at least 5 times.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/04/dplyr-vs-datatable/">
                <h3 class="media-heading">Dplyr vs Datatable</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In the world of data science in R, the battle between dplyr and datatable is real. Here I compare their performance against base r commands for some common tasks. Who will be the winner on speed and simplicity?
Make random datasets set.seed(71) size1 &lt;- 4*10^6 size2 &lt;- size1 * 0.1 df1 &lt;- data.frame(id=paste0(&quot;SERVICE_&quot;, 1:size1), value=rnorm(size1), stringsAsFactors=FALSE) df2 &lt;- data.frame(id=paste0(&quot;SERVICE_&quot;, sample(1:size1, size2)), value=rnorm(size2), stringsAsFactors=FALSE) dt1 &lt;- data.table(df1) dt2 &lt;- data.table(df2) # mtcars data M &lt;- data.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/02/rshiny-on-docker-part2/">
                <h3 class="media-heading">Getting Custom Domain for EC2 Web App - Part 2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this post, I&rsquo;ll cover how to better customize some settings so to get your own custom domain for your EC2 instance. Say, app.example.com. Anyone interested in customizing an EC2 instance can use this - not just those who build R Shiny apps. I assume you already read part 1, where it was described how to launch an R Shiny app on EC2. I assume you already have some EC2 instance running with some useful app.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/02/rshiny-on-docker-part1/">
                <h3 class="media-heading">R Shiny on AWS Using Docker - Part 1</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I want to run R Shiny on AWS using Docker. Here&rsquo;s how to do it.
In part 2, I&rsquo;ll demonstrate how to get a custom domain and make the URL look clean.
Useful background reading If you&rsquo;re already comfortable with Docker, skip to the next section.
 Great Simple tutorial on using Docker and Flask: Short and sweet. Docker for Beginners: Verbose and lengthy. Excellent introduction. Walks you through all the jargon.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/09/machine-learning-models/">
                <h3 class="media-heading">Machine Learning Model Notes</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Here are some notes on machine learning models.
Concepts Behind Decision Trees  Bagging (boostrap aggregation): Randomly sample with replacement, and average the results. Majority vote: The most commonly-occuring prediction. Internal node: Where the splits occur. Branches: Segments that connect the nodes. Terminal node (leafs, regions): Where the observations end up. The average of the responses (or majority vote) is the prediction for future observations. Gini index: where \(m\) is the leaf and \(k\) is the class (0 or 1 for binary classification, but can be extedned for multiple classes).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/09/byu-football/">
                <h3 class="media-heading">byu football</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Goal of this post. Answer some interesting questions about BYU football. Dive into different modeling approaches. I don’t explain my thinking below, but some of the charts might be cool.
Some questions of interest
 How is Kilani Sitake doing in his second season compared to past BYU coaches? More challenging: how’s he doing relative to all second-season coaches?  df_in &lt;- read.csv(file.path(fp_data, &#39;byu_seasons.csv&#39;)) %&gt;% distinct() Some basic questions: * How many years do we have data on?</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         25 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/durango-blurred.JPG');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2019\/10\/births-time-series-month\/';
          
            this.page.identifier = '\/2019\/10\/births-time-series-month\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'bryanwhiting1';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

