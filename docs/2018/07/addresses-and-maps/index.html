

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script data-ad-client="ca-pub-6540088627087882" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.54.0">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Collect, Analyze, and Map Addresses in R</title>
    <meta name="author" content="Bryan Whiting">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="The goal of this tutorial is to do the following:
Collect addresses (via Google Forms) Download to R (via googlesheets) Geocode them (via geocode) Plot them (using leaflet) Get driving distance between them (via gmapsdistance) Cluster them (kmeans) Making the leaflet plot fancy  1. Collect Perhaps in a future post I’ll explore googleformr. For now, I create forms the old-school way.">
    <meta property="og:description" content="The goal of this tutorial is to do the following:
Collect addresses (via Google Forms) Download to R (via googlesheets) Geocode them (via geocode) Plot them (using leaflet) Get driving distance between them (via gmapsdistance) Cluster them (kmeans) Making the leaflet plot fancy  1. Collect Perhaps in a future post I’ll explore googleformr. For now, I create forms the old-school way.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Collect, Analyze, and Map Addresses in R">
    <meta property="og:url" content="/2018/07/addresses-and-maps/">
    <meta property="og:site_name" content="My take on data">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="My take on data">
    <meta name="twitter:description" content="The goal of this tutorial is to do the following:
Collect addresses (via Google Forms) Download to R (via googlesheets) Geocode them (via geocode) Plot them (using leaflet) Get driving distance between them (via gmapsdistance) Cluster them (kmeans) Making the leaflet plot fancy  1. Collect Perhaps in a future post I’ll explore googleformr. For now, I create forms the old-school way.">
    
      <meta name="twitter:creator" content="@bryanwhiting">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-85616639-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">My take on data</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Bryan Whiting</h4>
        
          <h5 class="sidebar-profile-bio">father, innovator, data scientist</h5>
        
      </div>
    
    
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/index.html">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/projects/index.html">
    
      <i class="sidebar-button-icon fa fa-lg fa-briefcase"></i>
      
      <span class="sidebar-button-desc">Projects</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/2138773/bryan">
    
      <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/bryanwhiting">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/bryanwhiting">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/bryan-whiting-b524a44b/">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
  
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Collect, Analyze, and Map Addresses in R
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2018-07-28T00:00:00Z">
      
  July 28, 2018

    </time>
  
  
  
  
    <span>in</span>
    
      <a class="category-link" href="/categories/tutorials">tutorials</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>
<link href="/rmarkdown-libs/leaflet-awesomemarkers/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-awesomemarkers/leaflet.awesome-markers.min.js"></script>
<link href="/rmarkdown-libs/bootstrap/bootstrap.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/bootstrap/bootstrap.min.js"></script>
<link href="/rmarkdown-libs/fontawesome/font-awesome.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-providers/leaflet-providers.js"></script>
<script src="/rmarkdown-libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>


<p>The goal of this tutorial is to do the following:</p>
<ol style="list-style-type: decimal">
<li>Collect addresses (via Google Forms)</li>
<li>Download to R (via <code>googlesheets</code>)</li>
<li>Geocode them (via <code>geocode</code>)</li>
<li>Plot them (using <code>leaflet</code>)</li>
<li>Get driving distance between them (via <code>gmapsdistance</code>)</li>
<li>Cluster them (<code>kmeans</code>)</li>
<li>Making the <code>leaflet</code> plot fancy</li>
</ol>
<div id="collect" class="section level2">
<h2>1. Collect</h2>
<p>Perhaps in a future post I’ll explore <a href="https://cran.r-project.org/web/packages/googleformr/index.html">googleformr</a>. For now, I create forms the old-school way.</p>
<p>Create a Form:</p>
<ol style="list-style-type: decimal">
<li>Visit drive.google.com</li>
<li>Create a Form</li>
<li>Collect responses (google a random “fake address generator” for inspiration)</li>
<li>Save the responses to a new sheet <code>fake_addresses</code></li>
</ol>
<p>Steps in pretty picture form: <img src="/img/20180720/create_form1.png" /> <img src="/img/20180720/go_to_responses.png" /> <img src="/img/20180720/create_sheet.png" /></p>
</div>
<div id="connect-and-download" class="section level2">
<h2>2. Connect and Download</h2>
<p>I use the <a href="https://cran.r-project.org/web/packages/googlesheets/index.html">googlesheets</a> API to connect to the google sheet of choice. <a href="https://datascienceplus.com/how-to-use-googlesheets-to-connect-r-to-google-sheets/">Tutorial</a> for first-timers. Also, this <a href="https://rawgit.com/jennybc/googlesheets/master/vignettes/basic-usage.html#get-a-google-sheet-to-practice-with">vignette</a> .</p>
<pre class="r"><code>devtools::install_github(&quot;dkahle/ggmap&quot;) # for the register_google function
devtools::install_github(&quot;rodazuero/gmapsdistance&quot;)
install.load::install_load(&#39;gmapsdistance&#39;, &#39;googlesheets&#39;, &#39;dplyr&#39;, &#39;leaflet&#39;, &#39;magrittr&#39;, &#39;ggmap&#39;, &#39;cluster&#39;, &#39;factoextra&#39;)</code></pre>
<p>Run this to authorize access to your Google account. It’s pretty nice!</p>
<pre class="r"><code>gs_auth(new_user=TRUE)</code></pre>
<p>Identify your sheet name and pull the data. Write to disk to save time in the future.</p>
<pre class="r"><code>wb_name &lt;- gs_title(&#39;fake_addresses&#39;)
# Or, if published to web, enter the key after /d/ in the url:
# wb_name &lt;- gs_key(&#39;198ng981...&#39;)
wb &lt;- gs_read(wb_name)
# Save it to csv (you could skip this)
wb %&gt;% write.csv(&#39;data/20180720/addresses.csv&#39;)</code></pre>
<p>Read it in, inspect, and clean.</p>
<pre class="r"><code>wb &lt;- read.csv(&#39;data/20180720/addresses.csv&#39;)
wb %&lt;&gt;% select(-X, -Timestamp)
colnames(wb) &lt;- c(&#39;address&#39;, &#39;favorite_color&#39;, &#39;favorite_food&#39;)
wb$address %&lt;&gt;% as.character() # geocode requires a character, not level
wb %&gt;% knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">address</th>
<th align="left">favorite_color</th>
<th align="left">favorite_food</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">3094 Bell Street, New York, New York</td>
<td align="left">Blue</td>
<td align="left">Peanuts</td>
</tr>
<tr class="even">
<td align="left">1181 Williams Avenue, New York, New York</td>
<td align="left">Blue</td>
<td align="left">Salmon</td>
</tr>
<tr class="odd">
<td align="left">4289 Taylor Street, new york, new york</td>
<td align="left">Green</td>
<td align="left">Salmon</td>
</tr>
<tr class="even">
<td align="left">2239 Duncan Avenue, new york, new york</td>
<td align="left">Red</td>
<td align="left">Caviar</td>
</tr>
<tr class="odd">
<td align="left">2379 Grove Street, new york, ny</td>
<td align="left">Blue</td>
<td align="left">Salmon</td>
</tr>
<tr class="even">
<td align="left">302 Pallet Street, new york, new york</td>
<td align="left">Red</td>
<td align="left">Caviar</td>
</tr>
<tr class="odd">
<td align="left">2664 Oakwood Avenue, new york, new york</td>
<td align="left">Red</td>
<td align="left">Peanuts</td>
</tr>
<tr class="even">
<td align="left">3897 Hoffman Avenue, new york, new york</td>
<td align="left">Green</td>
<td align="left">Peanuts</td>
</tr>
</tbody>
</table>
</div>
<div id="geocode-the-addresses" class="section level2">
<h2>3. Geocode the addresses</h2>
<p>To use the <code>geocode</code> funciton, you may need to create a google maps API if you over-do your quota (daily limit is 2500). See footnotes for API help.</p>
<pre class="r"><code># load the googlemaps api
api_key = trimws(readChar(&#39;data/google_maps_api&#39;, 1000))
register_google(key = api_key)
substr(api_key, 1, 3)</code></pre>
<pre><code>## [1] &quot;AIz&quot;</code></pre>
<p>Use <code>geocode()</code> for each address. (This code was taken from somewhere, though I can’t remember where.)</p>
<pre class="r"><code>df &lt;- wb
df$lon &lt;- 0
df$lat &lt;- 0
df$geoAddress &lt;- &quot;&quot;

for(i in 1:nrow(df))
{
  if(!is.na(df$address[i])){
    result &lt;- geocode(df$address[i], output = &quot;latlona&quot;, source = &quot;google&quot;)
    df$lon[i] &lt;- as.numeric(result[1])
    df$lat[i] &lt;- as.numeric(result[2])
    df$geoAddress[i] &lt;- as.character(result[3])
  }
}
df %&gt;% knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">X</th>
<th align="left">address</th>
<th align="left">favorite_color</th>
<th align="left">favorite_food</th>
<th align="right">lon</th>
<th align="right">lat</th>
<th align="left">geoAddress</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">3094 Bell Street, New York, New York</td>
<td align="left">Blue</td>
<td align="left">Peanuts</td>
<td align="right">-74.07667</td>
<td align="right">40.61294</td>
<td align="left">bell st, staten island, ny 10305, usa</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">1181 Williams Avenue, New York, New York</td>
<td align="left">Blue</td>
<td align="left">Salmon</td>
<td align="right">-73.89131</td>
<td align="right">40.65006</td>
<td align="left">1181 williams ave, brooklyn, ny 11236, usa</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">4289 Taylor Street, new york, new york</td>
<td align="left">Green</td>
<td align="left">Salmon</td>
<td align="right">-74.12303</td>
<td align="right">40.63378</td>
<td align="left">taylor st, staten island, ny 10310, usa</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">2239 Duncan Avenue, new york, new york</td>
<td align="left">Red</td>
<td align="left">Caviar</td>
<td align="right">-73.85843</td>
<td align="right">40.87307</td>
<td align="left">duncan st, bronx, ny 10469, usa</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">2379 Grove Street, new york, ny</td>
<td align="left">Blue</td>
<td align="left">Salmon</td>
<td align="right">-74.00398</td>
<td align="right">40.73292</td>
<td align="left">grove st, new york, ny 10014, usa</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">302 Pallet Street, new york, new york</td>
<td align="left">Red</td>
<td align="left">Caviar</td>
<td align="right">-73.97018</td>
<td align="right">40.75204</td>
<td align="left">300-302 e 46th st, new york, ny 10017, usa</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">2664 Oakwood Avenue, new york, new york</td>
<td align="left">Red</td>
<td align="left">Peanuts</td>
<td align="right">-73.66295</td>
<td align="right">42.76183</td>
<td align="left">oakwood ave, troy, ny, usa</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">3897 Hoffman Avenue, new york, new york</td>
<td align="left">Green</td>
<td align="left">Peanuts</td>
<td align="right">-73.72631</td>
<td align="right">40.70106</td>
<td align="left">3897 hoffman ave, elmont, ny 11003, usa</td>
</tr>
</tbody>
</table>
</div>
<div id="plot-in-leaflet" class="section level2">
<h2>4. Plot in leaflet</h2>
<p>Lets visualize our people using <code>leaflet</code>.</p>
<pre class="r"><code>leafMap &lt;- df %&gt;%
   leaflet() %&gt;% 
    addTiles() %&gt;%
    addMarkers(~lon, ~lat)
leafMap</code></pre>
<p><div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[40.6129419,40.6500629,40.6337817,40.873067,40.7329225,40.7520435,42.7618252,40.7010575],[-74.0766727,-73.8913059,-74.1230263,-73.858432,-74.00398,-73.9701833,-73.6629522,-73.7263072],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.6129419,42.7618252],"lng":[-74.1230263,-73.6629522]}},"evals":[],"jsHooks":[]}</script> We see we got one person all the way up in Troy.</p>
</div>
<div id="get-driving-distance-between-points" class="section level2">
<h2>5. Get driving distance between points</h2>
<p>With <code>gmapsdistance</code> you can calculate the walking, driving, biking, and public transportation distance between two coordinates. (See <a href="https://github.com/rodazuero/gmapsdistance">docs</a>.)</p>
<pre class="r"><code># This set.api.key is from gmapsdistance (as opposed to ggmap). You need to install the github version if you want `driving` to work as of this post. See https://github.com/rodazuero/gmapsdistance/issues/17
set.api.key(api_key)

# Get the distance between two locations
df %&lt;&gt;% mutate(latlon = paste(lat, &#39;+&#39;, lon, sep = &#39;&#39;))
results = gmapsdistance(origin = df$latlon[1], destination = df$latlon[2], mode = &#39;driving&#39;, shape = &#39;long&#39;)
results</code></pre>
<pre><code>## $Time
## [1] 1929
## 
## $Distance
## [1] 28301
## 
## $Status
## [1] &quot;OK&quot;</code></pre>
<p>The results <code>Time</code> are the time in seconds it takes to go between the two points, and the <code>Distance</code> is in meters.</p>
<p>Now, if you want, you can use this to calculate the driving distance between all of your addresses. Or, use it to optimize a route. But we’ll stop our use here. I just explored that for fun.</p>
</div>
<div id="clustering-people-on-the-map" class="section level2">
<h2>6. Clustering people on the map</h2>
<p>Lets say you want to cluster your peoples into one of three groups. Pretty simple with <code>kmeans</code> clustering (or another clustering method).</p>
<pre class="r"><code>mat &lt;- df %&gt;% select(lat, lon) %&gt;% as.matrix()
k &lt;- kmeans(mat, centers=3)
df$k_clust &lt;- k$cluster
df %&gt;% select(lat, lon, k_clust) %&gt;% knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">lat</th>
<th align="right">lon</th>
<th align="right">k_clust</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">40.61294</td>
<td align="right">-74.07667</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">40.65006</td>
<td align="right">-73.89131</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">40.63378</td>
<td align="right">-74.12303</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">40.87307</td>
<td align="right">-73.85843</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">40.73292</td>
<td align="right">-74.00398</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">40.75204</td>
<td align="right">-73.97018</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">42.76183</td>
<td align="right">-73.66295</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">40.70106</td>
<td align="right">-73.72631</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Now lets see these clusters in a map.</p>
<pre class="r"><code># Function to color
df$mcolor &lt;- plyr::mapvalues(df$k_clust, from=c(1, 2, 3), 
                             to=c(&#39;blue&#39;, &#39;orange&#39;, &#39;green&#39;))
# Create new markers
icons &lt;- awesomeIcons(markerColor = df$mcolor)

leafMap &lt;- df %&gt;%
  leaflet() %&gt;% 
  addTiles() %&gt;%
  addAwesomeMarkers(~lon, ~lat, icon=icons)
leafMap</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addAwesomeMarkers","args":[[40.6129419,40.6500629,40.6337817,40.873067,40.7329225,40.7520435,42.7618252,40.7010575],[-74.0766727,-73.8913059,-74.1230263,-73.858432,-74.00398,-73.9701833,-73.6629522,-73.7263072],{"icon":"home","markerColor":["green","blue","green","blue","green","green","orange","blue"],"iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"glyphicon"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.6129419,42.7618252],"lng":[-74.1230263,-73.6629522]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="making-the-plot-all-fancy" class="section level2">
<h2>7. Making the plot all fancy</h2>
<p>I don’t really like this default leaflet map, so lets up it. Also, lets visualize the favorite food and add some meaningful labels.</p>
<p>Changing the icons:</p>
<pre class="r"><code>df$icons &lt;- plyr::mapvalues(df$favorite_food, from=c(&quot;Peanuts&quot;, &quot;Salmon&quot;, &quot;Caviar&quot;), 
                             to=c(&#39;bus&#39;, &#39;bicycle&#39;, &#39;car&#39;))

icons &lt;- awesomeIcons(markerColor = df$mcolor, 
                      library = &#39;fa&#39;, #fontawesome (google the icons)
                      icon = df$icons)

df %&gt;%
  leaflet() %&gt;% 
  addTiles() %&gt;%
  addAwesomeMarkers(~lon, ~lat, icon=icons)</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addAwesomeMarkers","args":[[40.6129419,40.6500629,40.6337817,40.873067,40.7329225,40.7520435,42.7618252,40.7010575],[-74.0766727,-73.8913059,-74.1230263,-73.858432,-74.00398,-73.9701833,-73.6629522,-73.7263072],{"icon":["bus","bicycle","bicycle","car","bicycle","car","bus","bus"],"markerColor":["green","blue","green","blue","green","green","orange","blue"],"iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.6129419,42.7618252],"lng":[-74.1230263,-73.6629522]}},"evals":[],"jsHooks":[]}</script>
<p>Changing the <a href="https://rstudio.github.io/leaflet/basemaps.html">basemap</a> to make the colors ‘pop’ a little more:</p>
<pre class="r"><code>df %&gt;%
  leaflet() %&gt;% 
  addTiles() %&gt;%
  addProviderTiles(providers$CartoDB.Positron) %&gt;%
  addAwesomeMarkers(~lon, ~lat, icon=icons)</code></pre>
<p><div id="htmlwidget-4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[40.6129419,40.6500629,40.6337817,40.873067,40.7329225,40.7520435,42.7618252,40.7010575],[-74.0766727,-73.8913059,-74.1230263,-73.858432,-74.00398,-73.9701833,-73.6629522,-73.7263072],{"icon":["bus","bicycle","bicycle","car","bicycle","car","bus","bus"],"markerColor":["green","blue","green","blue","green","green","orange","blue"],"iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.6129419,42.7618252],"lng":[-74.1230263,-73.6629522]}},"evals":[],"jsHooks":[]}</script> (Other basemap examples here: <a href="https://leaflet-extras.github.io/leaflet-providers/preview/" class="uri">https://leaflet-extras.github.io/leaflet-providers/preview/</a>)</p>
<p>Then, let’s finish off with some pop-up labels (click to see the action):</p>
<pre class="r"><code>df %&lt;&gt;% mutate(
 popup = paste(sep = &quot;&lt;br/&gt;&quot;, 
               paste(&quot;&lt;b&gt;Favorite Food:&quot;, favorite_food, &quot;&lt;/b&gt;&quot;), 
               paste(&quot;Favorite Color:&quot;, favorite_color), 
               address)
)

df %&gt;%
  leaflet() %&gt;% 
  addTiles() %&gt;%
  addProviderTiles(providers$CartoDB.Positron) %&gt;%
  addAwesomeMarkers(~lon, ~lat, icon=icons,
                    label = ~address,
                    popup = ~popup) </code></pre>
<div id="htmlwidget-5" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[40.6129419,40.6500629,40.6337817,40.873067,40.7329225,40.7520435,42.7618252,40.7010575],[-74.0766727,-73.8913059,-74.1230263,-73.858432,-74.00398,-73.9701833,-73.6629522,-73.7263072],{"icon":["bus","bicycle","bicycle","car","bicycle","car","bus","bus"],"markerColor":["green","blue","green","blue","green","green","orange","blue"],"iconColor":"white","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"fa"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["<b>Favorite Food: Peanuts <\/b><br/>Favorite Color: Blue<br/>3094  Bell Street, New York, New York","<b>Favorite Food: Salmon <\/b><br/>Favorite Color: Blue<br/>1181  Williams Avenue, New York, New York","<b>Favorite Food: Salmon <\/b><br/>Favorite Color: Green<br/>4289  Taylor Street, new york, new york","<b>Favorite Food: Caviar <\/b><br/>Favorite Color: Red<br/>2239  Duncan Avenue, new york, new york","<b>Favorite Food: Salmon <\/b><br/>Favorite Color: Blue<br/>2379  Grove Street, new york, ny","<b>Favorite Food: Caviar <\/b><br/>Favorite Color: Red<br/>302  Pallet Street, new york, new york","<b>Favorite Food: Peanuts <\/b><br/>Favorite Color: Red<br/>2664  Oakwood Avenue, new york, new york","<b>Favorite Food: Peanuts <\/b><br/>Favorite Color: Green<br/>3897  Hoffman Avenue, new york, new york"],null,null,null,["3094  Bell Street, New York, New York","1181  Williams Avenue, New York, New York","4289  Taylor Street, new york, new york","2239  Duncan Avenue, new york, new york","2379  Grove Street, new york, ny","302  Pallet Street, new york, new york","2664  Oakwood Avenue, new york, new york","3897  Hoffman Avenue, new york, new york"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[40.6129419,42.7618252],"lng":[-74.1230263,-73.6629522]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="google-maps-api" class="section level2">
<h2>Google maps API</h2>
<p>You don’t have to use the API if you have less than 2500 calls per day. But if you want ot use <code>geocode</code> and <code>gmapsdistnace</code>, you have to enable <code>Distance Matrix API</code> and <code>Geocoding API</code> on the Google Maps API. It’s fairly easy: just create an account and find those two boxes to click.</p>
</div>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="//tags/google/">google</a>

  <a class="tag tag--primary tag--small" href="//tags/api/">api</a>

  <a class="tag tag--primary tag--small" href="//tags/r/">r</a>

  <a class="tag tag--primary tag--small" href="//tags/leaflet/">leaflet</a>

  <a class="tag tag--primary tag--small" href="//tags/maps/">maps</a>

  <a class="tag tag--primary tag--small" href="//tags/dataviz/">dataviz</a>

  <a class="tag tag--primary tag--small" href="//tags/machine-learning/">machine-learning</a>

  <a class="tag tag--primary tag--small" href="//tags/geocode/">geocode</a>

  <a class="tag tag--primary tag--small" href="//tags/googlesheets/">googlesheets</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/basic-probability-and-stats/" data-tooltip="Basic Probability and Stats">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2018/07/debugging-leaflet-and-googlesheets-on-blogdown/" data-tooltip="Rmarkdown images, Leaflet and googlesheets on Blogdown">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
   
   
  <script>
  $(document).ready(function () {
    window.initializeCodeFolding("show" === "hide");
  });
  </script>
  <script src="/js/codefolding.js"></script>


    
  <span class="copyrights">
    &copy; 2019 Bryan Whiting. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2018/09/basic-probability-and-stats/" data-tooltip="Basic Probability and Stats">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/2018/07/debugging-leaflet-and-googlesheets-on-blogdown/" data-tooltip="Rmarkdown images, Leaflet and googlesheets on Blogdown">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2f07%2faddresses-and-maps%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2f2018%2f07%2faddresses-and-maps%2f">
        <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2f2018%2f07%2faddresses-and-maps%2f">
        <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2f2018%2f07%2faddresses-and-maps%2f">
        <i class="fa fa-twitter"></i><span>Share on Twitter</span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/0082821b175de32596e4c5cbb525f846?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Bryan Whiting</h4>
    
      <div id="about-card-bio">father, innovator, data scientist</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Data Scientist
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Washington, D.C.
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/sample-size/">
                <h3 class="media-heading">Sample Size</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">So your boss likes asking questions. Let’s find answers to a few she might ask.
# Go and collect some car data df = read.table(&#39;ftp://ftp.ics.uci.edu/pub/machine-learning-databases/auto-mpg/auto-mpg.data-original&#39;, col.names = c(&#39;mpg&#39;, &#39;cyl&#39;, &#39;disp&#39;, &#39;hp&#39;, &#39;wt&#39;, &#39;acc&#39;, &#39;year&#39;, &#39;origin&#39;, &#39;name&#39;)) # Let&#39;s randomly shuffle the rows set.seed(1) df &lt;- df[sample(nrow(df)),] # Extract make df$make &lt;- word(df$name) df %&lt;&gt;% filter(!is.na(mpg)) %&gt;% select(name, make, everything()) One Sample T-Test  Question 1: I think Ford cars have pretty bad miles-per-gallon (MPG).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/births-time-series-month/">
                <h3 class="media-heading">Modeling Birth Rates Part 2: By Month</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In Part 1, I modeled births at the year level, which didn’t seem to have much seasonality. Now I’m going to try to model the monthly birth rates in the US.
Predicting Seasonality I hit up the UN data to get seasonal birthrates, which I couldn’t find at CDC. Unfortunately, the UN data doesn’t have a long range of data.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/births-time-series-year/">
                <h3 class="media-heading">Modeling Birth Rates Part 1: By Year</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’m still excited to be a dad, so I’m going to try to model birth rates in the US. This will be a time series modeling exercise, and I’ll use this time to explore some modeling techniques. In Part 2 I’ll model the monthly birth rates.
I downloaded CDC birth data from here: * https://www.cdc.gov/nchs/data-visualization/natality-trends/ * “Births and General Fertility Rates” &gt; Download CSV * Other data sets can be found here: https://www.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/10/baby-names/">
                <h3 class="media-heading">Why does everyone I work with have the same name? A guide on how to not pick a unique baby name in America.</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’ve taken a particular interest in names since I’m thinking of a name for my to-be-born son. I did a little digging through the Social Security Administration names database, which lists all names given to baby boys and girls in America1. I began this exercise to just get a quality list of ideas, but my curiosity got the better of me.
Name Trends Since 1950 What was the most popular boy name since 1950?</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/09/baby-boy-names/">
                <h3 class="media-heading">Scraping Baby Boy Name Trends</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I’m going to be a dad (again) soon. I don’t want my boy to have a common name, so I gotta do my research. I’m curious: how do names trend over time? If I pick a name today, will it be popular tomorrow?
Step 1: The Social Security Administration reports all baby names each year in the United States, given the name occurs at least 5 times.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/04/dplyr-vs-datatable/">
                <h3 class="media-heading">Dplyr vs Datatable</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In the world of data science in R, the battle between dplyr and datatable is real. Here I compare their performance against base r commands for some common tasks. Who will be the winner on speed and simplicity?
Make random datasets set.seed(71) size1 &lt;- 4*10^6 size2 &lt;- size1 * 0.1 df1 &lt;- data.frame(id=paste0(&quot;SERVICE_&quot;, 1:size1), value=rnorm(size1), stringsAsFactors=FALSE) df2 &lt;- data.frame(id=paste0(&quot;SERVICE_&quot;, sample(1:size1, size2)), value=rnorm(size2), stringsAsFactors=FALSE) dt1 &lt;- data.table(df1) dt2 &lt;- data.table(df2) # mtcars data M &lt;- data.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/02/rshiny-on-docker-part2/">
                <h3 class="media-heading">Getting Custom Domain for EC2 Web App - Part 2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">In this post, I&rsquo;ll cover how to better customize some settings so to get your own custom domain for your EC2 instance. Say, app.example.com. Anyone interested in customizing an EC2 instance can use this - not just those who build R Shiny apps. I assume you already read part 1, where it was described how to launch an R Shiny app on EC2. I assume you already have some EC2 instance running with some useful app.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2019/02/rshiny-on-docker-part1/">
                <h3 class="media-heading">R Shiny on AWS Using Docker - Part 1</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I want to run R Shiny on AWS using Docker. Here&rsquo;s how to do it.
In part 2, I&rsquo;ll demonstrate how to get a custom domain and make the URL look clean.
Useful background reading If you&rsquo;re already comfortable with Docker, skip to the next section.
 Great Simple tutorial on using Docker and Flask: Short and sweet. Docker for Beginners: Verbose and lengthy. Excellent introduction. Walks you through all the jargon.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/09/machine-learning-models/">
                <h3 class="media-heading">Machine Learning Model Notes</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Here are some notes on machine learning models.
Concepts Behind Decision Trees  Bagging (boostrap aggregation): Randomly sample with replacement, and average the results. Majority vote: The most commonly-occuring prediction. Internal node: Where the splits occur. Branches: Segments that connect the nodes. Terminal node (leafs, regions): Where the observations end up. The average of the responses (or majority vote) is the prediction for future observations. Gini index: where \(m\) is the leaf and \(k\) is the class (0 or 1 for binary classification, but can be extedned for multiple classes).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/2018/09/byu-football/">
                <h3 class="media-heading">byu football</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Goal of this post. Answer some interesting questions about BYU football. Dive into different modeling approaches. I don’t explain my thinking below, but some of the charts might be cool.
Some questions of interest
 How is Kilani Sitake doing in his second season compared to past BYU coaches? More challenging: how’s he doing relative to all second-season coaches?  df_in &lt;- read.csv(file.path(fp_data, &#39;byu_seasons.csv&#39;)) %&gt;% distinct() Some basic questions: * How many years do we have data on?</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         25 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('/images/durango-blurred.JPG');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = '\/2018\/07\/addresses-and-maps\/';
          
            this.page.identifier = '\/2018\/07\/addresses-and-maps\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'bryanwhiting1';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

